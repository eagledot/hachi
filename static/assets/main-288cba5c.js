import{n as C,s as ie,S as de,i as fe,e as f,a as T,b as d,c as V,d as c,u as Fe,f as H,t as W,l as x,g as Re,h as se,j as We,k as re,m as he,r as me,o as be,p as Je,q as oe,v as Ne,w as Ke,x as ee,y as R,z as ge,A as X,B as ke,C as Oe,D as ae,E as ce,F as Ge,G as ue,H as Xe,I as Ue,J as ye,K as qe,L as Ye,M as Ze}from"./DarkMode-96777a85.js";const Me="/assets/fire-b1dcb636.svg",ne=[];function Qe(l,t=C){let e;const n=new Set;function i(r){if(ie(l,r)&&(l=r,e)){const u=!ne.length;for(const a of n)a[1](),ne.push(a,l);if(u){for(let a=0;a<ne.length;a+=2)ne[a][0](ne[a+1]);ne.length=0}}}function o(r){i(r(l))}function s(r,u=C){const a=[r,u];return n.add(a),n.size===1&&(e=t(i)||C),r(l),()=>{n.delete(a),n.size===0&&(e(),e=null)}}return{set:i,update:o,subscribe:s}}const ve="/api/",ze=Qe(-1),_e=Qe(!1);function Ie(l,t,e){const n=l.slice();return n[3]=t[e],n}function $e(l){let t,e;return{c(){t=f("img"),se(t.src,e=l[3].svg)||d(t,"src",e),d(t,"alt",l[3].text),d(t,"class","dark:text-white w-6 h-6")},m(n,i){V(n,t,i)},p:C,d(n){n&&H(t)}}}function Se(l,t){let e,n,i,o,s,r=t[3].text+"",u,a,h,p,k=t[3].svg&&$e(t);return{key:l,first:null,c(){e=f("li"),n=f("button"),i=f("span"),k&&k.c(),o=T(),s=f("span"),u=W(r),a=T(),d(s,"class","pl-2"),d(i,"class","capitalize flex items-center"),d(n,"class","w-full pl-8 py-2"),d(e,"class","font-semibold text-gray-700 dark:text-white hover:bg-pink-200 hover:dark:text-gray-700 mb-2 transition duration-500"),this.first=e},m(I,L){V(I,e,L),c(e,n),c(n,i),k&&k.m(i,null),c(i,o),c(i,s),c(s,u),c(e,a),h||(p=x(n,"click",t[3].func),h=!0)},p(I,L){t=I,t[3].svg&&k.p(t,L)},d(I){I&&H(e),k&&k.d(),h=!1,p()}}}function et(l){let t,e,n,i,o=[],s=new Map,r=l[0];const u=a=>a[3].id;for(let a=0;a<r.length;a+=1){let h=Ie(l,r,a),p=u(h);s.set(p,o[a]=Se(p,h))}return{c(){t=f("nav"),e=f("div"),e.innerHTML=`<a class="flex md:flex-col items-center" href="https:ramanlabs.in"><svg class="h-20 w-40 m-4 md:mt-10" viewBox="0 0 110 110"><circle class="fill-[#00f] opacity-[.24797] dark:fill-pink-100 dark:opacity-100" cx="55" cy="55" r="55" style="stroke-width:3.1181"></circle><path style="fill-opacity:.62308;fill:#1a1a1a;stroke-width:4;stroke:#000" d="M41.451 49.81h26.458v26.458H41.451z"></path><g style="fill:none;stroke-width:4;stroke:#000"><path d="M46.743 76.27v11.906M62.618 76.27v11.906M54.68 76.27v6.615M67.909 63.04h6.615M41.451 63.04h-6.615M54.68 76.27v5.292M54.68 49.81v-6.615M41.451 55.1H30.868M41.451 70.98H21.607L11.024 88.178M67.909 70.98h19.844l10.583 17.198M67.909 55.1h10.583M46.743 49.81V8.8l-6.615-6.615M62.618 49.81V8.8l6.615-6.615"></path></g><circle cx="46.743" cy="55.1" r=".671" style="fill-opacity:.62308;fill:#1a1a1a;stroke-width:2;stroke:#000"></circle></svg> 
      
      <svg class="h-8 w-40 m-4" viewBox="0 0 57.975 8.308"><g style="stroke-width:.26458"><path d="M.519 4.65q0-.635.307-1.132.317-.508.847-.805.529-.296 1.164-.296t.942.212q.317.2.243.486-.032.149-.127.233-.085.074-.201.095-.116.022-.254-.01-.677-.138-1.217-.021-.54.116-.857.434-.307.317-.307.804zm.01 3.62q-.253 0-.391-.128Q0 8.005 0 7.74V3.01q0-.254.138-.392T.53 2.48q.264 0 .391.138.138.127.138.392v4.73q0 .254-.138.392-.127.137-.391.137zM7.133 8.31q-.773 0-1.386-.381-.614-.392-.974-1.048-.35-.667-.35-1.503 0-.836.382-1.502.391-.667 1.047-1.048.667-.392 1.493-.392.825 0 1.481.392.656.38 1.037 1.048.392.666.392 1.502h-.413q0 .836-.36 1.503-.349.656-.963 1.048-.613.381-1.386.381zm.212-.952q.54 0 .963-.254.423-.265.666-.71.244-.455.244-1.016 0-.571-.244-1.016-.243-.455-.666-.709-.424-.264-.963-.264-.53 0-.963.264-.424.254-.678.71-.243.444-.243 1.015 0 .561.243 1.016.254.445.678.71.434.254.963.254zm2.37.92q-.232 0-.391-.148-.148-.159-.148-.391v-1.62l.2-1.121.88.38v2.36q0 .233-.16.392-.148.148-.38.148zM19.463 8.28q-.233 0-.392-.148-.148-.159-.148-.392V4.713q0-.666-.328-.984-.328-.328-.857-.328-.55 0-.91.381-.35.381-.35.974H15.6q0-.688.296-1.207.297-.529.826-.825.54-.297 1.228-.297.603 0 1.069.265.465.265.72.783.264.508.264 1.238V7.74q0 .233-.148.392-.149.148-.392.148zm-7.06 0q-.232 0-.39-.148-.149-.159-.149-.392V3.03q0-.243.148-.39.16-.15.392-.15.243 0 .391.15t.149.39v4.71q0 .233-.149.392-.148.148-.391.148zm3.536 0q-.233 0-.392-.148-.148-.159-.148-.392V4.713q0-.666-.328-.984-.328-.328-.857-.328-.55 0-.91.381t-.36.974h-.667q0-.688.275-1.207.275-.529.762-.825.487-.297 1.111-.297.603 0 1.07.265.465.265.719.783.264.508.264 1.238V7.74q0 .233-.148.392-.148.148-.391.148zM24.204 8.31q-.773 0-1.386-.381-.614-.392-.974-1.048-.35-.667-.35-1.503 0-.836.382-1.502.391-.667 1.047-1.048.667-.392 1.493-.392.825 0 1.481.392.656.38 1.037 1.048.392.666.392 1.502h-.413q0 .836-.36 1.503-.349.656-.963 1.048-.613.381-1.386.381zm.212-.952q.54 0 .963-.254.423-.265.666-.71.244-.455.244-1.016 0-.571-.244-1.016-.243-.455-.666-.709-.424-.264-.963-.264-.53 0-.963.264-.424.254-.678.71-.243.444-.243 1.015 0 .561.243 1.016.254.445.678.71.434.254.963.254zm2.37.92q-.232 0-.391-.148-.148-.159-.148-.391v-1.62l.2-1.121.88.38v2.36q0 .233-.16.392-.148.148-.38.148zM33.824 8.28q-.233 0-.392-.148-.148-.159-.148-.392V5.137q0-.603-.222-.984t-.603-.561q-.37-.19-.858-.19-.444 0-.804.179-.36.18-.571.487-.212.296-.212.688h-.667q0-.667.318-1.186.328-.529.889-.836t1.26-.307q.73 0 1.3.318.583.307.911.91.339.603.339 1.482V7.74q0 .233-.16.392-.147.148-.38.148zm-4.35 0q-.233 0-.391-.148-.148-.159-.148-.392V3.02q0-.243.148-.392.158-.148.391-.148.244 0 .392.148.148.149.148.392v4.72q0 .233-.148.392-.148.148-.392.148z"></path><path class="fill-[#007af3] dark:fill-pink-100" transform="translate(-27.111 -146.27)" d="M64.639 154.54q-.466 0-.826-.254t-.56-.688q-.202-.444-.202-1.016v-5.778q0-.233.149-.381.148-.149.38-.149.233 0 .382.149.148.148.148.38v5.78q0 .39.148.645.148.254.381.254h.265q.211 0 .338.148.138.148.138.38t-.201.382q-.201.148-.519.148zM68.534 154.58q-.773 0-1.386-.381-.614-.392-.974-1.048-.35-.667-.35-1.503 0-.836.382-1.502.391-.667 1.047-1.048.667-.392 1.493-.392.825 0 1.481.392.656.38 1.037 1.048.392.666.392 1.502h-.413q0 .836-.36 1.503-.349.656-.963 1.048-.613.381-1.386.381zm.212-.953q.54 0 .963-.253.423-.265.667-.71.243-.455.243-1.016 0-.571-.243-1.016-.244-.455-.667-.709-.424-.264-.963-.264-.53 0-.963.264-.424.254-.678.71-.243.444-.243 1.015 0 .561.243 1.016.254.445.678.71.434.254.963.254zm2.37.921q-.232 0-.391-.148-.148-.159-.148-.391v-1.62l.2-1.121.88.38v2.36q0 .233-.16.392-.148.148-.38.148zM76.175 154.58q-.826 0-1.482-.381-.656-.392-1.037-1.058-.38-.667-.391-1.503v-4.826q0-.244.148-.392.158-.148.391-.148.244 0 .392.148.148.148.148.392v2.857q.37-.444.889-.698.53-.265 1.154-.265.772 0 1.386.392.614.38.963 1.048.36.656.36 1.492t-.392 1.503q-.38.666-1.037 1.058-.656.381-1.492.381zm0-.953q.54 0 .963-.253.423-.265.667-.72.254-.455.254-1.016 0-.572-.254-1.016-.244-.445-.667-.699-.423-.264-.963-.264-.53 0-.963.264-.423.254-.667.699-.243.444-.243 1.016 0 .56.243 1.016.244.455.667.72.434.254.963.254zM82.811 154.58q-.74 0-1.376-.222-.624-.233-.973-.582-.16-.17-.138-.381.032-.223.212-.36.211-.17.412-.138.212.021.36.18.18.201.572.381.402.17.889.17.614 0 .931-.202.328-.2.339-.518.01-.318-.307-.55-.307-.233-1.133-.381-1.069-.212-1.555-.635-.477-.424-.477-1.038 0-.54.318-.889.317-.36.815-.529.497-.18 1.037-.18.699 0 1.238.222t.858.614q.148.17.137.36-.01.18-.18.307-.17.116-.402.074-.233-.042-.392-.19-.264-.254-.571-.35-.307-.095-.71-.095-.465 0-.793.159-.317.159-.317.466 0 .19.095.349.106.148.402.275.296.116.868.233.794.159 1.249.402.465.243.666.571.201.318.201.741 0 .487-.264.879-.254.391-.762.624-.498.233-1.249.233z"></path></g></svg></a>`,n=T(),i=f("ul");for(let a=0;a<o.length;a+=1)o[a].c();d(i,"class",""),d(t,"class","md:w-56 max-md:flex max-md:flex-col bg-gray-100 dark:bg-gray-500 md:overflow-y-auto py-4")},m(a,h){V(a,t,h),c(t,e),c(t,n),c(t,i);for(let p=0;p<o.length;p+=1)o[p].m(i,null)},p(a,[h]){h&1&&(r=a[0],o=Fe(o,h,u,1,a,r,s,i,Re,Se,null,Ie))},i:C,o:C,d(a){a&&H(t);for(let h=0;h<o.length;h+=1)o[h].d()}}}function tt(){window.location.href="/video_search.html"}function lt(){window.location.href="/search.html"}function nt(l,t,e){let{dirname:n=""}=t;const i=[{id:2,func:tt,text:"Video Search",svg:Me},{id:3,func:lt,text:"Image Search",svg:Me}];return l.$$set=o=>{"dirname"in o&&e(1,n=o.dirname)},[i,n]}class st extends de{constructor(t){super(),fe(this,t,nt,et,ie,{dirname:1})}}function Te(l,t,e){const n=l.slice();return n[35]=t[e],n[37]=e,n}function Ve(l,t,e){const n=l.slice();return n[38]=t[e],n}function He(l){let t,e=l[10],n=[];for(let i=0;i<e.length;i+=1)n[i]=xe(Ve(l,e,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();t=oe()},m(i,o){for(let s=0;s<n.length;s+=1)n[s].m(i,o);V(i,t,o)},p(i,o){if(o[0]&1536){e=i[10];let s;for(s=0;s<e.length;s+=1){const r=Ve(i,e,s);n[s]?n[s].p(r,o):(n[s]=xe(r),n[s].c(),n[s].m(t.parentNode,t))}for(;s<n.length;s+=1)n[s].d(1);n.length=e.length}},d(i){Ne(n,i),i&&H(t)}}}function xe(l){let t;return{c(){t=f("div"),d(t,"class","absolute bg-blue-900 top-0 w-[4px] h-full max-w-full"),re(t,"left",l[38]/l[9]*100+"%")},m(e,n){V(e,t,n)},p(e,n){n[0]&1536&&re(t,"left",e[38]/e[9]*100+"%")},d(e){e&&H(t)}}}function Le(l){let t,e=l[11].data,n=[];for(let i=0;i<e.length;i+=1)n[i]=Ce(Te(l,e,i));return{c(){t=f("div");for(let i=0;i<n.length;i+=1)n[i].c();d(t,"class","absolute bottom-0 left-0 h-32 flex flex-nowrap overflow-x-auto bg-transparent"),re(t,"scrollbar-color","red gray")},m(i,o){V(i,t,o);for(let s=0;s<n.length;s+=1)n[s].m(t,null);l[31](t)},p(i,o){if(o[0]&68608){e=i[11].data;let s;for(s=0;s<e.length;s+=1){const r=Te(i,e,s);n[s]?n[s].p(r,o):(n[s]=Ce(r),n[s].c(),n[s].m(t,null))}for(;s<n.length;s+=1)n[s].d(1);n.length=e.length}},d(i){i&&H(t),Ne(n,i),l[31](null)}}}function Ce(l){let t,e,n,i;function o(){return l[30](l[37])}return{c(){t=f("img"),d(t,"class","h-full mr-2 hover:border-4 border-red-400"),se(t.src,e="data:image/jpg;base64, "+l[35])||d(t,"src",e),d(t,"alt","video frames from search query")},m(s,r){V(s,t,r),n||(i=x(t,"click",o),n=!0)},p(s,r){l=s,r[0]&2048&&!se(t.src,e="data:image/jpg;base64, "+l[35])&&d(t,"src",e)},d(s){s&&H(t),n=!1,i()}}}function it(l){let t,e,n,i,o=l[0].video_title+"",s,r,u,a,h,p,k,I,L,_,S,z,m,b,j,E,w,g,v,B,G,O,P,q,M,D,$=!1,te,Y=!0,pe,Q,le,y,J,K,Z;function we(){cancelAnimationFrame(te),q.paused||(te=Ke(we),$=!0),l[25].call(q)}let F=l[10]&&He(l),N=l[10]&&Le(l);return{c(){t=f("div"),e=f("div"),n=f("div"),i=f("h3"),s=W(o),r=T(),u=f("button"),u.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg> 
        <span class="font-light">esc</span>`,a=T(),h=f("fieldset"),p=f("div"),k=f("legend"),k.textContent="Augmented Prompts",I=T(),L=f("label"),_=f("input"),S=W(`
          true`),z=T(),m=f("label"),b=f("input"),j=W(`
          false`),E=T(),w=f("div"),g=f("div"),v=f("button"),v.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="dark:text-black w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path></svg>',B=T(),G=f("input"),O=T(),P=f("div"),q=f("video"),M=f("track"),pe=T(),Q=f("div"),le=f("div"),y=T(),F&&F.c(),J=T(),N&&N.c(),d(i,"class","text-2xl mx-2 mt-2"),d(u,"class","absolute top-0 right-0 hover:text-pink-500 p-2"),d(_,"type","radio"),d(_,"name","prompts"),_.__value="true",_.value=_.__value,l[21][0].push(_),d(b,"type","radio"),d(b,"name","prompts"),b.__value="false",b.value=b.__value,l[21][0].push(b),d(h,"class","flex flex-row place-content-center mt-3"),d(v,"class","hover:text-pink-500 cursor-pointer px-2"),d(G,"class","focus:outline-none dark:text-black"),d(G,"type","text"),d(G,"placeholder","Search query"),d(g,"class","flex border rounded-full p-2 bg-white"),d(w,"class","flex place-content-center my-5"),d(M,"kind","captions"),d(q,"class","bg-black w-full h-full"),se(q.src,D=l[18]+"#t="+ot)||d(q,"src",D),q.autoplay=!0,l[9]===void 0&&We(()=>l[27].call(q)),d(le,"class","h-full bg-red-400"),re(le,"width",(l[7]/l[9]*100||0)+"%"),d(Q,"class","relative w-full h-[10px] hover:h-[20px] bg-red-200"),d(P,"class","relative w-full min-h-[400px] h-[40vh] break-all"),d(e,"class","relative max-w-[1080px] w-full pb-[10px] bg-gray-300 dark:bg-gray-700 dark:text-white"),d(t,"class","transform z-[9999] col-span-full w-full flex justify-center pb-[20px]")},m(A,U){V(A,t,U),c(t,e),c(e,n),c(n,i),c(i,s),c(n,r),c(n,u),c(e,a),c(e,h),c(h,p),c(p,k),c(p,I),c(p,L),c(L,_),_.checked=_.__value===l[4],c(L,S),c(p,z),c(p,m),c(m,b),b.checked=b.__value===l[4],c(m,j),c(e,E),c(e,w),c(w,g),c(g,v),c(g,B),c(g,G),l[23](G),c(e,O),c(e,P),c(P,q),c(q,M),l[24](q),c(P,pe),c(P,Q),c(Q,le),c(Q,y),F&&F.m(Q,null),c(P,J),N&&N.m(P,null),l[32](t),K||(Z=[x(u,"click",l[2]),x(_,"change",l[20]),x(b,"change",l[22]),x(v,"click",l[1]),x(G,"keyup",l[15]),x(q,"timeupdate",we),x(q,"play",l[26]),x(q,"pause",l[26]),x(q,"durationchange",l[27]),x(q,"click",l[28]),x(q,"click",l[29]),x(q,"mousemove",l[13]),x(Q,"mousemove",l[17]),x(Q,"mousemove",l[13]),x(Q,"mousedown",l[14])],K=!0)},p(A,U){U[0]&1&&o!==(o=A[0].video_title+"")&&he(s,o),U[0]&16&&(_.checked=_.__value===A[4]),U[0]&16&&(b.checked=b.__value===A[4]),!$&&U[0]&128&&!isNaN(A[7])&&(q.currentTime=A[7]),$=!1,U[0]&256&&Y!==(Y=A[8])&&q[Y?"pause":"play"](),U[0]&640&&re(le,"width",(A[7]/A[9]*100||0)+"%"),A[10]?F?F.p(A,U):(F=He(A),F.c(),F.m(Q,null)):F&&(F.d(1),F=null),A[10]?N?N.p(A,U):(N=Le(A),N.c(),N.m(P,null)):N&&(N.d(1),N=null)},i:C,o:C,d(A){A&&H(t),l[21][0].splice(l[21][0].indexOf(_),1),l[21][0].splice(l[21][0].indexOf(b),1),l[23](null),l[24](null),F&&F.d(),N&&N.d(),l[32](null),K=!1,me(Z)}}}const ot=0;function rt(l){const t=l.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function at(l,t,e){be(()=>{p(),rt(s)||s.scrollIntoView({block:"end",inline:"nearest"}),_e.set(!0),n.index_available==!1&&(r.setAttribute("disabled",""),r.setAttribute("placeholder","Gen index to query"))}),Je(()=>{k(),_e.set(!1)});let{f:n}=t,{show_modal:i}=t,o,s,r,u,a,h;a=!0;function p(){r.focus()}function k(){o.pause(),o.removeAttribute("src"),o.load(),e(19,i=!1)}document.addEventListener("keydown",function(y){y.key==="Escape"&&k()});function I(y,J){if(!h||J.buttons!=1)return;const{left:K,right:Z}=y.getBoundingClientRect();e(5,o.currentTime=h*(J.clientX-K)/(Z-K),o)}function L(y){I(this,y)}function _(y){I(this,y)}let S;var z;let m="true";function b(y){if(!y)return;const J=ve+"queryVideo";console.log(J),console.log("query text: ",y);let K=new FormData;K.append("video_hash",n.video_hash),K.append("query_text",y),K.append("aug_prompt",m),console.log("prompt_type: ",m),fetch(J,{method:"POST",mode:"cors",body:K}).then(Z=>Z.json()).then(Z=>{e(11,z=Z.meta_data),e(10,S=Z.meta_data.playback_pos)})}function j(y){if(y.key==="Enter"){const J=this.value;b(J)}}function E(y){o.pause(),e(5,o.currentTime=y,o)}let w;function g(){e(12,w.style.display="flex",w)}let v="video/"+n.video_title+"?video_directory="+n.video_directory;const B=[[]];function G(){m=this.__value,e(4,m),e(3,r)}function O(){m=this.__value,e(4,m),e(3,r)}function P(y){ee[y?"unshift":"push"](()=>{r=y,e(3,r)})}function q(y){ee[y?"unshift":"push"](()=>{o=y,e(5,o)})}function M(){u=this.currentTime,e(7,u)}function D(){a=this.paused,e(8,a)}function $(){h=this.duration,e(9,h)}const te=()=>e(8,a=!a),Y=()=>e(12,w.style.display="none",w),pe=y=>E(S[y]);function Q(y){ee[y?"unshift":"push"](()=>{w=y,e(12,w)})}function le(y){ee[y?"unshift":"push"](()=>{s=y,e(6,s)})}return l.$$set=y=>{"f"in y&&e(0,n=y.f),"show_modal"in y&&e(19,i=y.show_modal)},l.$$.update=()=>{l.$$.dirty[0]&24&&r&&(e(4,m),e(3,r),b(r.value))},[n,p,k,r,m,o,s,u,a,h,S,z,w,L,_,j,E,g,v,i,G,B,O,P,q,M,D,$,te,Y,pe,Q,le]}class ct extends de{constructor(t){super(),fe(this,t,at,it,ie,{f:0,show_modal:19,searchInputFocus:1,closeVideoModal:2},null,[-1,-1])}get searchInputFocus(){return this.$$.ctx[1]}get closeVideoModal(){return this.$$.ctx[2]}}function je(l){let t,e,n,i,o,s,r;return{c(){t=f("div"),e=f("progress"),i=T(),o=f("span"),s=W("ETA: "),r=W(l[3]),d(e,"class","bg-gray-400 dark:bg-gray-200 h-3 mt-2 w-full"),d(e,"data-hash",n=l[0].video_hash),e.value=l[2],d(e,"max","1")},m(u,a){V(u,t,a),c(t,e),c(t,i),c(t,o),c(o,s),c(o,r)},p(u,a){a&1&&n!==(n=u[0].video_hash)&&d(e,"data-hash",n),a&4&&(e.value=u[2]),a&8&&he(r,u[3])},d(u){u&&H(t)}}}function ut(l){let t,e,n;return{c(){t=f("button"),t.innerHTML="<span>Gen Index</span>",d(t,"class","items-center focus:outline-none rounded-lg py-2 px-6 leading-none bg-blue-200 dark:bg-blue-600 hover:bg-blue-300 dark:hover:bg-blue-800 disabled:bg-slate-100 dark:text-white")},m(i,o){V(i,t,o),l[9](t),e||(n=x(t,"click",l[6]),e=!0)},p:C,d(i){i&&H(t),l[9](null),e=!1,n()}}}function dt(l){let t;return{c(){t=f("p"),t.textContent="Already Indexed",d(t,"class","dark:text-white")},m(e,n){V(e,t,n)},p:C,d(e){e&&H(t)}}}function Ee(l){let t,e,n;function i(s){l[10](s)}let o={f:l[0]};return l[5]!==void 0&&(o.show_modal=l[5]),t=new ct({props:o}),ee.push(()=>Oe(t,"show_modal",i)),{c(){ae(t.$$.fragment)},m(s,r){ce(t,s,r),n=!0},p(s,r){const u={};r&1&&(u.f=s[0]),!e&&r&32&&(e=!0,u.show_modal=s[5],Ge(()=>e=!1)),t.$set(u)},i(s){n||(R(t.$$.fragment,s),n=!0)},o(s){X(t.$$.fragment,s),n=!1},d(s){ue(t,s)}}}function ft(l){let t,e,n,i,o=l[0].video_title+"",s,r,u,a,h,p,k,I,L,_,S,z,m,b=l[4]&&je(l);function j(v,B){return v[0].index_available===!0?dt:ut}let E=j(l),w=E(l),g=l[5]&&Ee(l);return{c(){t=f("div"),e=f("div"),n=f("div"),i=f("label"),s=W(o),r=T(),u=f("button"),a=f("img"),p=T(),b&&b.c(),k=T(),I=f("div"),w.c(),L=T(),g&&g.c(),_=oe(),d(i,"for",""),d(i,"class","mb-2 text-blue-500 dark:text-white h-auto w-full"),d(a,"class","h-auto w-full rounded-lg"),se(a.src,h="/api/videoPoster/"+l[0].video_hash+".jpg")||d(a,"src",h),d(a,"alt","videos from selected directory"),d(u,"class","h-auto w-full shadow-xl"),d(n,"class","break-all"),d(I,"class","mx-auto mt-2"),d(e,"class","flex flex-col"),d(t,"class","mb-4 dark:text-white")},m(v,B){V(v,t,B),c(t,e),c(e,n),c(n,i),c(i,s),c(n,r),c(n,u),c(u,a),c(n,p),b&&b.m(n,null),c(e,k),c(e,I),w.m(I,null),V(v,L,B),g&&g.m(v,B),V(v,_,B),S=!0,z||(m=x(u,"click",l[7]),z=!0)},p(v,[B]){(!S||B&1)&&o!==(o=v[0].video_title+"")&&he(s,o),(!S||B&1&&!se(a.src,h="/api/videoPoster/"+v[0].video_hash+".jpg"))&&d(a,"src",h),v[4]?b?b.p(v,B):(b=je(v),b.c(),b.m(n,null)):b&&(b.d(1),b=null),E===(E=j(v))&&w?w.p(v,B):(w.d(1),w=E(v),w&&(w.c(),w.m(I,null))),v[5]?g?(g.p(v,B),B&32&&R(g,1)):(g=Ee(v),g.c(),R(g,1),g.m(_.parentNode,_)):g&&(ge(),X(g,1,1,()=>{g=null}),ke())},i(v){S||(R(g),S=!0)},o(v){X(g),S=!1},d(v){v&&H(t),b&&b.d(),w.d(),v&&H(L),g&&g.d(v),v&&H(_),z=!1,m()}}}function ht(l,t,e){let{f:n=""}=t,{i=-1}=t;be(()=>{let _=sessionStorage.getItem(n.video_hash);console.log("session storage:",_),_==="indexing"&&(h(),o&&(e(1,o.disabled=!0,o),e(1,o.innerHTML="Index in progress",o)))});let o;var s="0",r="unknown",u=!1;function a(){this.disabled=!0,this.innerHTML="Index in progress",e(4,u=!0);const _=h(),S=ve+"/videoIndex";let z=new FormData;z.append("video_absolute_path",n.video_absolute_path),fetch(S,{method:"POST",body:z}).then(m=>m.json()).then(m=>{e(4,u=!1),this.innerHTML="Index complete",sessionStorage.setItem(n.video_hash,"indexed"),e(0,n.index_available=!0,n),_.close()})}function h(){let _=new EventSource("/api/progress/"+n.video_hash);_.onmessage=S=>{console.log("Got some data: "+S.data);let z=S.data.split("_"),m=z[0],b=z[1];e(3,r=z[2]),n.video_hash===b&&(e(2,s=m),e(4,u=!0),sessionStorage.setItem(b,"indexing")),s=="1.0"&&(console.log("Index complete"),e(4,u=!1),o&&(e(1,o.disabled=!0,o),e(1,o.innerHTML="Index complete",o)),sessionStorage.setItem(b,"indexed"))},_.onerror=S=>{console.log("Error with event source"),_.close()}}let p=!1;function k(){p?e(5,p=!1):(e(5,p=!0),ze.update(_=>i))}ze.subscribe(_=>{i!=_&&e(5,p=!1)});function I(_){ee[_?"unshift":"push"](()=>{o=_,e(1,o)})}function L(_){p=_,e(5,p)}return l.$$set=_=>{"f"in _&&e(0,n=_.f),"i"in _&&e(8,i=_.i)},[n,o,s,r,u,p,a,k,i,I,L]}class pt extends de{constructor(t){super(),fe(this,t,ht,ft,ie,{f:0,i:8})}}function Be(l){let t;return{c(){t=f("div"),d(t,"class","absolute right-10 z-50 h-[40vh] bg-pink-200")},m(e,n){V(e,t,n)},d(e){e&&H(t)}}}function _t(l){let t,e,n,i,o,s,r,u,a,h,p,k,I,L,_,S,z,m,b,j,E;I=new Xe({props:{darkMode:mt}});let w=l[2]&&Be();return{c(){t=f("div"),e=f("span"),n=W("Total videos: "),i=f("strong"),o=W(l[0]),s=T(),r=f("div"),u=f("button"),u.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="dark:text-white w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path></svg>',a=T(),h=f("input"),p=T(),k=f("div"),ae(I.$$.fragment),L=T(),_=f("div"),S=f("button"),S.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 011.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.107 1.204.165.397.505.71.93.78l.893.15c.543.09.94.56.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.893.149c-.425.07-.765.383-.93.78-.165.398-.143.854.107 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 01-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.397.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 01-.12-1.45l.527-.737c.25-.35.273-.806.108-1.204-.165-.397-.505-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.107-1.204l-.527-.738a1.125 1.125 0 01.12-1.45l.773-.773a1.125 1.125 0 011.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>',z=T(),w&&w.c(),m=oe(),d(e,"class","text-sm"),d(u,"class","hover:text-pink-500 cursor-pointer mr-3"),d(h,"class","bg-transparent focus:outline-none"),d(h,"placeholder","Search list"),d(r,"class","flex items-center select-none hover:border-b border-black dark:border-white"),d(S,"class","ml-3 rounded-full p-2 focus:outline-none hover:bg-blue-300 transition duration-500"),d(_,"class","flex items-center select-none"),d(k,"class","flex items-center select-none"),d(t,"class","mt-1 mb-4 flex items-center justify-between dark:text-white")},m(g,v){V(g,t,v),c(t,e),c(e,n),c(e,i),c(i,o),c(t,s),c(t,r),c(r,u),c(r,a),c(r,h),l[5](h),c(t,p),c(t,k),ce(I,k,null),c(k,L),c(k,_),c(_,S),V(g,z,v),w&&w.m(g,v),V(g,m,v),b=!0,j||(E=[x(u,"click",l[4]),x(h,"keyup",l[3]),x(S,"click",l[6])],j=!0)},p(g,[v]){(!b||v&1)&&he(o,g[0]),g[2]?w||(w=Be(),w.c(),w.m(m.parentNode,m)):w&&(w.d(1),w=null)},i(g){b||(R(I.$$.fragment,g),b=!0)},o(g){X(I.$$.fragment,g),b=!1},d(g){g&&H(t),l[5](null),ue(I),g&&H(z),w&&w.d(g),g&&H(m),j=!1,me(E)}}}let mt=!1;function bt(l,t,e){let{items:n=0}=t,i,o=!1;const s=Ue();function r(){s("message",{text:this.value})}const u=()=>i.focus();function a(p){ee[p?"unshift":"push"](()=>{i=p,e(1,i)})}const h=()=>e(2,o=!o);return l.$$set=p=>{"items"in p&&e(0,n=p.items)},[n,i,o,r,u,a,h]}class gt extends de{constructor(t){super(),fe(this,t,bt,_t,ie,{items:0})}}function Ae(l,t,e){const n=l.slice();return n[15]=t[e],n[17]=e,n}function kt(l){let t,e,n,i,o,s,r,u,a={ctx:l,current:null,token:null,hasCatch:!1,pending:qt,then:yt,catch:wt,blocks:[,,,]};return qe(r=l[2],a),{c(){t=f("p"),e=W("Current selected directory: "),n=f("span"),i=W(l[0]),o=T(),s=oe(),a.block.c(),d(n,"class","font-bold"),d(t,"class","dark:text-white")},m(h,p){V(h,t,p),c(t,e),c(t,n),c(n,i),V(h,o,p),V(h,s,p),a.block.m(h,a.anchor=p),a.mount=()=>s.parentNode,a.anchor=s,u=!0},p(h,p){l=h,(!u||p&1)&&he(i,l[0]),a.ctx=l,p&4&&r!==(r=l[2])&&qe(r,a)||Ye(a,l,p)},i(h){u||(R(a.block),u=!0)},o(h){for(let p=0;p<3;p+=1){const k=a.blocks[p];X(k)}u=!1},d(h){h&&H(t),h&&H(o),h&&H(s),a.block.d(h),a.token=null,a=null}}}function vt(l){let t;return{c(){t=f("p"),t.textContent="Select a directory.",d(t,"class","dark:text-white text-2xl")},m(e,n){V(e,t,n)},p:C,i:C,o:C,d(e){e&&H(t)}}}function wt(l){return{c:C,m:C,p:C,i:C,o:C,d:C}}function yt(l){let t,e=[],n=new Map,i,o=l[1];const s=r=>r[15];for(let r=0;r<o.length;r+=1){let u=Ae(l,o,r),a=s(u);n.set(a,e[r]=De(a,u))}return{c(){t=f("div");for(let r=0;r<e.length;r+=1)e[r].c();d(t,"class","relative grid sm:grid-cols-3 2xl:grid-cols-5 min-[2400px]:grid-cols-9 gap-8 mt-6 grid-flow-row-dense")},m(r,u){V(r,t,u);for(let a=0;a<e.length;a+=1)e[a].m(t,null);i=!0},p(r,u){u&2&&(o=r[1],ge(),e=Fe(e,u,s,1,r,o,n,t,Ze,De,null,Ae),ke())},i(r){if(!i){for(let u=0;u<o.length;u+=1)R(e[u]);i=!0}},o(r){for(let u=0;u<e.length;u+=1)X(e[u]);i=!1},d(r){r&&H(t);for(let u=0;u<e.length;u+=1)e[u].d()}}}function De(l,t){let e,n,i;return n=new pt({props:{f:t[15],i:t[17]}}),{key:l,first:null,c(){e=oe(),ae(n.$$.fragment),this.first=e},m(o,s){V(o,e,s),ce(n,o,s),i=!0},p(o,s){t=o;const r={};s&2&&(r.f=t[15]),s&2&&(r.i=t[17]),n.$set(r)},i(o){i||(R(n.$$.fragment,o),i=!0)},o(o){X(n.$$.fragment,o),i=!1},d(o){o&&H(e),ue(n,o)}}}function qt(l){let t;return{c(){t=f("p"),t.textContent="Fetching data....",d(t,"class","dark:text-white")},m(e,n){V(e,t,n)},p:C,i:C,o:C,d(e){e&&H(t)}}}function Pe(l){let t;return{c(){t=f("div"),t.innerHTML='<div class="absolute inset-0 bg-gray-900 opacity-75"></div>',d(t,"class","fixed inset-0 transition-opacity")},m(e,n){V(e,t,n)},d(e){e&&H(t)}}}function Mt(l){let t,e,n,i,o,s,r,u,a,h,p,k,I,L,_,S,z,m,b,j,E,w,g;function v(M){l[11](M)}let B={};l[0]!==void 0&&(B.dirname=l[0]),e=new st({props:B}),ee.push(()=>Oe(e,"dirname",v)),r=new gt({props:{items:l[1].length}}),r.$on("message",l[6]);const G=[vt,kt],O=[];function P(M,D){return M[0]?1:0}z=P(l),m=O[z]=G[z](l);let q=l[4]&&Pe();return{c(){t=f("div"),ae(e.$$.fragment),i=T(),o=f("main"),s=f("div"),ae(r.$$.fragment),u=T(),a=f("input"),h=T(),p=f("label"),k=f("input"),I=W(`
        Include Subdirectories`),L=T(),_=f("button"),_.innerHTML="<span>Select video directory</span>",S=T(),m.c(),b=T(),q&&q.c(),j=oe(),d(a,"type","text"),d(a,"class","dark:text-white w-96 bg-transparent focus:outline-none border-b border-black dark:border-white"),d(a,"placeholder","Provide absolute path to video directory."),d(k,"type","checkbox"),d(p,"class","dark:text-white w-96 bg-transparent"),d(_,"class","items-center focus:outline-none rounded-lg my-3 py-2 px-6 mb-4 leading-none bg-blue-200 dark:bg-blue-600 hover:bg-blue-300 hover:dark:bg-blue-800 dark:text-white disabled:bg-slate-100"),d(s,"class","sm:px-12 max-sm:px-4 py-12 text-gray-700"),d(o,"class","max-md:flex flex-1 bg-gray-300 dark:bg-gray-600 overflow-y-auto"),d(t,"class","min-h-screen md:flex")},m(M,D){V(M,t,D),ce(e,t,null),c(t,i),c(t,o),c(o,s),ce(r,s,null),c(s,u),c(s,a),ye(a,l[5]),c(s,h),c(s,p),c(p,k),k.checked=l[3],c(p,I),c(s,L),c(s,_),c(s,S),O[z].m(s,null),V(M,b,D),q&&q.m(M,D),V(M,j,D),E=!0,w||(g=[x(a,"keydown",l[8]),x(a,"input",l[12]),x(k,"change",l[13]),x(_,"click",l[7])],w=!0)},p(M,[D]){const $={};!n&&D&1&&(n=!0,$.dirname=M[0],Ge(()=>n=!1)),e.$set($);const te={};D&2&&(te.items=M[1].length),r.$set(te),D&32&&a.value!==M[5]&&ye(a,M[5]),D&8&&(k.checked=M[3]);let Y=z;z=P(M),z===Y?O[z].p(M,D):(ge(),X(O[Y],1,1,()=>{O[Y]=null}),ke(),m=O[z],m?m.p(M,D):(m=O[z]=G[z](M),m.c()),R(m,1),m.m(s,null)),M[4]?q||(q=Pe(),q.c(),q.m(j.parentNode,j)):q&&(q.d(1),q=null)},i(M){E||(R(e.$$.fragment,M),R(r.$$.fragment,M),R(m),E=!0)},o(M){X(e.$$.fragment,M),X(r.$$.fragment,M),X(m),E=!1},d(M){M&&H(t),ue(e),ue(r),O[z].d(),M&&H(b),q&&q.d(M),M&&H(j),w=!1,me(g)}}}function zt(l,t,e){be(()=>{let m=localStorage.getItem("dirname");m&&(e(0,n=m),console.log(n))}),_e.set(!1);let n="",i=[],o=[],s="",r,u=!1;async function a(){const m=ve+"/videos";let b=new FormData;b.append("video_directory",n),b.append("include_subdirectories",u.toString());const j=await fetch(m,{method:"POST",body:b});if(j.ok){const E=await j.json();return e(9,i=E),E}else throw new Error(j)}function h(m){e(10,s=m.detail.text.toLowerCase())}var p=!1;_e.subscribe(m=>{e(4,p=m),console.log("dark bg value:",m)});let k;function I(){k&&(e(0,n=k),localStorage.setItem("dirname",n))}function L(m){m.key==="Enter"&&I()}function _(m){n=m,e(0,n)}function S(){k=this.value,e(5,k)}function z(){u=this.checked,e(3,u)}return l.$$.update=()=>{l.$$.dirty&1536&&i&&e(1,o=i.filter(m=>m.video_title.toLowerCase().search(s)!=-1)),l.$$.dirty&1&&n&&e(2,r=a())},[n,o,r,u,p,k,h,I,L,i,s,_,S,z]}class It extends de{constructor(t){super(),fe(this,t,zt,Mt,ie,{})}}new It({target:document.getElementById("app")});
