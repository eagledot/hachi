import{n as F,s as re,S as ce,i as fe,e as d,a as V,b as c,c as le,d as E,f as a,u as Ue,g as L,t as Z,l as P,h as tt,j as lt,k as ne,m as de,r as me,o as ge,p as Ze,q as se,v as be,w as nt,x as $,y as U,z as ve,A as ee,B as ke,C as ye,D as _e,E as pe,F as Ie,G as he,H as ot,I as Te,J as Se,K as it,L as st}from"./index-ad9718b8.js";const rt="/assets/logo_name.min-1a2be51e.svg",at="/assets/logo.min-fe8af568.svg",Ce="/assets/fire-cb6a32ef.svg",ae=[];function xe(n,t=F){let e;const l=new Set;function i(r){if(re(n,r)&&(n=r,e)){const u=!ae.length;for(const f of l)f[1](),ae.push(f,n);if(u){for(let f=0;f<ae.length;f+=2)ae[f][0](ae[f+1]);ae.length=0}}}function s(r){i(r(n))}function o(r,u=F){const f=[r,u];return l.add(f),l.size===1&&(e=t(i)||F),r(n),()=>{l.delete(f),l.size===0&&(e(),e=null)}}return{set:i,update:s,subscribe:o}}const we="/api/",Ve=xe(-1),ue=xe(!1);function je(n,t,e){const l=n.slice();return l[3]=t[e],l}function ut(n){let t,e;return{c(){t=d("img"),le(t.src,e=n[3].svg)||c(t,"src",e),c(t,"alt",n[3].text),c(t,"class","w-6 h-6")},m(l,i){E(l,t,i)},p:F,d(l){l&&L(t)}}}function Ee(n,t){let e,l,i,s,o,r=t[3].text+"",u,f,g,_,M=t[3].svg&&ut(t);return{key:n,first:null,c(){e=d("li"),l=d("button"),i=d("span"),M&&M.c(),s=V(),o=d("span"),u=Z(r),f=V(),c(o,"class","pl-2"),c(i,"class","capitalize flex items-center"),c(l,"class","w-full pl-8 py-2"),c(e,"class","font-semibold text-gray-700 hover:bg-pink-200 mb-2 transition duration-500"),this.first=e},m(v,b){E(v,e,b),a(e,l),a(l,i),M&&M.m(i,null),a(i,s),a(i,o),a(o,u),a(e,f),g||(_=P(l,"click",t[3].func),g=!0)},p(v,b){t=v,t[3].svg&&M.p(t,b)},d(v){v&&L(e),M&&M.d(),g=!1,_()}}}function ct(n){let t,e,l,i,s,o,r,u,f,g,_=[],M=new Map,v=n[0];const b=m=>m[3].id;for(let m=0;m<v.length;m+=1){let p=je(n,v,m),C=b(p);M.set(C,_[m]=Ee(C,p))}return{c(){t=d("nav"),e=d("div"),l=d("a"),i=d("img"),o=V(),r=d("img"),f=V(),g=d("ul");for(let m=0;m<_.length;m+=1)_[m].c();c(i,"class","h-20 w-40 m-4 md:mt-10"),le(i.src,s=at)||c(i,"src",s),c(i,"alt","ramanlabs.in logo"),c(r,"class","h-8 w-40 m-4"),le(r.src,u=rt)||c(r,"src",u),c(r,"alt","ramanlabs.in logo"),c(l,"class","flex md:flex-col items-center"),c(l,"href","https:ramanlabs.in"),c(g,"class",""),c(t,"class","md:w-56 max-md:flex max-md:flex-col bg-gray-100 md:overflow-y-auto py-4")},m(m,p){E(m,t,p),a(t,e),a(e,l),a(l,i),a(l,o),a(l,r),a(t,f),a(t,g);for(let C=0;C<_.length;C+=1)_[C].m(g,null)},p(m,[p]){p&1&&(v=m[0],_=Ue(_,p,b,1,m,v,M,g,tt,Ee,null,je))},i:F,o:F,d(m){m&&L(t);for(let p=0;p<_.length;p+=1)_[p].d()}}}function ft(){window.location.href="/video_search.html"}function dt(){window.location.href="/search.html"}function _t(n,t,e){let{dirname:l=""}=t;const i=[{id:2,func:ft,text:"Video Search",svg:Ce},{id:3,func:dt,text:"Image Search",svg:Ce}];return n.$$set=s=>{"dirname"in s&&e(1,l=s.dirname)},[i,l]}class pt extends ce{constructor(t){super(),fe(this,t,_t,ct,re,{dirname:1})}}function Le(n,t,e){const l=n.slice();return l[35]=t[e],l[37]=e,l}function qe(n,t,e){const l=n.slice();return l[38]=t[e],l}function He(n){let t,e=n[10],l=[];for(let i=0;i<e.length;i+=1)l[i]=Ae(qe(n,e,i));return{c(){for(let i=0;i<l.length;i+=1)l[i].c();t=se()},m(i,s){for(let o=0;o<l.length;o+=1)l[o].m(i,s);E(i,t,s)},p(i,s){if(s[0]&1536){e=i[10];let o;for(o=0;o<e.length;o+=1){const r=qe(i,e,o);l[o]?l[o].p(r,s):(l[o]=Ae(r),l[o].c(),l[o].m(t.parentNode,t))}for(;o<l.length;o+=1)l[o].d(1);l.length=e.length}},d(i){be(l,i),i&&L(t)}}}function Ae(n){let t;return{c(){t=d("div"),c(t,"class","absolute bg-blue-900 top-0 w-[4px] h-full max-w-full"),ne(t,"left",n[38]/n[9]*100+"%")},m(e,l){E(e,t,l)},p(e,l){l[0]&1536&&ne(t,"left",e[38]/e[9]*100+"%")},d(e){e&&L(t)}}}function Be(n){let t,e=n[11].data,l=[];for(let i=0;i<e.length;i+=1)l[i]=Pe(Le(n,e,i));return{c(){t=d("div");for(let i=0;i<l.length;i+=1)l[i].c();c(t,"class","absolute bottom-0 left-0 h-32 flex flex-nowrap overflow-x-auto bg-transparent"),ne(t,"scrollbar-color","red gray")},m(i,s){E(i,t,s);for(let o=0;o<l.length;o+=1)l[o].m(t,null);n[31](t)},p(i,s){if(s[0]&68608){e=i[11].data;let o;for(o=0;o<e.length;o+=1){const r=Le(i,e,o);l[o]?l[o].p(r,s):(l[o]=Pe(r),l[o].c(),l[o].m(t,null))}for(;o<l.length;o+=1)l[o].d(1);l.length=e.length}},d(i){i&&L(t),be(l,i),n[31](null)}}}function Pe(n){let t,e,l,i;function s(){return n[30](n[37])}return{c(){t=d("img"),c(t,"class","h-full mr-2 hover:border-4 border-red-400"),le(t.src,e="data:image/jpg;base64, "+n[35])||c(t,"src",e),c(t,"alt","video frames from search query")},m(o,r){E(o,t,r),l||(i=P(t,"click",s),l=!0)},p(o,r){n=o,r[0]&2048&&!le(t.src,e="data:image/jpg;base64, "+n[35])&&c(t,"src",e)},d(o){o&&L(t),l=!1,i()}}}function ht(n){let t,e,l,i,s=n[0].video_title+"",o,r,u,f,g,_,M,v,b,m,p,C,T,h,H,A,q,y,I,j,w,R,D,B,Y,X,x=!1,oe,S=!0,Q,O,N,k,z,G,ie;function Me(){cancelAnimationFrame(oe),B.paused||(oe=nt(Me),x=!0),n[25].call(B)}let J=n[10]&&He(n),K=n[10]&&Be(n);return{c(){t=d("div"),e=d("div"),l=d("div"),i=d("h3"),o=Z(s),r=V(),u=d("button"),u.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg> 
        <span class="font-light">esc</span>`,f=V(),g=d("fieldset"),_=d("div"),M=d("legend"),M.textContent="Augmented Prompts",v=V(),b=d("label"),m=d("input"),p=Z(`\r
          true`),C=V(),T=d("label"),h=d("input"),H=Z(`\r
          false`),A=V(),q=d("div"),y=d("div"),I=d("button"),I.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path></svg>',j=V(),w=d("input"),R=V(),D=d("div"),B=d("video"),Y=d("track"),Q=V(),O=d("div"),N=d("div"),k=V(),J&&J.c(),z=V(),K&&K.c(),c(i,"class","text-2xl mx-2 mt-2"),c(u,"class","absolute top-0 right-0 hover:text-pink-500 p-2"),c(m,"type","radio"),c(m,"name","prompts"),m.__value="true",m.value=m.__value,n[21][0].push(m),c(h,"type","radio"),c(h,"name","prompts"),h.__value="false",h.value=h.__value,n[21][0].push(h),c(g,"class","flex flex-row place-content-center mt-3"),c(I,"class","hover:text-pink-500 cursor-pointer px-2"),c(w,"class","focus:outline-none"),c(w,"type","text"),c(w,"placeholder","Search query"),c(y,"class","flex border rounded-full p-2 bg-white"),c(q,"class","flex place-content-center my-5"),c(Y,"kind","captions"),c(B,"class","bg-black w-full h-full"),le(B.src,X=n[18]+"#t="+mt)||c(B,"src",X),B.autoplay=!0,n[9]===void 0&&lt(()=>n[27].call(B)),c(N,"class","h-full bg-red-400"),ne(N,"width",(n[7]/n[9]*100||0)+"%"),c(O,"class","relative w-full h-[10px] hover:h-[20px] bg-red-200"),c(D,"class","relative w-full min-h-[400px] h-[40vh] break-all"),c(e,"class","relative max-w-[1080px] w-full pb-[10px] bg-gray-300"),c(t,"class","transform z-[9999] col-span-full w-full flex justify-center pb-[20px]")},m(W,te){E(W,t,te),a(t,e),a(e,l),a(l,i),a(i,o),a(l,r),a(l,u),a(e,f),a(e,g),a(g,_),a(_,M),a(_,v),a(_,b),a(b,m),m.checked=m.__value===n[4],a(b,p),a(_,C),a(_,T),a(T,h),h.checked=h.__value===n[4],a(T,H),a(e,A),a(e,q),a(q,y),a(y,I),a(y,j),a(y,w),n[23](w),a(e,R),a(e,D),a(D,B),a(B,Y),n[24](B),a(D,Q),a(D,O),a(O,N),a(O,k),J&&J.m(O,null),a(D,z),K&&K.m(D,null),n[32](t),G||(ie=[P(u,"click",n[2]),P(m,"change",n[20]),P(h,"change",n[22]),P(I,"click",n[1]),P(w,"keyup",n[15]),P(B,"timeupdate",Me),P(B,"play",n[26]),P(B,"pause",n[26]),P(B,"durationchange",n[27]),P(B,"click",n[28]),P(B,"click",n[29]),P(B,"mousemove",n[13]),P(O,"mousemove",n[17]),P(O,"mousemove",n[13]),P(O,"mousedown",n[14])],G=!0)},p(W,te){te[0]&1&&s!==(s=W[0].video_title+"")&&de(o,s),te[0]&16&&(m.checked=m.__value===W[4]),te[0]&16&&(h.checked=h.__value===W[4]),!x&&te[0]&128&&!isNaN(W[7])&&(B.currentTime=W[7]),x=!1,te[0]&256&&S!==(S=W[8])&&B[S?"pause":"play"](),te[0]&640&&ne(N,"width",(W[7]/W[9]*100||0)+"%"),W[10]?J?J.p(W,te):(J=He(W),J.c(),J.m(O,null)):J&&(J.d(1),J=null),W[10]?K?K.p(W,te):(K=Be(W),K.c(),K.m(D,null)):K&&(K.d(1),K=null)},i:F,o:F,d(W){W&&L(t),n[21][0].splice(n[21][0].indexOf(m),1),n[21][0].splice(n[21][0].indexOf(h),1),n[23](null),n[24](null),J&&J.d(),K&&K.d(),n[32](null),G=!1,me(ie)}}}const mt=0;function gt(n){const t=n.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function bt(n,t,e){ge(()=>{_(),gt(o)||o.scrollIntoView({block:"end",inline:"nearest"}),ue.set(!0),l.index_available==!1&&(r.setAttribute("disabled",""),r.setAttribute("placeholder","Gen index to query"))}),Ze(()=>{M(),ue.set(!1)});let{f:l}=t,{show_modal:i}=t,s,o,r,u,f,g;f=!0;function _(){r.focus()}function M(){s.pause(),s.removeAttribute("src"),s.load(),e(19,i=!1)}document.addEventListener("keydown",function(k){k.key==="Escape"&&M()});function v(k,z){if(!g||z.buttons!=1)return;const{left:G,right:ie}=k.getBoundingClientRect();e(5,s.currentTime=g*(z.clientX-G)/(ie-G),s)}function b(k){v(this,k)}function m(k){v(this,k)}let p;var C;let T="true";function h(k){if(!k)return;const z=we+"queryVideo";console.log(z),console.log("query text: ",k);let G=new FormData;G.append("video_hash",l.video_hash),G.append("query_text",k),G.append("aug_prompt",T),console.log("prompt_type: ",T),fetch(z,{method:"POST",mode:"cors",body:G}).then(ie=>ie.json()).then(ie=>{e(11,C=ie.meta_data),e(10,p=ie.meta_data.playback_pos)})}function H(k){if(k.key==="Enter"){const z=this.value;h(z)}}function A(k){s.pause(),e(5,s.currentTime=k,s)}let q;function y(){e(12,q.style.display="flex",q)}let I="video/"+l.video_title+"?video_directory="+l.video_directory;const j=[[]];function w(){T=this.__value,e(4,T),e(3,r)}function R(){T=this.__value,e(4,T),e(3,r)}function D(k){$[k?"unshift":"push"](()=>{r=k,e(3,r)})}function B(k){$[k?"unshift":"push"](()=>{s=k,e(5,s)})}function Y(){u=this.currentTime,e(7,u)}function X(){f=this.paused,e(8,f)}function x(){g=this.duration,e(9,g)}const oe=()=>e(8,f=!f),S=()=>e(12,q.style.display="none",q),Q=k=>A(p[k]);function O(k){$[k?"unshift":"push"](()=>{q=k,e(12,q)})}function N(k){$[k?"unshift":"push"](()=>{o=k,e(6,o)})}return n.$$set=k=>{"f"in k&&e(0,l=k.f),"show_modal"in k&&e(19,i=k.show_modal)},n.$$.update=()=>{n.$$.dirty[0]&24&&r&&(e(4,T),e(3,r),h(r.value))},[l,_,M,r,T,s,o,u,f,g,p,C,q,b,m,H,A,y,I,i,w,j,R,D,B,Y,X,x,oe,S,Q,O,N]}class vt extends ce{constructor(t){super(),fe(this,t,bt,ht,re,{f:0,show_modal:19,searchInputFocus:1,closeVideoModal:2},null,[-1,-1])}get searchInputFocus(){return this.$$.ctx[1]}get closeVideoModal(){return this.$$.ctx[2]}}function Ne(n,t,e){const l=n.slice();return l[35]=t[e],l[37]=e,l}function ze(n,t,e){const l=n.slice();return l[38]=t[e],l}function De(n){let t,e=n[9],l=[];for(let i=0;i<e.length;i+=1)l[i]=Fe(ze(n,e,i));return{c(){for(let i=0;i<l.length;i+=1)l[i].c();t=se()},m(i,s){for(let o=0;o<l.length;o+=1)l[o].m(i,s);E(i,t,s)},p(i,s){if(s[0]&640){e=i[9];let o;for(o=0;o<e.length;o+=1){const r=ze(i,e,o);l[o]?l[o].p(r,s):(l[o]=Fe(r),l[o].c(),l[o].m(t.parentNode,t))}for(;o<l.length;o+=1)l[o].d(1);l.length=e.length}},d(i){be(l,i),i&&L(t)}}}function Fe(n){let t;return{c(){t=d("div"),c(t,"class","absolute bg-blue-900 top-0 w-[4px] h-full max-w-full"),ne(t,"left",n[38]/n[7]*100+"%")},m(e,l){E(e,t,l)},p(e,l){l[0]&640&&ne(t,"left",e[38]/e[7]*100+"%")},d(e){e&&L(t)}}}function Oe(n){let t,e=n[10].data,l=[];for(let i=0;i<e.length;i+=1)l[i]=Re(Ne(n,e,i));return{c(){t=d("div");for(let i=0;i<l.length;i+=1)l[i].c();c(t,"class","absolute bottom-0 left-0 h-32 flex flex-nowrap overflow-x-auto bg-transparent"),ne(t,"scrollbar-color","red gray")},m(i,s){E(i,t,s);for(let o=0;o<l.length;o+=1)l[o].m(t,null);n[24](t)},p(i,s){if(s[0]&17920){e=i[10].data;let o;for(o=0;o<e.length;o+=1){const r=Ne(i,e,o);l[o]?l[o].p(r,s):(l[o]=Re(r),l[o].c(),l[o].m(t,null))}for(;o<l.length;o+=1)l[o].d(1);l.length=e.length}},d(i){i&&L(t),be(l,i),n[24](null)}}}function Re(n){let t,e,l,i;function s(){return n[23](n[37])}return{c(){t=d("img"),c(t,"class","h-full mr-2 hover:border-4 border-red-400"),le(t.src,e="data:image/jpg;base64, "+n[35])||c(t,"src",e),c(t,"alt","video frames from search query")},m(o,r){E(o,t,r),l||(i=P(t,"click",s),l=!0)},p(o,r){n=o,r[0]&1024&&!le(t.src,e="data:image/jpg;base64, "+n[35])&&c(t,"src",e)},d(o){o&&L(t),l=!1,i()}}}function kt(n){let t,e,l,i,s=n[0].video_title+"",o,r,u,f,g,_,M,v,b,m,p,C,T,h,H,A,q,y,I,j,w,R,D,B,Y,X,x,oe,S,Q,O,N=n[9]&&De(n),k=n[9]&&Oe(n);return{c(){t=d("div"),e=d("div"),l=d("div"),i=d("h3"),o=Z(s),r=V(),u=d("button"),u.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg> 
          <span class="font-light">esc</span>`,f=V(),g=d("fieldset"),_=d("div"),M=d("legend"),M.textContent="Augmented Prompts",v=V(),b=d("label"),m=d("input"),p=Z(`\r
            true`),C=V(),T=d("label"),h=d("input"),H=Z(`\r
            false`),A=V(),q=d("div"),y=d("div"),I=d("button"),I.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path></svg>',j=V(),w=d("input"),R=V(),D=d("div"),B=d("div"),Y=V(),X=d("div"),x=d("div"),oe=V(),N&&N.c(),S=V(),k&&k.c(),c(i,"class","text-2xl mx-2 mt-2"),c(u,"class","absolute top-0 right-0 hover:text-pink-500 p-2"),c(m,"type","radio"),c(m,"name","prompts"),m.__value="true",m.value=m.__value,n[19][0].push(m),c(h,"type","radio"),c(h,"name","prompts"),h.__value="false",h.value=h.__value,n[19][0].push(h),c(g,"class","flex flex-row place-content-center mt-3"),c(I,"class","hover:text-pink-500 cursor-pointer px-2"),c(w,"class","focus:outline-none"),c(w,"type","text"),c(w,"placeholder","Search query"),c(y,"class","flex border rounded-full p-2 bg-white"),c(q,"class","flex place-content-center my-5"),c(B,"class","bg-black w-full h-full"),c(x,"class","h-full bg-red-400"),ne(x,"width",(Number(n[6])/Number(n[7])*100||0)+"%"),c(X,"class","relative w-full h-[10px] hover:h-[20px] bg-red-200"),c(D,"class","relative w-full min-h-[400px] h-[40vh] break-all"),c(e,"class","relative max-w-[1080px] w-full pb-[10px] bg-gray-300"),c(t,"class","transform z-[9999] col-span-full w-full flex justify-center pb-[20px]")},m(z,G){E(z,t,G),a(t,e),a(e,l),a(l,i),a(i,o),a(l,r),a(l,u),a(e,f),a(e,g),a(g,_),a(_,M),a(_,v),a(_,b),a(b,m),m.checked=m.__value===n[5],a(b,p),a(_,C),a(_,T),a(T,h),h.checked=h.__value===n[5],a(T,H),a(e,A),a(e,q),a(q,y),a(y,I),a(y,j),a(y,w),n[21](w),a(e,R),a(e,D),a(D,B),n[22](B),a(D,Y),a(D,X),a(X,x),a(X,oe),N&&N.m(X,null),a(D,S),k&&k.m(D,null),n[25](t),Q||(O=[P(u,"click",n[2]),P(m,"change",n[18]),P(h,"change",n[20]),P(I,"click",n[1]),P(w,"keyup",n[13]),P(X,"mousedown",n[12])],Q=!0)},p(z,G){G[0]&1&&s!==(s=z[0].video_title+"")&&de(o,s),G[0]&32&&(m.checked=m.__value===z[5]),G[0]&32&&(h.checked=h.__value===z[5]),G[0]&192&&ne(x,"width",(Number(z[6])/Number(z[7])*100||0)+"%"),z[9]?N?N.p(z,G):(N=De(z),N.c(),N.m(X,null)):N&&(N.d(1),N=null),z[9]?k?k.p(z,G):(k=Oe(z),k.c(),k.m(D,null)):k&&(k.d(1),k=null)},i:F,o:F,d(z){z&&L(t),n[19][0].splice(n[19][0].indexOf(m),1),n[19][0].splice(n[19][0].indexOf(h),1),n[21](null),n[22](null),N&&N.d(),k&&k.d(),n[25](null),Q=!1,me(O)}}}let $e=!1;var et=document.createElement("script");et.src="https://www.youtube.com/player_api";var Ge=document.getElementsByTagName("script")[0];Ge.parentNode.insertBefore(et,Ge);window.onYouTubeIframeAPIReady=function(){console.log("iframe api ready!!"),$e=!0};function wt(n){const t=n.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function yt(n,t,e){let l="M7lc1UVf-VE",i,s,o=!1,r,u,f;function g(){clearInterval(f),f=setInterval(function(){e(6,r=s.getCurrentTime())},100),e(7,u=s.getDuration()),console.log("Initialized!")}ge(()=>{m(),wt(v)||v.scrollIntoView({block:"end",inline:"nearest"}),ue.set(!0),e(17,o=!0),e(16,l=_.youtube_id),console.log("youtube_id: "+_.youtube_id),console.log("modal mounted!!"),_.index_available==!1&&(b.setAttribute("disabled",""),b.setAttribute("placeholder","Gen index to query"))}),Ze(()=>{p(),e(17,o=!1),ue.set(!1)});let{f:_}=t,{show_modal:M}=t,v,b;function m(){b.focus()}function p(){e(15,M=!1),s.stopVideo()}document.addEventListener("keydown",function(S){S.key==="Escape"&&p()});function C(S,Q){const{left:O,right:N}=S.getBoundingClientRect();s.seekTo(u*(Q.clientX-O)/(N-O))}function T(S){console.log("eventfadsfs"),C(this,S)}let h;var H;let A="true";function q(S){if(!S)return;const Q=we+"queryVideo";console.log(Q),console.log("query text: ",S);let O=new FormData;O.append("video_hash",_.video_hash),O.append("query_text",S),O.append("aug_prompt",A),console.log("prompt_type: ",A),fetch(Q,{method:"POST",mode:"cors",body:O}).then(N=>N.json()).then(N=>{e(10,H=N.meta_data),e(9,h=N.meta_data.playback_pos)})}function y(S){if(S.key==="Enter"){const Q=this.value;q(Q)}}function I(S){s.pauseVideo(),s.seekTo(S)}let j;const w=[[]];function R(){A=this.__value,e(5,A),e(4,b)}function D(){A=this.__value,e(5,A),e(4,b)}function B(S){$[S?"unshift":"push"](()=>{b=S,e(4,b)})}function Y(S){$[S?"unshift":"push"](()=>{i=S,e(3,i)})}const X=S=>I(h[S]);function x(S){$[S?"unshift":"push"](()=>{j=S,e(11,j)})}function oe(S){$[S?"unshift":"push"](()=>{v=S,e(8,v)})}return n.$$set=S=>{"f"in S&&e(0,_=S.f),"show_modal"in S&&e(15,M=S.show_modal)},n.$$.update=()=>{n.$$.dirty[0]&196616&&$e&&o&&(s=new YT.Player(i,{height:"390",width:"640",videoId:l,playerVars:{origin:"localhost:5000",autoplay:1,playsinline:1,modestbranding:1,controls:0},events:{onReady:g}})),n.$$.dirty[0]&48&&b&&(e(5,A),e(4,b),q(b.value))},[_,m,p,i,b,A,r,u,v,h,H,j,T,y,I,M,l,o,R,w,D,B,Y,X,x,oe]}class It extends ce{constructor(t){super(),fe(this,t,yt,kt,re,{f:0,show_modal:15,searchInputFocus:1,closeVideoModal:2},null,[-1,-1])}get searchInputFocus(){return this.$$.ctx[1]}get closeVideoModal(){return this.$$.ctx[2]}}function We(n){let t,e,l,i,s,o,r;return{c(){t=d("div"),e=d("progress"),i=V(),s=d("span"),o=Z("ETA: "),r=Z(n[3]),c(e,"class","bg-gray-400 h-3 mt-2 w-full"),c(e,"data-hash",l=n[0].video_hash),e.value=n[2],c(e,"max","1")},m(u,f){E(u,t,f),a(t,e),a(t,i),a(t,s),a(s,o),a(s,r)},p(u,f){f&1&&l!==(l=u[0].video_hash)&&c(e,"data-hash",l),f&4&&(e.value=u[2]),f&8&&de(r,u[3])},d(u){u&&L(t)}}}function Mt(n){let t,e,l;return{c(){t=d("button"),t.innerHTML="<span>Gen Index</span>",c(t,"class","items-center focus:outline-none rounded-lg py-2 px-6 leading-none bg-blue-200 hover:bg-blue-300 disabled:bg-slate-100")},m(i,s){E(i,t,s),n[9](t),e||(l=P(t,"click",n[6]),e=!0)},p:F,d(i){i&&L(t),n[9](null),e=!1,l()}}}function Tt(n){let t;return{c(){t=d("p"),t.textContent="Already Indexed"},m(e,l){E(e,t,l)},p:F,d(e){e&&L(t)}}}function Qe(n){let t,e,l,i;const s=[Ct,St],o=[];function r(u,f){return u[0].youtube_id?0:1}return t=r(n),e=o[t]=s[t](n),{c(){e.c(),l=se()},m(u,f){o[t].m(u,f),E(u,l,f),i=!0},p(u,f){let g=t;t=r(u),t===g?o[t].p(u,f):(ve(),ee(o[g],1,1,()=>{o[g]=null}),ke(),e=o[t],e?e.p(u,f):(e=o[t]=s[t](u),e.c()),U(e,1),e.m(l.parentNode,l))},i(u){i||(U(e),i=!0)},o(u){ee(e),i=!1},d(u){o[t].d(u),u&&L(l)}}}function St(n){let t,e,l;function i(o){n[11](o)}let s={f:n[0]};return n[5]!==void 0&&(s.show_modal=n[5]),t=new vt({props:s}),$.push(()=>ye(t,"show_modal",i)),{c(){_e(t.$$.fragment)},m(o,r){pe(t,o,r),l=!0},p(o,r){const u={};r&1&&(u.f=o[0]),!e&&r&32&&(e=!0,u.show_modal=o[5],Ie(()=>e=!1)),t.$set(u)},i(o){l||(U(t.$$.fragment,o),l=!0)},o(o){ee(t.$$.fragment,o),l=!1},d(o){he(t,o)}}}function Ct(n){let t,e,l;function i(o){n[10](o)}let s={f:n[0]};return n[5]!==void 0&&(s.show_modal=n[5]),t=new It({props:s}),$.push(()=>ye(t,"show_modal",i)),{c(){_e(t.$$.fragment)},m(o,r){pe(t,o,r),l=!0},p(o,r){const u={};r&1&&(u.f=o[0]),!e&&r&32&&(e=!0,u.show_modal=o[5],Ie(()=>e=!1)),t.$set(u)},i(o){l||(U(t.$$.fragment,o),l=!0)},o(o){ee(t.$$.fragment,o),l=!1},d(o){he(t,o)}}}function Vt(n){let t,e,l,i,s=n[0].video_title+"",o,r,u,f,g,_,M,v,b,m,p,C,T,h=n[4]&&We(n);function H(I,j){return I[0].index_available===!0?Tt:Mt}let A=H(n),q=A(n),y=n[5]&&Qe(n);return{c(){t=d("div"),e=d("div"),l=d("div"),i=d("label"),o=Z(s),r=V(),u=d("button"),f=d("img"),_=V(),h&&h.c(),M=V(),v=d("div"),q.c(),b=V(),y&&y.c(),m=se(),c(i,"for",""),c(i,"class","mb-2 text-blue-500 h-auto w-full"),c(f,"class","h-auto w-full rounded-lg"),le(f.src,g="/api/videoPoster/"+n[0].video_hash+".jpg")||c(f,"src",g),c(f,"alt","videos from selected directory"),c(u,"class","h-auto w-full shadow-xl"),c(l,"class","break-all"),c(v,"class","mx-auto mt-2"),c(e,"class","flex flex-col"),c(t,"class","mb-4")},m(I,j){E(I,t,j),a(t,e),a(e,l),a(l,i),a(i,o),a(l,r),a(l,u),a(u,f),a(l,_),h&&h.m(l,null),a(e,M),a(e,v),q.m(v,null),E(I,b,j),y&&y.m(I,j),E(I,m,j),p=!0,C||(T=P(u,"click",n[7]),C=!0)},p(I,[j]){(!p||j&1)&&s!==(s=I[0].video_title+"")&&de(o,s),(!p||j&1&&!le(f.src,g="/api/videoPoster/"+I[0].video_hash+".jpg"))&&c(f,"src",g),I[4]?h?h.p(I,j):(h=We(I),h.c(),h.m(l,null)):h&&(h.d(1),h=null),A===(A=H(I))&&q?q.p(I,j):(q.d(1),q=A(I),q&&(q.c(),q.m(v,null))),I[5]?y?(y.p(I,j),j&32&&U(y,1)):(y=Qe(I),y.c(),U(y,1),y.m(m.parentNode,m)):y&&(ve(),ee(y,1,1,()=>{y=null}),ke())},i(I){p||(U(y),p=!0)},o(I){ee(y),p=!1},d(I){I&&L(t),h&&h.d(),q.d(),I&&L(b),y&&y.d(I),I&&L(m),C=!1,T()}}}function jt(n,t,e){let{f:l=""}=t,{i=-1}=t;ge(()=>{let p=sessionStorage.getItem(l.video_hash);console.log("session storage:",p),p==="indexing"&&(g(),s&&(e(1,s.disabled=!0,s),e(1,s.innerHTML="Index in progress",s)))});let s;var o="0",r="unknown",u=!1;function f(){this.disabled=!0,this.innerHTML="Index in progress",e(4,u=!0);const p=g(),C=we+"/videoIndex";let T=new FormData;T.append("video_absolute_path",l.video_absolute_path),fetch(C,{method:"POST",body:T}).then(h=>h.json()).then(h=>{e(4,u=!1),this.innerHTML="Index complete",sessionStorage.setItem(l.video_hash,"indexed"),e(0,l.index_available=!0,l),p.close()})}function g(){let p=new EventSource("/api/progress/"+l.video_hash);p.onmessage=C=>{console.log("Got some data: "+C.data);let T=C.data.split("_"),h=T[0],H=T[1];e(3,r=T[2]),l.video_hash===H&&(e(2,o=h),e(4,u=!0),sessionStorage.setItem(H,"indexing")),o=="1.0"&&(console.log("Index complete"),e(4,u=!1),s&&(e(1,s.disabled=!0,s),e(1,s.innerHTML="Index complete",s)),sessionStorage.setItem(H,"indexed"))},p.onerror=C=>{console.log("Error with event source"),p.close()}}let _=!1;function M(){_?e(5,_=!1):(e(5,_=!0),Ve.update(p=>i))}Ve.subscribe(p=>{i!=p&&e(5,_=!1)});function v(p){$[p?"unshift":"push"](()=>{s=p,e(1,s)})}function b(p){_=p,e(5,_)}function m(p){_=p,e(5,_)}return n.$$set=p=>{"f"in p&&e(0,l=p.f),"i"in p&&e(8,i=p.i)},[l,s,o,r,u,_,f,M,i,v,b,m]}class Et extends ce{constructor(t){super(),fe(this,t,jt,Vt,re,{f:0,i:8})}}function Xe(n){let t;return{c(){t=d("div"),c(t,"class","absolute right-10 z-50 h-[40vh] bg-pink-200")},m(e,l){E(e,t,l)},d(e){e&&L(t)}}}function Lt(n){let t,e,l,i,s,o,r,u,f,g,_,M,v,b,m,p,C,T,h=n[2]&&Xe();return{c(){t=d("div"),e=d("span"),l=Z("Total videos: "),i=d("strong"),s=Z(n[0]),o=V(),r=d("div"),u=d("button"),u.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path></svg>',f=V(),g=d("input"),_=V(),M=d("div"),v=d("div"),b=d("button"),b.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 011.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.107 1.204.165.397.505.71.93.78l.893.15c.543.09.94.56.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.893.149c-.425.07-.765.383-.93.78-.165.398-.143.854.107 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 01-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.397.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 01-.12-1.45l.527-.737c.25-.35.273-.806.108-1.204-.165-.397-.505-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.107-1.204l-.527-.738a1.125 1.125 0 01.12-1.45l.773-.773a1.125 1.125 0 011.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>',m=V(),h&&h.c(),p=se(),c(e,"class","text-sm"),c(u,"class","hover:text-pink-500 cursor-pointer mr-3"),c(g,"class","bg-transparent focus:outline-none"),c(g,"placeholder","Search list"),c(r,"class","flex items-center select-none hover:border-b border-black"),c(b,"class","ml-3 rounded-full p-2 focus:outline-none hover:bg-blue-300 transition duration-500"),c(v,"class","flex items-center select-none"),c(M,"class","flex items-center select-none"),c(t,"class","mt-1 mb-4 flex items-center justify-between")},m(H,A){E(H,t,A),a(t,e),a(e,l),a(e,i),a(i,s),a(t,o),a(t,r),a(r,u),a(r,f),a(r,g),n[5](g),a(t,_),a(t,M),a(M,v),a(v,b),E(H,m,A),h&&h.m(H,A),E(H,p,A),C||(T=[P(u,"click",n[4]),P(g,"keyup",n[3]),P(b,"click",n[6])],C=!0)},p(H,[A]){A&1&&de(s,H[0]),H[2]?h||(h=Xe(),h.c(),h.m(p.parentNode,p)):h&&(h.d(1),h=null)},i:F,o:F,d(H){H&&L(t),n[5](null),H&&L(m),h&&h.d(H),H&&L(p),C=!1,me(T)}}}function qt(n,t,e){let{items:l=0}=t,i,s=!1;const o=ot();function r(){o("message",{text:this.value})}const u=()=>i.focus();function f(_){$[_?"unshift":"push"](()=>{i=_,e(1,i)})}const g=()=>e(2,s=!s);return n.$$set=_=>{"items"in _&&e(0,l=_.items)},[l,i,s,r,u,f,g]}class Ht extends ce{constructor(t){super(),fe(this,t,qt,Lt,re,{items:0})}}function Ye(n,t,e){const l=n.slice();return l[13]=t[e],l[15]=e,l}function At(n){let t,e,l,i,s,o,r,u,f={ctx:n,current:null,token:null,hasCatch:!1,pending:zt,then:Nt,catch:Pt,blocks:[,,,]};return Se(r=n[2],f),{c(){t=d("p"),e=Z("Current selected directory: "),l=d("span"),i=Z(n[0]),s=V(),o=se(),f.block.c(),c(l,"class","font-bold")},m(g,_){E(g,t,_),a(t,e),a(t,l),a(l,i),E(g,s,_),E(g,o,_),f.block.m(g,f.anchor=_),f.mount=()=>o.parentNode,f.anchor=o,u=!0},p(g,_){n=g,(!u||_&1)&&de(i,n[0]),f.ctx=n,_&4&&r!==(r=n[2])&&Se(r,f)||it(f,n,_)},i(g){u||(U(f.block),u=!0)},o(g){for(let _=0;_<3;_+=1){const M=f.blocks[_];ee(M)}u=!1},d(g){g&&L(t),g&&L(s),g&&L(o),f.block.d(g),f.token=null,f=null}}}function Bt(n){let t;return{c(){t=d("p"),t.textContent="Select a directory.",c(t,"class","text-2xl")},m(e,l){E(e,t,l)},p:F,i:F,o:F,d(e){e&&L(t)}}}function Pt(n){return{c:F,m:F,p:F,i:F,o:F,d:F}}function Nt(n){let t,e=[],l=new Map,i,s=n[1];const o=r=>r[13];for(let r=0;r<s.length;r+=1){let u=Ye(n,s,r),f=o(u);l.set(f,e[r]=Je(f,u))}return{c(){t=d("div");for(let r=0;r<e.length;r+=1)e[r].c();c(t,"class","relative grid sm:grid-cols-3 2xl:grid-cols-5 min-[2400px]:grid-cols-9 gap-8 mt-6 grid-flow-row-dense")},m(r,u){E(r,t,u);for(let f=0;f<e.length;f+=1)e[f].m(t,null);i=!0},p(r,u){u&2&&(s=r[1],ve(),e=Ue(e,u,o,1,r,s,l,t,st,Je,null,Ye),ke())},i(r){if(!i){for(let u=0;u<s.length;u+=1)U(e[u]);i=!0}},o(r){for(let u=0;u<e.length;u+=1)ee(e[u]);i=!1},d(r){r&&L(t);for(let u=0;u<e.length;u+=1)e[u].d()}}}function Je(n,t){let e,l,i;return l=new Et({props:{f:t[13],i:t[15]}}),{key:n,first:null,c(){e=se(),_e(l.$$.fragment),this.first=e},m(s,o){E(s,e,o),pe(l,s,o),i=!0},p(s,o){t=s;const r={};o&2&&(r.f=t[13]),o&2&&(r.i=t[15]),l.$set(r)},i(s){i||(U(l.$$.fragment,s),i=!0)},o(s){ee(l.$$.fragment,s),i=!1},d(s){s&&L(e),he(l,s)}}}function zt(n){let t;return{c(){t=d("p"),t.textContent="Fetching data...."},m(e,l){E(e,t,l)},p:F,i:F,o:F,d(e){e&&L(t)}}}function Ke(n){let t;return{c(){t=d("div"),t.innerHTML='<div class="absolute inset-0 bg-gray-900 opacity-75"></div>',c(t,"class","fixed inset-0 transition-opacity")},m(e,l){E(e,t,l)},d(e){e&&L(t)}}}function Dt(n){let t,e,l,i,s,o,r,u,f,g,_,M,v,b,m,p,C,T,h;function H(w){n[10](w)}let A={};n[0]!==void 0&&(A.dirname=n[0]),e=new pt({props:A}),$.push(()=>ye(e,"dirname",H)),r=new Ht({props:{items:n[1].length}}),r.$on("message",n[5]);const q=[Bt,At],y=[];function I(w,R){return w[0]?1:0}v=I(n),b=y[v]=q[v](n);let j=n[3]&&Ke();return{c(){t=d("div"),_e(e.$$.fragment),i=V(),s=d("main"),o=d("div"),_e(r.$$.fragment),u=V(),f=d("input"),g=V(),_=d("button"),_.innerHTML="<span>Select video directory</span>",M=V(),b.c(),m=V(),j&&j.c(),p=se(),c(f,"type","text"),c(f,"class","bg-transparent focus:outline-none border-b border-black"),c(f,"placeholder","Provide absolute path to video directory."),c(_,"class","items-center focus:outline-none rounded-lg my-3 py-2 px-6 leading-none bg-blue-200 hover:bg-blue-300 disabled:bg-slate-100"),c(o,"class","sm:px-12 max-sm:px-4 py-12 text-gray-700"),c(s,"class","max-md:flex flex-1 bg-gray-300 overflow-y-auto"),c(t,"class","min-h-screen md:flex ")},m(w,R){E(w,t,R),pe(e,t,null),a(t,i),a(t,s),a(s,o),pe(r,o,null),a(o,u),a(o,f),Te(f,n[4]),a(o,g),a(o,_),a(o,M),y[v].m(o,null),E(w,m,R),j&&j.m(w,R),E(w,p,R),C=!0,T||(h=[P(f,"keydown",n[7]),P(f,"input",n[11]),P(_,"click",n[6])],T=!0)},p(w,[R]){const D={};!l&&R&1&&(l=!0,D.dirname=w[0],Ie(()=>l=!1)),e.$set(D);const B={};R&2&&(B.items=w[1].length),r.$set(B),R&16&&f.value!==w[4]&&Te(f,w[4]);let Y=v;v=I(w),v===Y?y[v].p(w,R):(ve(),ee(y[Y],1,1,()=>{y[Y]=null}),ke(),b=y[v],b?b.p(w,R):(b=y[v]=q[v](w),b.c()),U(b,1),b.m(o,null)),w[3]?j||(j=Ke(),j.c(),j.m(p.parentNode,p)):j&&(j.d(1),j=null)},i(w){C||(U(e.$$.fragment,w),U(r.$$.fragment,w),U(b),C=!0)},o(w){ee(e.$$.fragment,w),ee(r.$$.fragment,w),ee(b),C=!1},d(w){w&&L(t),he(e),he(r),y[v].d(),w&&L(m),j&&j.d(w),w&&L(p),T=!1,me(h)}}}function Ft(n,t,e){ge(()=>{let p=localStorage.getItem("dirname");p&&(e(0,l=p),console.log(l))}),ue.set(!1);let l="",i=[],s=[],o="",r;async function u(){const p=we+"/videos";let C=new FormData;C.append("video_directory",l);const T=await fetch(p,{method:"POST",body:C});if(T.ok){const h=await T.json();return e(8,i=h),h}else throw new Error(T)}function f(p){e(9,o=p.detail.text.toLowerCase())}var g=!1;ue.subscribe(p=>{e(3,g=p),console.log("dark bg value:",p)});let _;function M(){_&&(e(0,l=_),localStorage.setItem("dirname",l))}function v(p){p.key==="Enter"&&M()}function b(p){l=p,e(0,l)}function m(){_=this.value,e(4,_)}return n.$$.update=()=>{n.$$.dirty&768&&i&&e(1,s=i.filter(p=>p.video_title.toLowerCase().search(o)!=-1)),n.$$.dirty&1&&l&&e(2,r=u())},[l,s,r,g,_,f,M,v,i,o,b,m]}class Ot extends ce{constructor(t){super(),fe(this,t,Ft,Dt,re,{})}}new Ot({target:document.getElementById("app")});
