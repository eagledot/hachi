import{n as z,s as le,S as ue,i as ce,e as p,a as H,b as f,c as x,d as L,f as c,u as Ge,g as j,t as K,l as A,h as We,j as Je,k as se,m as fe,r as ge,o as ve,p as Ke,q as ee,v as Re,w as Xe,x as Z,y as G,z as he,A as R,B as be,C as ke,D as ie,E as re,F as we,G as ae,H as Ue,I as Me,J as Se,K as Ye,L as Ze}from"./index-ad9718b8.js";const xe="/assets/logo_name.min-1a2be51e.svg",$e="/assets/logo.min-fe8af568.svg",Te="/assets/fire-cb6a32ef.svg",te=[];function Qe(n,t=z){let e;const l=new Set;function s(i){if(le(n,i)&&(n=i,e)){const a=!te.length;for(const u of l)u[1](),te.push(u,n);if(a){for(let u=0;u<te.length;u+=2)te[u][0](te[u+1]);te.length=0}}}function r(i){s(i(n))}function o(i,a=z){const u=[i,a];return l.add(u),l.size===1&&(e=t(s)||z),i(n),()=>{l.delete(u),l.size===0&&(e(),e=null)}}return{set:s,update:r,subscribe:o}}const ye="/api/",Ce=Qe(-1),me=Qe(!1);function Le(n,t,e){const l=n.slice();return l[3]=t[e],l}function et(n){let t,e;return{c(){t=p("img"),x(t.src,e=n[3].svg)||f(t,"src",e),f(t,"alt",n[3].text),f(t,"class","w-6 h-6")},m(l,s){L(l,t,s)},p:z,d(l){l&&j(t)}}}function je(n,t){let e,l,s,r,o,i=t[3].text+"",a,u,m,_,y=t[3].svg&&et(t);return{key:n,first:null,c(){e=p("li"),l=p("button"),s=p("span"),y&&y.c(),r=H(),o=p("span"),a=K(i),u=H(),f(o,"class","pl-2"),f(s,"class","capitalize flex items-center"),f(l,"class","w-full pl-8 py-2"),f(e,"class","font-semibold text-gray-700 hover:bg-pink-200 mb-2 transition duration-500"),this.first=e},m(g,v){L(g,e,v),c(e,l),c(l,s),y&&y.m(s,null),c(s,r),c(s,o),c(o,a),c(e,u),m||(_=A(l,"click",t[3].func),m=!0)},p(g,v){t=g,t[3].svg&&y.p(t,v)},d(g){g&&j(e),y&&y.d(),m=!1,_()}}}function tt(n){let t,e,l,s,r,o,i,a,u,m,_=[],y=new Map,g=n[0];const v=b=>b[3].id;for(let b=0;b<g.length;b+=1){let d=Le(n,g,b),S=v(d);y.set(S,_[b]=je(S,d))}return{c(){t=p("nav"),e=p("div"),l=p("a"),s=p("img"),o=H(),i=p("img"),u=H(),m=p("ul");for(let b=0;b<_.length;b+=1)_[b].c();f(s,"class","h-20 w-40 m-4 md:mt-10"),x(s.src,r=$e)||f(s,"src",r),f(s,"alt","ramanlabs.in logo"),f(i,"class","h-8 w-40 m-4"),x(i.src,a=xe)||f(i,"src",a),f(i,"alt","ramanlabs.in logo"),f(l,"class","flex md:flex-col items-center"),f(l,"href","https:ramanlabs.in"),f(m,"class",""),f(t,"class","md:w-56 max-md:flex max-md:flex-col bg-gray-100 md:overflow-y-auto py-4")},m(b,d){L(b,t,d),c(t,e),c(e,l),c(l,s),c(l,o),c(l,i),c(t,u),c(t,m);for(let S=0;S<_.length;S+=1)_[S].m(m,null)},p(b,[d]){d&1&&(g=b[0],_=Ge(_,d,v,1,b,g,y,m,We,je,null,Le))},i:z,o:z,d(b){b&&j(t);for(let d=0;d<_.length;d+=1)_[d].d()}}}function lt(){window.location.href="/video_search.html"}function nt(){window.location.href="/search.html"}function ot(n,t,e){let{dirname:l=""}=t;const s=[{id:2,func:lt,text:"Video Search",svg:Te},{id:3,func:nt,text:"Image Search",svg:Te}];return n.$$set=r=>{"dirname"in r&&e(1,l=r.dirname)},[s,l]}class st extends ue{constructor(t){super(),ce(this,t,ot,tt,le,{dirname:1})}}function He(n,t,e){const l=n.slice();return l[35]=t[e],l[37]=e,l}function Ee(n,t,e){const l=n.slice();return l[38]=t[e],l}function qe(n){let t,e=n[10],l=[];for(let s=0;s<e.length;s+=1)l[s]=Ve(Ee(n,e,s));return{c(){for(let s=0;s<l.length;s+=1)l[s].c();t=ee()},m(s,r){for(let o=0;o<l.length;o+=1)l[o].m(s,r);L(s,t,r)},p(s,r){if(r[0]&1536){e=s[10];let o;for(o=0;o<e.length;o+=1){const i=Ee(s,e,o);l[o]?l[o].p(i,r):(l[o]=Ve(i),l[o].c(),l[o].m(t.parentNode,t))}for(;o<l.length;o+=1)l[o].d(1);l.length=e.length}},d(s){Re(l,s),s&&j(t)}}}function Ve(n){let t;return{c(){t=p("div"),f(t,"class","absolute bg-blue-900 top-0 w-[4px] h-full max-w-full"),se(t,"left",n[38]/n[9]*100+"%")},m(e,l){L(e,t,l)},p(e,l){l[0]&1536&&se(t,"left",e[38]/e[9]*100+"%")},d(e){e&&j(t)}}}function Ae(n){let t,e=n[11].data,l=[];for(let s=0;s<e.length;s+=1)l[s]=ze(He(n,e,s));return{c(){t=p("div");for(let s=0;s<l.length;s+=1)l[s].c();f(t,"class","absolute bottom-0 left-0 h-32 flex flex-nowrap overflow-x-auto bg-transparent"),se(t,"scrollbar-color","red gray")},m(s,r){L(s,t,r);for(let o=0;o<l.length;o+=1)l[o].m(t,null);n[31](t)},p(s,r){if(r[0]&68608){e=s[11].data;let o;for(o=0;o<e.length;o+=1){const i=He(s,e,o);l[o]?l[o].p(i,r):(l[o]=ze(i),l[o].c(),l[o].m(t,null))}for(;o<l.length;o+=1)l[o].d(1);l.length=e.length}},d(s){s&&j(t),Re(l,s),n[31](null)}}}function ze(n){let t,e,l,s;function r(){return n[30](n[37])}return{c(){t=p("img"),f(t,"class","h-full mr-2 hover:border-4 border-red-400"),x(t.src,e="data:image/jpg;base64, "+n[35])||f(t,"src",e),f(t,"alt","video frames from search query")},m(o,i){L(o,t,i),l||(s=A(t,"click",r),l=!0)},p(o,i){n=o,i[0]&2048&&!x(t.src,e="data:image/jpg;base64, "+n[35])&&f(t,"src",e)},d(o){o&&j(t),l=!1,s()}}}function it(n){let t,e,l,s,r=n[0].video_title+"",o,i,a,u,m,_,y,g,v,b,d,S,T,h,E,B,q,I,M,C,k,P,F,V,U,de,ne=!1,_e,oe=!0,pe,Q,$,w,W,J,Y;function Ie(){cancelAnimationFrame(_e),V.paused||(_e=Xe(Ie),ne=!0),n[25].call(V)}let N=n[10]&&qe(n),O=n[10]&&Ae(n);return{c(){t=p("div"),e=p("div"),l=p("div"),s=p("h3"),o=K(r),i=H(),a=p("button"),a.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg> 
        <span class="font-light">esc</span>`,u=H(),m=p("fieldset"),_=p("div"),y=p("legend"),y.textContent="Augmented Prompts",g=H(),v=p("label"),b=p("input"),d=K(`\r
          true`),S=H(),T=p("label"),h=p("input"),E=K(`\r
          false`),B=H(),q=p("div"),I=p("div"),M=p("button"),M.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path></svg>',C=H(),k=p("input"),P=H(),F=p("div"),V=p("video"),U=p("track"),pe=H(),Q=p("div"),$=p("div"),w=H(),N&&N.c(),W=H(),O&&O.c(),f(s,"class","text-2xl mx-2 mt-2"),f(a,"class","absolute top-0 right-0 hover:text-pink-500 p-2"),f(b,"type","radio"),f(b,"name","prompts"),b.__value="true",b.value=b.__value,n[21][0].push(b),f(h,"type","radio"),f(h,"name","prompts"),h.__value="false",h.value=h.__value,n[21][0].push(h),f(m,"class","flex flex-row place-content-center mt-3"),f(M,"class","hover:text-pink-500 cursor-pointer px-2"),f(k,"class","focus:outline-none"),f(k,"type","text"),f(k,"placeholder","Search query"),f(I,"class","flex border rounded-full p-2 bg-white"),f(q,"class","flex place-content-center my-5"),f(U,"kind","captions"),f(V,"class","bg-black w-full h-full"),x(V.src,de=n[18]+"#t="+rt)||f(V,"src",de),V.autoplay=!0,n[9]===void 0&&Je(()=>n[27].call(V)),f($,"class","h-full bg-red-400"),se($,"width",(n[7]/n[9]*100||0)+"%"),f(Q,"class","relative w-full h-[10px] hover:h-[20px] bg-red-200"),f(F,"class","relative w-full min-h-[400px] h-[40vh] break-all"),f(e,"class","relative max-w-[1080px] w-full pb-[10px] bg-gray-300"),f(t,"class","transform z-[9999] col-span-full w-full flex justify-center pb-[20px]")},m(D,X){L(D,t,X),c(t,e),c(e,l),c(l,s),c(s,o),c(l,i),c(l,a),c(e,u),c(e,m),c(m,_),c(_,y),c(_,g),c(_,v),c(v,b),b.checked=b.__value===n[4],c(v,d),c(_,S),c(_,T),c(T,h),h.checked=h.__value===n[4],c(T,E),c(e,B),c(e,q),c(q,I),c(I,M),c(I,C),c(I,k),n[23](k),c(e,P),c(e,F),c(F,V),c(V,U),n[24](V),c(F,pe),c(F,Q),c(Q,$),c(Q,w),N&&N.m(Q,null),c(F,W),O&&O.m(F,null),n[32](t),J||(Y=[A(a,"click",n[2]),A(b,"change",n[20]),A(h,"change",n[22]),A(M,"click",n[1]),A(k,"keyup",n[15]),A(V,"timeupdate",Ie),A(V,"play",n[26]),A(V,"pause",n[26]),A(V,"durationchange",n[27]),A(V,"click",n[28]),A(V,"click",n[29]),A(V,"mousemove",n[13]),A(Q,"mousemove",n[17]),A(Q,"mousemove",n[13]),A(Q,"mousedown",n[14])],J=!0)},p(D,X){X[0]&1&&r!==(r=D[0].video_title+"")&&fe(o,r),X[0]&16&&(b.checked=b.__value===D[4]),X[0]&16&&(h.checked=h.__value===D[4]),!ne&&X[0]&128&&!isNaN(D[7])&&(V.currentTime=D[7]),ne=!1,X[0]&256&&oe!==(oe=D[8])&&V[oe?"pause":"play"](),X[0]&640&&se($,"width",(D[7]/D[9]*100||0)+"%"),D[10]?N?N.p(D,X):(N=qe(D),N.c(),N.m(Q,null)):N&&(N.d(1),N=null),D[10]?O?O.p(D,X):(O=Ae(D),O.c(),O.m(F,null)):O&&(O.d(1),O=null)},i:z,o:z,d(D){D&&j(t),n[21][0].splice(n[21][0].indexOf(b),1),n[21][0].splice(n[21][0].indexOf(h),1),n[23](null),n[24](null),N&&N.d(),O&&O.d(),n[32](null),J=!1,ge(Y)}}}const rt=0;function at(n){const t=n.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function ut(n,t,e){ve(()=>{_(),at(o)||o.scrollIntoView({block:"end",inline:"nearest"}),me.set(!0),l.index_available==!1&&(i.setAttribute("disabled",""),i.setAttribute("placeholder","Gen index to query"))}),Ke(()=>{y(),me.set(!1)});let{f:l}=t,{show_modal:s}=t,r,o,i,a,u,m;u=!0;function _(){i.focus()}function y(){r.pause(),r.removeAttribute("src"),r.load(),e(19,s=!1)}document.addEventListener("keydown",function(w){w.key==="Escape"&&y()});function g(w,W){if(!m||W.buttons!=1)return;const{left:J,right:Y}=w.getBoundingClientRect();e(5,r.currentTime=m*(W.clientX-J)/(Y-J),r)}function v(w){g(this,w)}function b(w){g(this,w)}let d;var S;let T="true";function h(w){if(!w)return;const W=ye+"queryVideo";console.log(W),console.log("query text: ",w);let J=new FormData;J.append("video_hash",l.video_hash),J.append("query_text",w),J.append("aug_prompt",T),console.log("prompt_type: ",T),fetch(W,{method:"POST",mode:"cors",body:J}).then(Y=>Y.json()).then(Y=>{e(11,S=Y.meta_data),e(10,d=Y.meta_data.playback_pos)})}function E(w){if(w.key==="Enter"){const W=this.value;h(W)}}function B(w){r.pause(),e(5,r.currentTime=w,r)}let q;function I(){e(12,q.style.display="flex",q)}let M="video/"+l.video_title+"?video_directory="+l.video_directory;const C=[[]];function k(){T=this.__value,e(4,T),e(3,i)}function P(){T=this.__value,e(4,T),e(3,i)}function F(w){Z[w?"unshift":"push"](()=>{i=w,e(3,i)})}function V(w){Z[w?"unshift":"push"](()=>{r=w,e(5,r)})}function U(){a=this.currentTime,e(7,a)}function de(){u=this.paused,e(8,u)}function ne(){m=this.duration,e(9,m)}const _e=()=>e(8,u=!u),oe=()=>e(12,q.style.display="none",q),pe=w=>B(d[w]);function Q(w){Z[w?"unshift":"push"](()=>{q=w,e(12,q)})}function $(w){Z[w?"unshift":"push"](()=>{o=w,e(6,o)})}return n.$$set=w=>{"f"in w&&e(0,l=w.f),"show_modal"in w&&e(19,s=w.show_modal)},n.$$.update=()=>{n.$$.dirty[0]&24&&i&&(e(4,T),e(3,i),h(i.value))},[l,_,y,i,T,r,o,a,u,m,d,S,q,v,b,E,B,I,M,s,k,C,P,F,V,U,de,ne,_e,oe,pe,Q,$]}class ct extends ue{constructor(t){super(),ce(this,t,ut,it,le,{f:0,show_modal:19,searchInputFocus:1,closeVideoModal:2},null,[-1,-1])}get searchInputFocus(){return this.$$.ctx[1]}get closeVideoModal(){return this.$$.ctx[2]}}function Be(n){let t,e,l,s,r,o,i;return{c(){t=p("div"),e=p("progress"),s=H(),r=p("span"),o=K("ETA: "),i=K(n[3]),f(e,"class","bg-gray-400 h-3 mt-2 w-full"),f(e,"data-hash",l=n[0].video_hash),e.value=n[2],f(e,"max","1")},m(a,u){L(a,t,u),c(t,e),c(t,s),c(t,r),c(r,o),c(r,i)},p(a,u){u&1&&l!==(l=a[0].video_hash)&&f(e,"data-hash",l),u&4&&(e.value=a[2]),u&8&&fe(i,a[3])},d(a){a&&j(t)}}}function ft(n){let t,e,l;return{c(){t=p("button"),t.innerHTML="<span>Gen Index</span>",f(t,"class","items-center focus:outline-none rounded-lg py-2 px-6 leading-none bg-blue-200 hover:bg-blue-300 disabled:bg-slate-100")},m(s,r){L(s,t,r),n[9](t),e||(l=A(t,"click",n[6]),e=!0)},p:z,d(s){s&&j(t),n[9](null),e=!1,l()}}}function dt(n){let t;return{c(){t=p("p"),t.textContent="Already Indexed"},m(e,l){L(e,t,l)},p:z,d(e){e&&j(t)}}}function De(n){let t,e,l,s;const r=[pt,_t],o=[];function i(a,u){return a[0].youtube_id?0:1}return t=i(n),e=o[t]=r[t](n),{c(){e.c(),l=ee()},m(a,u){o[t].m(a,u),L(a,l,u),s=!0},p(a,u){let m=t;t=i(a),t===m?o[t].p(a,u):(he(),R(o[m],1,1,()=>{o[m]=null}),be(),e=o[t],e?e.p(a,u):(e=o[t]=r[t](a),e.c()),G(e,1),e.m(l.parentNode,l))},i(a){s||(G(e),s=!0)},o(a){R(e),s=!1},d(a){o[t].d(a),a&&j(l)}}}function _t(n){let t,e,l;function s(o){n[11](o)}let r={f:n[0]};return n[5]!==void 0&&(r.show_modal=n[5]),t=new ct({props:r}),Z.push(()=>ke(t,"show_modal",s)),{c(){ie(t.$$.fragment)},m(o,i){re(t,o,i),l=!0},p(o,i){const a={};i&1&&(a.f=o[0]),!e&&i&32&&(e=!0,a.show_modal=o[5],we(()=>e=!1)),t.$set(a)},i(o){l||(G(t.$$.fragment,o),l=!0)},o(o){R(t.$$.fragment,o),l=!1},d(o){ae(t,o)}}}function pt(n){let t,e,l;function s(o){n[10](o)}let r={f:n[0]};return n[5]!==void 0&&(r.show_modal=n[5]),t=new Video_youtube({props:r}),Z.push(()=>ke(t,"show_modal",s)),{c(){ie(t.$$.fragment)},m(o,i){re(t,o,i),l=!0},p(o,i){const a={};i&1&&(a.f=o[0]),!e&&i&32&&(e=!0,a.show_modal=o[5],we(()=>e=!1)),t.$set(a)},i(o){l||(G(t.$$.fragment,o),l=!0)},o(o){R(t.$$.fragment,o),l=!1},d(o){ae(t,o)}}}function mt(n){let t,e,l,s,r=n[0].video_title+"",o,i,a,u,m,_,y,g,v,b,d,S,T,h=n[4]&&Be(n);function E(M,C){return M[0].index_available===!0?dt:ft}let B=E(n),q=B(n),I=n[5]&&De(n);return{c(){t=p("div"),e=p("div"),l=p("div"),s=p("label"),o=K(r),i=H(),a=p("button"),u=p("img"),_=H(),h&&h.c(),y=H(),g=p("div"),q.c(),v=H(),I&&I.c(),b=ee(),f(s,"for",""),f(s,"class","mb-2 text-blue-500 h-auto w-full"),f(u,"class","h-auto w-full rounded-lg"),x(u.src,m="/api/videoPoster/"+n[0].video_hash+".jpg")||f(u,"src",m),f(u,"alt","videos from selected directory"),f(a,"class","h-auto w-full shadow-xl"),f(l,"class","break-all"),f(g,"class","mx-auto mt-2"),f(e,"class","flex flex-col"),f(t,"class","mb-4")},m(M,C){L(M,t,C),c(t,e),c(e,l),c(l,s),c(s,o),c(l,i),c(l,a),c(a,u),c(l,_),h&&h.m(l,null),c(e,y),c(e,g),q.m(g,null),L(M,v,C),I&&I.m(M,C),L(M,b,C),d=!0,S||(T=A(a,"click",n[7]),S=!0)},p(M,[C]){(!d||C&1)&&r!==(r=M[0].video_title+"")&&fe(o,r),(!d||C&1&&!x(u.src,m="/api/videoPoster/"+M[0].video_hash+".jpg"))&&f(u,"src",m),M[4]?h?h.p(M,C):(h=Be(M),h.c(),h.m(l,null)):h&&(h.d(1),h=null),B===(B=E(M))&&q?q.p(M,C):(q.d(1),q=B(M),q&&(q.c(),q.m(g,null))),M[5]?I?(I.p(M,C),C&32&&G(I,1)):(I=De(M),I.c(),G(I,1),I.m(b.parentNode,b)):I&&(he(),R(I,1,1,()=>{I=null}),be())},i(M){d||(G(I),d=!0)},o(M){R(I),d=!1},d(M){M&&j(t),h&&h.d(),q.d(),M&&j(v),I&&I.d(M),M&&j(b),S=!1,T()}}}function ht(n,t,e){let{f:l=""}=t,{i:s=-1}=t;ve(()=>{let d=sessionStorage.getItem(l.video_hash);console.log("session storage:",d),d==="indexing"&&(m(),r&&(e(1,r.disabled=!0,r),e(1,r.innerHTML="Index in progress",r)))});let r;var o="0",i="unknown",a=!1;function u(){this.disabled=!0,this.innerHTML="Index in progress",e(4,a=!0);const d=m(),S=ye+"/videoIndex";let T=new FormData;T.append("video_absolute_path",l.video_absolute_path),fetch(S,{method:"POST",body:T}).then(h=>h.json()).then(h=>{e(4,a=!1),this.innerHTML="Index complete",sessionStorage.setItem(l.video_hash,"indexed"),e(0,l.index_available=!0,l),d.close()})}function m(){let d=new EventSource("/api/progress/"+l.video_hash);d.onmessage=S=>{console.log("Got some data: "+S.data);let T=S.data.split("_"),h=T[0],E=T[1];e(3,i=T[2]),l.video_hash===E&&(e(2,o=h),e(4,a=!0),sessionStorage.setItem(E,"indexing")),o=="1.0"&&(console.log("Index complete"),e(4,a=!1),r&&(e(1,r.disabled=!0,r),e(1,r.innerHTML="Index complete",r)),sessionStorage.setItem(E,"indexed"))},d.onerror=S=>{console.log("Error with event source"),d.close()}}let _=!1;function y(){_?e(5,_=!1):(e(5,_=!0),Ce.update(d=>s))}Ce.subscribe(d=>{s!=d&&e(5,_=!1)});function g(d){Z[d?"unshift":"push"](()=>{r=d,e(1,r)})}function v(d){_=d,e(5,_)}function b(d){_=d,e(5,_)}return n.$$set=d=>{"f"in d&&e(0,l=d.f),"i"in d&&e(8,s=d.i)},[l,r,o,i,a,_,u,y,s,g,v,b]}class bt extends ue{constructor(t){super(),ce(this,t,ht,mt,le,{f:0,i:8})}}function Pe(n){let t;return{c(){t=p("div"),f(t,"class","absolute right-10 z-50 h-[40vh] bg-pink-200")},m(e,l){L(e,t,l)},d(e){e&&j(t)}}}function gt(n){let t,e,l,s,r,o,i,a,u,m,_,y,g,v,b,d,S,T,h=n[2]&&Pe();return{c(){t=p("div"),e=p("span"),l=K("Total videos: "),s=p("strong"),r=K(n[0]),o=H(),i=p("div"),a=p("button"),a.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path></svg>',u=H(),m=p("input"),_=H(),y=p("div"),g=p("div"),v=p("button"),v.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 011.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.107 1.204.165.397.505.71.93.78l.893.15c.543.09.94.56.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.893.149c-.425.07-.765.383-.93.78-.165.398-.143.854.107 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 01-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.397.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 01-.12-1.45l.527-.737c.25-.35.273-.806.108-1.204-.165-.397-.505-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.107-1.204l-.527-.738a1.125 1.125 0 01.12-1.45l.773-.773a1.125 1.125 0 011.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>',b=H(),h&&h.c(),d=ee(),f(e,"class","text-sm"),f(a,"class","hover:text-pink-500 cursor-pointer mr-3"),f(m,"class","bg-transparent focus:outline-none"),f(m,"placeholder","Search list"),f(i,"class","flex items-center select-none hover:border-b border-black"),f(v,"class","ml-3 rounded-full p-2 focus:outline-none hover:bg-blue-300 transition duration-500"),f(g,"class","flex items-center select-none"),f(y,"class","flex items-center select-none"),f(t,"class","mt-1 mb-4 flex items-center justify-between")},m(E,B){L(E,t,B),c(t,e),c(e,l),c(e,s),c(s,r),c(t,o),c(t,i),c(i,a),c(i,u),c(i,m),n[5](m),c(t,_),c(t,y),c(y,g),c(g,v),L(E,b,B),h&&h.m(E,B),L(E,d,B),S||(T=[A(a,"click",n[4]),A(m,"keyup",n[3]),A(v,"click",n[6])],S=!0)},p(E,[B]){B&1&&fe(r,E[0]),E[2]?h||(h=Pe(),h.c(),h.m(d.parentNode,d)):h&&(h.d(1),h=null)},i:z,o:z,d(E){E&&j(t),n[5](null),E&&j(b),h&&h.d(E),E&&j(d),S=!1,ge(T)}}}function vt(n,t,e){let{items:l=0}=t,s,r=!1;const o=Ue();function i(){o("message",{text:this.value})}const a=()=>s.focus();function u(_){Z[_?"unshift":"push"](()=>{s=_,e(1,s)})}const m=()=>e(2,r=!r);return n.$$set=_=>{"items"in _&&e(0,l=_.items)},[l,s,r,i,a,u,m]}class kt extends ue{constructor(t){super(),ce(this,t,vt,gt,le,{items:0})}}function Fe(n,t,e){const l=n.slice();return l[13]=t[e],l[15]=e,l}function wt(n){let t,e,l,s,r,o,i,a,u={ctx:n,current:null,token:null,hasCatch:!1,pending:St,then:Mt,catch:It,blocks:[,,,]};return Se(i=n[2],u),{c(){t=p("p"),e=K("Current selected directory: "),l=p("span"),s=K(n[0]),r=H(),o=ee(),u.block.c(),f(l,"class","font-bold")},m(m,_){L(m,t,_),c(t,e),c(t,l),c(l,s),L(m,r,_),L(m,o,_),u.block.m(m,u.anchor=_),u.mount=()=>o.parentNode,u.anchor=o,a=!0},p(m,_){n=m,(!a||_&1)&&fe(s,n[0]),u.ctx=n,_&4&&i!==(i=n[2])&&Se(i,u)||Ye(u,n,_)},i(m){a||(G(u.block),a=!0)},o(m){for(let _=0;_<3;_+=1){const y=u.blocks[_];R(y)}a=!1},d(m){m&&j(t),m&&j(r),m&&j(o),u.block.d(m),u.token=null,u=null}}}function yt(n){let t;return{c(){t=p("p"),t.textContent="Select a directory.",f(t,"class","text-2xl")},m(e,l){L(e,t,l)},p:z,i:z,o:z,d(e){e&&j(t)}}}function It(n){return{c:z,m:z,p:z,i:z,o:z,d:z}}function Mt(n){let t,e=[],l=new Map,s,r=n[1];const o=i=>i[13];for(let i=0;i<r.length;i+=1){let a=Fe(n,r,i),u=o(a);l.set(u,e[i]=Ne(u,a))}return{c(){t=p("div");for(let i=0;i<e.length;i+=1)e[i].c();f(t,"class","relative grid sm:grid-cols-3 2xl:grid-cols-5 min-[2400px]:grid-cols-9 gap-8 mt-6 grid-flow-row-dense")},m(i,a){L(i,t,a);for(let u=0;u<e.length;u+=1)e[u].m(t,null);s=!0},p(i,a){a&2&&(r=i[1],he(),e=Ge(e,a,o,1,i,r,l,t,Ze,Ne,null,Fe),be())},i(i){if(!s){for(let a=0;a<r.length;a+=1)G(e[a]);s=!0}},o(i){for(let a=0;a<e.length;a+=1)R(e[a]);s=!1},d(i){i&&j(t);for(let a=0;a<e.length;a+=1)e[a].d()}}}function Ne(n,t){let e,l,s;return l=new bt({props:{f:t[13],i:t[15]}}),{key:n,first:null,c(){e=ee(),ie(l.$$.fragment),this.first=e},m(r,o){L(r,e,o),re(l,r,o),s=!0},p(r,o){t=r;const i={};o&2&&(i.f=t[13]),o&2&&(i.i=t[15]),l.$set(i)},i(r){s||(G(l.$$.fragment,r),s=!0)},o(r){R(l.$$.fragment,r),s=!1},d(r){r&&j(e),ae(l,r)}}}function St(n){let t;return{c(){t=p("p"),t.textContent="Fetching data...."},m(e,l){L(e,t,l)},p:z,i:z,o:z,d(e){e&&j(t)}}}function Oe(n){let t;return{c(){t=p("div"),t.innerHTML='<div class="absolute inset-0 bg-gray-900 opacity-75"></div>',f(t,"class","fixed inset-0 transition-opacity")},m(e,l){L(e,t,l)},d(e){e&&j(t)}}}function Tt(n){let t,e,l,s,r,o,i,a,u,m,_,y,g,v,b,d,S,T,h;function E(k){n[10](k)}let B={};n[0]!==void 0&&(B.dirname=n[0]),e=new st({props:B}),Z.push(()=>ke(e,"dirname",E)),i=new kt({props:{items:n[1].length}}),i.$on("message",n[5]);const q=[yt,wt],I=[];function M(k,P){return k[0]?1:0}g=M(n),v=I[g]=q[g](n);let C=n[3]&&Oe();return{c(){t=p("div"),ie(e.$$.fragment),s=H(),r=p("main"),o=p("div"),ie(i.$$.fragment),a=H(),u=p("input"),m=H(),_=p("button"),_.innerHTML="<span>Select video directory</span>",y=H(),v.c(),b=H(),C&&C.c(),d=ee(),f(u,"type","text"),f(u,"class","bg-transparent focus:outline-none border-b border-black"),f(u,"placeholder","Provide absolute path to video directory."),f(_,"class","items-center focus:outline-none rounded-lg my-3 py-2 px-6 leading-none bg-blue-200 hover:bg-blue-300 disabled:bg-slate-100"),f(o,"class","sm:px-12 max-sm:px-4 py-12 text-gray-700"),f(r,"class","max-md:flex flex-1 bg-gray-300 overflow-y-auto"),f(t,"class","min-h-screen md:flex ")},m(k,P){L(k,t,P),re(e,t,null),c(t,s),c(t,r),c(r,o),re(i,o,null),c(o,a),c(o,u),Me(u,n[4]),c(o,m),c(o,_),c(o,y),I[g].m(o,null),L(k,b,P),C&&C.m(k,P),L(k,d,P),S=!0,T||(h=[A(u,"keydown",n[7]),A(u,"input",n[11]),A(_,"click",n[6])],T=!0)},p(k,[P]){const F={};!l&&P&1&&(l=!0,F.dirname=k[0],we(()=>l=!1)),e.$set(F);const V={};P&2&&(V.items=k[1].length),i.$set(V),P&16&&u.value!==k[4]&&Me(u,k[4]);let U=g;g=M(k),g===U?I[g].p(k,P):(he(),R(I[U],1,1,()=>{I[U]=null}),be(),v=I[g],v?v.p(k,P):(v=I[g]=q[g](k),v.c()),G(v,1),v.m(o,null)),k[3]?C||(C=Oe(),C.c(),C.m(d.parentNode,d)):C&&(C.d(1),C=null)},i(k){S||(G(e.$$.fragment,k),G(i.$$.fragment,k),G(v),S=!0)},o(k){R(e.$$.fragment,k),R(i.$$.fragment,k),R(v),S=!1},d(k){k&&j(t),ae(e),ae(i),I[g].d(),k&&j(b),C&&C.d(k),k&&j(d),T=!1,ge(h)}}}function Ct(n,t,e){ve(()=>{let d=localStorage.getItem("dirname");d&&(e(0,l=d),console.log(l))}),me.set(!1);let l="",s=[],r=[],o="",i;async function a(){const d=ye+"/videos";let S=new FormData;S.append("video_directory",l);const T=await fetch(d,{method:"POST",body:S});if(T.ok){const h=await T.json();return e(8,s=h),h}else throw new Error(T)}function u(d){e(9,o=d.detail.text.toLowerCase())}var m=!1;me.subscribe(d=>{e(3,m=d),console.log("dark bg value:",d)});let _;function y(){_&&(e(0,l=_),localStorage.setItem("dirname",l))}function g(d){d.key==="Enter"&&y()}function v(d){l=d,e(0,l)}function b(){_=this.value,e(4,_)}return n.$$.update=()=>{n.$$.dirty&768&&s&&e(1,r=s.filter(d=>d.video_title.toLowerCase().search(o)!=-1)),n.$$.dirty&1&&l&&e(2,i=a())},[l,r,i,m,_,u,y,g,s,o,v,b]}class Lt extends ue{constructor(t){super(),ce(this,t,Ct,Tt,le,{})}}new Lt({target:document.getElementById("app")});
