import{n as A,s as te,S as ce,i as ue,e as p,a as j,b as c,c as Z,d as x,f as a,u as Fe,g as H,t as J,l as q,h as Qe,j as We,k as oe,m as fe,r as me,o as ge,p as Je,q as le,v as Ne,w as Ke,x as Y,y as G,z as be,A as W,B as ke,C as Oe,D as ie,E as re,F as Ge,G as ae,H as Xe,I as Ue,J as ye,K as Me,L as Ye,M as Ze}from"./DarkMode-75e4b314.js";const $e="/assets/logo_name.min-1a2be51e.svg",et="/assets/logo.min-fe8af568.svg",Ie="/assets/fire-cb6a32ef.svg",ee=[];function Re(n,t=A){let e;const l=new Set;function s(r){if(te(n,r)&&(n=r,e)){const f=!ee.length;for(const u of l)u[1](),ee.push(u,n);if(f){for(let u=0;u<ee.length;u+=2)ee[u][0](ee[u+1]);ee.length=0}}}function i(r){s(r(n))}function o(r,f=A){const u=[r,f];return l.add(u),l.size===1&&(e=t(s)||A),r(n),()=>{l.delete(u),l.size===0&&(e(),e=null)}}return{set:s,update:i,subscribe:o}}const ve="/api/",Se=Re(-1),he=Re(!1);function Te(n,t,e){const l=n.slice();return l[3]=t[e],l}function tt(n){let t,e;return{c(){t=p("img"),Z(t.src,e=n[3].svg)||c(t,"src",e),c(t,"alt",n[3].text),c(t,"class","dark:text-white w-6 h-6")},m(l,s){x(l,t,s)},p:A,d(l){l&&H(t)}}}function Ce(n,t){let e,l,s,i,o,r=t[3].text+"",f,u,m,_,M=t[3].svg&&tt(t);return{key:n,first:null,c(){e=p("li"),l=p("button"),s=p("span"),M&&M.c(),i=j(),o=p("span"),f=J(r),u=j(),c(o,"class","pl-2"),c(s,"class","capitalize flex items-center"),c(l,"class","w-full pl-8 py-2"),c(e,"class","font-semibold text-gray-700 dark:text-white hover:bg-pink-200 hover:dark:text-gray-700 mb-2 transition duration-500"),this.first=e},m(k,S){x(k,e,S),a(e,l),a(l,s),M&&M.m(s,null),a(s,i),a(s,o),a(o,f),a(e,u),m||(_=q(l,"click",t[3].func),m=!0)},p(k,S){t=k,t[3].svg&&M.p(t,S)},d(k){k&&H(e),M&&M.d(),m=!1,_()}}}function lt(n){let t,e,l,s,i,o,r,f,u,m,_=[],M=new Map,k=n[0];const S=d=>d[3].id;for(let d=0;d<k.length;d+=1){let h=Te(n,k,d),T=S(h);M.set(T,_[d]=Ce(T,h))}return{c(){t=p("nav"),e=p("div"),l=p("a"),s=p("img"),o=j(),r=p("img"),u=j(),m=p("ul");for(let d=0;d<_.length;d+=1)_[d].c();c(s,"class","h-20 w-40 m-4 md:mt-10"),Z(s.src,i=et)||c(s,"src",i),c(s,"alt","ramanlabs.in logo"),c(r,"class","h-8 w-40 m-4"),Z(r.src,f=$e)||c(r,"src",f),c(r,"alt","ramanlabs.in logo"),c(l,"class","flex md:flex-col items-center"),c(l,"href","https:ramanlabs.in"),c(m,"class",""),c(t,"class","md:w-56 max-md:flex max-md:flex-col bg-gray-100 dark:bg-gray-500 md:overflow-y-auto py-4")},m(d,h){x(d,t,h),a(t,e),a(e,l),a(l,s),a(l,o),a(l,r),a(t,u),a(t,m);for(let T=0;T<_.length;T+=1)_[T].m(m,null)},p(d,[h]){h&1&&(k=d[0],_=Fe(_,h,S,1,d,k,M,m,Qe,Ce,null,Te))},i:A,o:A,d(d){d&&H(t);for(let h=0;h<_.length;h+=1)_[h].d()}}}function nt(){window.location.href="/video_search.html"}function st(){window.location.href="/search.html"}function ot(n,t,e){let{dirname:l=""}=t;const s=[{id:2,func:nt,text:"Video Search",svg:Ie},{id:3,func:st,text:"Image Search",svg:Ie}];return n.$$set=i=>{"dirname"in i&&e(1,l=i.dirname)},[s,l]}class it extends ce{constructor(t){super(),ue(this,t,ot,lt,te,{dirname:1})}}function Le(n,t,e){const l=n.slice();return l[35]=t[e],l[37]=e,l}function je(n,t,e){const l=n.slice();return l[38]=t[e],l}function xe(n){let t,e=n[10],l=[];for(let s=0;s<e.length;s+=1)l[s]=He(je(n,e,s));return{c(){for(let s=0;s<l.length;s+=1)l[s].c();t=le()},m(s,i){for(let o=0;o<l.length;o+=1)l[o].m(s,i);x(s,t,i)},p(s,i){if(i[0]&1536){e=s[10];let o;for(o=0;o<e.length;o+=1){const r=je(s,e,o);l[o]?l[o].p(r,i):(l[o]=He(r),l[o].c(),l[o].m(t.parentNode,t))}for(;o<l.length;o+=1)l[o].d(1);l.length=e.length}},d(s){Ne(l,s),s&&H(t)}}}function He(n){let t;return{c(){t=p("div"),c(t,"class","absolute bg-blue-900 top-0 w-[4px] h-full max-w-full"),oe(t,"left",n[38]/n[9]*100+"%")},m(e,l){x(e,t,l)},p(e,l){l[0]&1536&&oe(t,"left",e[38]/e[9]*100+"%")},d(e){e&&H(t)}}}function Ee(n){let t,e=n[11].data,l=[];for(let s=0;s<e.length;s+=1)l[s]=qe(Le(n,e,s));return{c(){t=p("div");for(let s=0;s<l.length;s+=1)l[s].c();c(t,"class","absolute bottom-0 left-0 h-32 flex flex-nowrap overflow-x-auto bg-transparent"),oe(t,"scrollbar-color","red gray")},m(s,i){x(s,t,i);for(let o=0;o<l.length;o+=1)l[o].m(t,null);n[31](t)},p(s,i){if(i[0]&68608){e=s[11].data;let o;for(o=0;o<e.length;o+=1){const r=Le(s,e,o);l[o]?l[o].p(r,i):(l[o]=qe(r),l[o].c(),l[o].m(t,null))}for(;o<l.length;o+=1)l[o].d(1);l.length=e.length}},d(s){s&&H(t),Ne(l,s),n[31](null)}}}function qe(n){let t,e,l,s;function i(){return n[30](n[37])}return{c(){t=p("img"),c(t,"class","h-full mr-2 hover:border-4 border-red-400"),Z(t.src,e="data:image/jpg;base64, "+n[35])||c(t,"src",e),c(t,"alt","video frames from search query")},m(o,r){x(o,t,r),l||(s=q(t,"click",i),l=!0)},p(o,r){n=o,r[0]&2048&&!Z(t.src,e="data:image/jpg;base64, "+n[35])&&c(t,"src",e)},d(o){o&&H(t),l=!1,s()}}}function rt(n){let t,e,l,s,i=n[0].video_title+"",o,r,f,u,m,_,M,k,S,d,h,T,C,b,N,V,w,g,v,L,y,z,B,E,X,de,ne=!1,_e,se=!0,pe,O,$,I,R,Q,U;function we(){cancelAnimationFrame(_e),E.paused||(_e=Ke(we),ne=!0),n[25].call(E)}let P=n[10]&&xe(n),F=n[10]&&Ee(n);return{c(){t=p("div"),e=p("div"),l=p("div"),s=p("h3"),o=J(i),r=j(),f=p("button"),f.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg> 
        <span class="font-light">esc</span>`,u=j(),m=p("fieldset"),_=p("div"),M=p("legend"),M.textContent="Augmented Prompts",k=j(),S=p("label"),d=p("input"),h=J(`\r
          true`),T=j(),C=p("label"),b=p("input"),N=J(`\r
          false`),V=j(),w=p("div"),g=p("div"),v=p("button"),v.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="dark:text-black w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path></svg>',L=j(),y=p("input"),z=j(),B=p("div"),E=p("video"),X=p("track"),pe=j(),O=p("div"),$=p("div"),I=j(),P&&P.c(),R=j(),F&&F.c(),c(s,"class","text-2xl mx-2 mt-2"),c(f,"class","absolute top-0 right-0 hover:text-pink-500 p-2"),c(d,"type","radio"),c(d,"name","prompts"),d.__value="true",d.value=d.__value,n[21][0].push(d),c(b,"type","radio"),c(b,"name","prompts"),b.__value="false",b.value=b.__value,n[21][0].push(b),c(m,"class","flex flex-row place-content-center mt-3"),c(v,"class","hover:text-pink-500 cursor-pointer px-2"),c(y,"class","focus:outline-none dark:text-black"),c(y,"type","text"),c(y,"placeholder","Search query"),c(g,"class","flex border rounded-full p-2 bg-white"),c(w,"class","flex place-content-center my-5"),c(X,"kind","captions"),c(E,"class","bg-black w-full h-full"),Z(E.src,de=n[18]+"#t="+at)||c(E,"src",de),E.autoplay=!0,n[9]===void 0&&We(()=>n[27].call(E)),c($,"class","h-full bg-red-400"),oe($,"width",(n[7]/n[9]*100||0)+"%"),c(O,"class","relative w-full h-[10px] hover:h-[20px] bg-red-200"),c(B,"class","relative w-full min-h-[400px] h-[40vh] break-all"),c(e,"class","relative max-w-[1080px] w-full pb-[10px] bg-gray-300 dark:bg-gray-700 dark:text-white"),c(t,"class","transform z-[9999] col-span-full w-full flex justify-center pb-[20px]")},m(D,K){x(D,t,K),a(t,e),a(e,l),a(l,s),a(s,o),a(l,r),a(l,f),a(e,u),a(e,m),a(m,_),a(_,M),a(_,k),a(_,S),a(S,d),d.checked=d.__value===n[4],a(S,h),a(_,T),a(_,C),a(C,b),b.checked=b.__value===n[4],a(C,N),a(e,V),a(e,w),a(w,g),a(g,v),a(g,L),a(g,y),n[23](y),a(e,z),a(e,B),a(B,E),a(E,X),n[24](E),a(B,pe),a(B,O),a(O,$),a(O,I),P&&P.m(O,null),a(B,R),F&&F.m(B,null),n[32](t),Q||(U=[q(f,"click",n[2]),q(d,"change",n[20]),q(b,"change",n[22]),q(v,"click",n[1]),q(y,"keyup",n[15]),q(E,"timeupdate",we),q(E,"play",n[26]),q(E,"pause",n[26]),q(E,"durationchange",n[27]),q(E,"click",n[28]),q(E,"click",n[29]),q(E,"mousemove",n[13]),q(O,"mousemove",n[17]),q(O,"mousemove",n[13]),q(O,"mousedown",n[14])],Q=!0)},p(D,K){K[0]&1&&i!==(i=D[0].video_title+"")&&fe(o,i),K[0]&16&&(d.checked=d.__value===D[4]),K[0]&16&&(b.checked=b.__value===D[4]),!ne&&K[0]&128&&!isNaN(D[7])&&(E.currentTime=D[7]),ne=!1,K[0]&256&&se!==(se=D[8])&&E[se?"pause":"play"](),K[0]&640&&oe($,"width",(D[7]/D[9]*100||0)+"%"),D[10]?P?P.p(D,K):(P=xe(D),P.c(),P.m(O,null)):P&&(P.d(1),P=null),D[10]?F?F.p(D,K):(F=Ee(D),F.c(),F.m(B,null)):F&&(F.d(1),F=null)},i:A,o:A,d(D){D&&H(t),n[21][0].splice(n[21][0].indexOf(d),1),n[21][0].splice(n[21][0].indexOf(b),1),n[23](null),n[24](null),P&&P.d(),F&&F.d(),n[32](null),Q=!1,me(U)}}}const at=0;function ct(n){const t=n.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function ut(n,t,e){ge(()=>{_(),ct(o)||o.scrollIntoView({block:"end",inline:"nearest"}),he.set(!0),l.index_available==!1&&(r.setAttribute("disabled",""),r.setAttribute("placeholder","Gen index to query"))}),Je(()=>{M(),he.set(!1)});let{f:l}=t,{show_modal:s}=t,i,o,r,f,u,m;u=!0;function _(){r.focus()}function M(){i.pause(),i.removeAttribute("src"),i.load(),e(19,s=!1)}document.addEventListener("keydown",function(I){I.key==="Escape"&&M()});function k(I,R){if(!m||R.buttons!=1)return;const{left:Q,right:U}=I.getBoundingClientRect();e(5,i.currentTime=m*(R.clientX-Q)/(U-Q),i)}function S(I){k(this,I)}function d(I){k(this,I)}let h;var T;let C="true";function b(I){if(!I)return;const R=ve+"queryVideo";console.log(R),console.log("query text: ",I);let Q=new FormData;Q.append("video_hash",l.video_hash),Q.append("query_text",I),Q.append("aug_prompt",C),console.log("prompt_type: ",C),fetch(R,{method:"POST",mode:"cors",body:Q}).then(U=>U.json()).then(U=>{e(11,T=U.meta_data),e(10,h=U.meta_data.playback_pos)})}function N(I){if(I.key==="Enter"){const R=this.value;b(R)}}function V(I){i.pause(),e(5,i.currentTime=I,i)}let w;function g(){e(12,w.style.display="flex",w)}let v="video/"+l.video_title+"?video_directory="+l.video_directory;const L=[[]];function y(){C=this.__value,e(4,C),e(3,r)}function z(){C=this.__value,e(4,C),e(3,r)}function B(I){Y[I?"unshift":"push"](()=>{r=I,e(3,r)})}function E(I){Y[I?"unshift":"push"](()=>{i=I,e(5,i)})}function X(){f=this.currentTime,e(7,f)}function de(){u=this.paused,e(8,u)}function ne(){m=this.duration,e(9,m)}const _e=()=>e(8,u=!u),se=()=>e(12,w.style.display="none",w),pe=I=>V(h[I]);function O(I){Y[I?"unshift":"push"](()=>{w=I,e(12,w)})}function $(I){Y[I?"unshift":"push"](()=>{o=I,e(6,o)})}return n.$$set=I=>{"f"in I&&e(0,l=I.f),"show_modal"in I&&e(19,s=I.show_modal)},n.$$.update=()=>{n.$$.dirty[0]&24&&r&&(e(4,C),e(3,r),b(r.value))},[l,_,M,r,C,i,o,f,u,m,h,T,w,S,d,N,V,g,v,s,y,L,z,B,E,X,de,ne,_e,se,pe,O,$]}class ft extends ce{constructor(t){super(),ue(this,t,ut,rt,te,{f:0,show_modal:19,searchInputFocus:1,closeVideoModal:2},null,[-1,-1])}get searchInputFocus(){return this.$$.ctx[1]}get closeVideoModal(){return this.$$.ctx[2]}}function Ae(n){let t,e,l,s,i,o,r;return{c(){t=p("div"),e=p("progress"),s=j(),i=p("span"),o=J("ETA: "),r=J(n[3]),c(e,"class","bg-gray-400 dark:bg-gray-200 h-3 mt-2 w-full"),c(e,"data-hash",l=n[0].video_hash),e.value=n[2],c(e,"max","1")},m(f,u){x(f,t,u),a(t,e),a(t,s),a(t,i),a(i,o),a(i,r)},p(f,u){u&1&&l!==(l=f[0].video_hash)&&c(e,"data-hash",l),u&4&&(e.value=f[2]),u&8&&fe(r,f[3])},d(f){f&&H(t)}}}function dt(n){let t,e,l;return{c(){t=p("button"),t.innerHTML="<span>Gen Index</span>",c(t,"class","items-center focus:outline-none rounded-lg py-2 px-6 leading-none bg-blue-200 dark:bg-blue-600 hover:bg-blue-300 dark:hover:bg-blue-800 disabled:bg-slate-100 dark:text-white")},m(s,i){x(s,t,i),n[9](t),e||(l=q(t,"click",n[6]),e=!0)},p:A,d(s){s&&H(t),n[9](null),e=!1,l()}}}function _t(n){let t;return{c(){t=p("p"),t.textContent="Already Indexed",c(t,"class","dark:text-white")},m(e,l){x(e,t,l)},p:A,d(e){e&&H(t)}}}function De(n){let t,e,l;function s(o){n[10](o)}let i={f:n[0]};return n[5]!==void 0&&(i.show_modal=n[5]),t=new ft({props:i}),Y.push(()=>Oe(t,"show_modal",s)),{c(){ie(t.$$.fragment)},m(o,r){re(t,o,r),l=!0},p(o,r){const f={};r&1&&(f.f=o[0]),!e&&r&32&&(e=!0,f.show_modal=o[5],Ge(()=>e=!1)),t.$set(f)},i(o){l||(G(t.$$.fragment,o),l=!0)},o(o){W(t.$$.fragment,o),l=!1},d(o){ae(t,o)}}}function pt(n){let t,e,l,s,i=n[0].video_title+"",o,r,f,u,m,_,M,k,S,d,h,T,C,b=n[4]&&Ae(n);function N(v,L){return v[0].index_available===!0?_t:dt}let V=N(n),w=V(n),g=n[5]&&De(n);return{c(){t=p("div"),e=p("div"),l=p("div"),s=p("label"),o=J(i),r=j(),f=p("button"),u=p("img"),_=j(),b&&b.c(),M=j(),k=p("div"),w.c(),S=j(),g&&g.c(),d=le(),c(s,"for",""),c(s,"class","mb-2 text-blue-500 dark:text-white h-auto w-full"),c(u,"class","h-auto w-full rounded-lg"),Z(u.src,m="/api/videoPoster/"+n[0].video_hash+".jpg")||c(u,"src",m),c(u,"alt","videos from selected directory"),c(f,"class","h-auto w-full shadow-xl"),c(l,"class","break-all"),c(k,"class","mx-auto mt-2"),c(e,"class","flex flex-col"),c(t,"class","mb-4 dark:text-white")},m(v,L){x(v,t,L),a(t,e),a(e,l),a(l,s),a(s,o),a(l,r),a(l,f),a(f,u),a(l,_),b&&b.m(l,null),a(e,M),a(e,k),w.m(k,null),x(v,S,L),g&&g.m(v,L),x(v,d,L),h=!0,T||(C=q(f,"click",n[7]),T=!0)},p(v,[L]){(!h||L&1)&&i!==(i=v[0].video_title+"")&&fe(o,i),(!h||L&1&&!Z(u.src,m="/api/videoPoster/"+v[0].video_hash+".jpg"))&&c(u,"src",m),v[4]?b?b.p(v,L):(b=Ae(v),b.c(),b.m(l,null)):b&&(b.d(1),b=null),V===(V=N(v))&&w?w.p(v,L):(w.d(1),w=V(v),w&&(w.c(),w.m(k,null))),v[5]?g?(g.p(v,L),L&32&&G(g,1)):(g=De(v),g.c(),G(g,1),g.m(d.parentNode,d)):g&&(be(),W(g,1,1,()=>{g=null}),ke())},i(v){h||(G(g),h=!0)},o(v){W(g),h=!1},d(v){v&&H(t),b&&b.d(),w.d(),v&&H(S),g&&g.d(v),v&&H(d),T=!1,C()}}}function ht(n,t,e){let{f:l=""}=t,{i:s=-1}=t;ge(()=>{let d=sessionStorage.getItem(l.video_hash);console.log("session storage:",d),d==="indexing"&&(m(),i&&(e(1,i.disabled=!0,i),e(1,i.innerHTML="Index in progress",i)))});let i;var o="0",r="unknown",f=!1;function u(){this.disabled=!0,this.innerHTML="Index in progress",e(4,f=!0);const d=m(),h=ve+"/videoIndex";let T=new FormData;T.append("video_absolute_path",l.video_absolute_path),fetch(h,{method:"POST",body:T}).then(C=>C.json()).then(C=>{e(4,f=!1),this.innerHTML="Index complete",sessionStorage.setItem(l.video_hash,"indexed"),e(0,l.index_available=!0,l),d.close()})}function m(){let d=new EventSource("/api/progress/"+l.video_hash);d.onmessage=h=>{console.log("Got some data: "+h.data);let T=h.data.split("_"),C=T[0],b=T[1];e(3,r=T[2]),l.video_hash===b&&(e(2,o=C),e(4,f=!0),sessionStorage.setItem(b,"indexing")),o=="1.0"&&(console.log("Index complete"),e(4,f=!1),i&&(e(1,i.disabled=!0,i),e(1,i.innerHTML="Index complete",i)),sessionStorage.setItem(b,"indexed"))},d.onerror=h=>{console.log("Error with event source"),d.close()}}let _=!1;function M(){_?e(5,_=!1):(e(5,_=!0),Se.update(d=>s))}Se.subscribe(d=>{s!=d&&e(5,_=!1)});function k(d){Y[d?"unshift":"push"](()=>{i=d,e(1,i)})}function S(d){_=d,e(5,_)}return n.$$set=d=>{"f"in d&&e(0,l=d.f),"i"in d&&e(8,s=d.i)},[l,i,o,r,f,_,u,M,s,k,S]}class mt extends ce{constructor(t){super(),ue(this,t,ht,pt,te,{f:0,i:8})}}function Ve(n){let t;return{c(){t=p("div"),c(t,"class","absolute right-10 z-50 h-[40vh] bg-pink-200")},m(e,l){x(e,t,l)},d(e){e&&H(t)}}}function gt(n){let t,e,l,s,i,o,r,f,u,m,_,M,k,S,d,h,T,C,b,N,V;k=new Xe({props:{darkMode:bt}});let w=n[2]&&Ve();return{c(){t=p("div"),e=p("span"),l=J("Total videos: "),s=p("strong"),i=J(n[0]),o=j(),r=p("div"),f=p("button"),f.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="dark:text-white w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path></svg>',u=j(),m=p("input"),_=j(),M=p("div"),ie(k.$$.fragment),S=j(),d=p("div"),h=p("button"),h.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 011.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.107 1.204.165.397.505.71.93.78l.893.15c.543.09.94.56.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.893.149c-.425.07-.765.383-.93.78-.165.398-.143.854.107 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 01-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.397.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 01-.12-1.45l.527-.737c.25-.35.273-.806.108-1.204-.165-.397-.505-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.107-1.204l-.527-.738a1.125 1.125 0 01.12-1.45l.773-.773a1.125 1.125 0 011.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>',T=j(),w&&w.c(),C=le(),c(e,"class","text-sm"),c(f,"class","hover:text-pink-500 cursor-pointer mr-3"),c(m,"class","bg-transparent focus:outline-none"),c(m,"placeholder","Search list"),c(r,"class","flex items-center select-none hover:border-b border-black dark:border-white"),c(h,"class","ml-3 rounded-full p-2 focus:outline-none hover:bg-blue-300 transition duration-500"),c(d,"class","flex items-center select-none"),c(M,"class","flex items-center select-none"),c(t,"class","mt-1 mb-4 flex items-center justify-between dark:text-white")},m(g,v){x(g,t,v),a(t,e),a(e,l),a(e,s),a(s,i),a(t,o),a(t,r),a(r,f),a(r,u),a(r,m),n[5](m),a(t,_),a(t,M),re(k,M,null),a(M,S),a(M,d),a(d,h),x(g,T,v),w&&w.m(g,v),x(g,C,v),b=!0,N||(V=[q(f,"click",n[4]),q(m,"keyup",n[3]),q(h,"click",n[6])],N=!0)},p(g,[v]){(!b||v&1)&&fe(i,g[0]),g[2]?w||(w=Ve(),w.c(),w.m(C.parentNode,C)):w&&(w.d(1),w=null)},i(g){b||(G(k.$$.fragment,g),b=!0)},o(g){W(k.$$.fragment,g),b=!1},d(g){g&&H(t),n[5](null),ae(k),g&&H(T),w&&w.d(g),g&&H(C),N=!1,me(V)}}}let bt=!1;function kt(n,t,e){let{items:l=0}=t,s,i=!1;const o=Ue();function r(){o("message",{text:this.value})}const f=()=>s.focus();function u(_){Y[_?"unshift":"push"](()=>{s=_,e(1,s)})}const m=()=>e(2,i=!i);return n.$$set=_=>{"items"in _&&e(0,l=_.items)},[l,s,i,r,f,u,m]}class vt extends ce{constructor(t){super(),ue(this,t,kt,gt,te,{items:0})}}function ze(n,t,e){const l=n.slice();return l[13]=t[e],l[15]=e,l}function wt(n){let t,e,l,s,i,o,r,f,u={ctx:n,current:null,token:null,hasCatch:!1,pending:St,then:It,catch:Mt,blocks:[,,,]};return Me(r=n[2],u),{c(){t=p("p"),e=J("Current selected directory: "),l=p("span"),s=J(n[0]),i=j(),o=le(),u.block.c(),c(l,"class","font-bold"),c(t,"class","dark:text-white")},m(m,_){x(m,t,_),a(t,e),a(t,l),a(l,s),x(m,i,_),x(m,o,_),u.block.m(m,u.anchor=_),u.mount=()=>o.parentNode,u.anchor=o,f=!0},p(m,_){n=m,(!f||_&1)&&fe(s,n[0]),u.ctx=n,_&4&&r!==(r=n[2])&&Me(r,u)||Ye(u,n,_)},i(m){f||(G(u.block),f=!0)},o(m){for(let _=0;_<3;_+=1){const M=u.blocks[_];W(M)}f=!1},d(m){m&&H(t),m&&H(i),m&&H(o),u.block.d(m),u.token=null,u=null}}}function yt(n){let t;return{c(){t=p("p"),t.textContent="Select a directory.",c(t,"class","dark:text-white text-2xl")},m(e,l){x(e,t,l)},p:A,i:A,o:A,d(e){e&&H(t)}}}function Mt(n){return{c:A,m:A,p:A,i:A,o:A,d:A}}function It(n){let t,e=[],l=new Map,s,i=n[1];const o=r=>r[13];for(let r=0;r<i.length;r+=1){let f=ze(n,i,r),u=o(f);l.set(u,e[r]=Be(u,f))}return{c(){t=p("div");for(let r=0;r<e.length;r+=1)e[r].c();c(t,"class","relative grid sm:grid-cols-3 2xl:grid-cols-5 min-[2400px]:grid-cols-9 gap-8 mt-6 grid-flow-row-dense")},m(r,f){x(r,t,f);for(let u=0;u<e.length;u+=1)e[u].m(t,null);s=!0},p(r,f){f&2&&(i=r[1],be(),e=Fe(e,f,o,1,r,i,l,t,Ze,Be,null,ze),ke())},i(r){if(!s){for(let f=0;f<i.length;f+=1)G(e[f]);s=!0}},o(r){for(let f=0;f<e.length;f+=1)W(e[f]);s=!1},d(r){r&&H(t);for(let f=0;f<e.length;f+=1)e[f].d()}}}function Be(n,t){let e,l,s;return l=new mt({props:{f:t[13],i:t[15]}}),{key:n,first:null,c(){e=le(),ie(l.$$.fragment),this.first=e},m(i,o){x(i,e,o),re(l,i,o),s=!0},p(i,o){t=i;const r={};o&2&&(r.f=t[13]),o&2&&(r.i=t[15]),l.$set(r)},i(i){s||(G(l.$$.fragment,i),s=!0)},o(i){W(l.$$.fragment,i),s=!1},d(i){i&&H(e),ae(l,i)}}}function St(n){let t;return{c(){t=p("p"),t.textContent="Fetching data....",c(t,"class","dark:text-white")},m(e,l){x(e,t,l)},p:A,i:A,o:A,d(e){e&&H(t)}}}function Pe(n){let t;return{c(){t=p("div"),t.innerHTML='<div class="absolute inset-0 bg-gray-900 opacity-75"></div>',c(t,"class","fixed inset-0 transition-opacity")},m(e,l){x(e,t,l)},d(e){e&&H(t)}}}function Tt(n){let t,e,l,s,i,o,r,f,u,m,_,M,k,S,d,h,T,C,b;function N(y){n[10](y)}let V={};n[0]!==void 0&&(V.dirname=n[0]),e=new it({props:V}),Y.push(()=>Oe(e,"dirname",N)),r=new vt({props:{items:n[1].length}}),r.$on("message",n[5]);const w=[yt,wt],g=[];function v(y,z){return y[0]?1:0}k=v(n),S=g[k]=w[k](n);let L=n[3]&&Pe();return{c(){t=p("div"),ie(e.$$.fragment),s=j(),i=p("main"),o=p("div"),ie(r.$$.fragment),f=j(),u=p("input"),m=j(),_=p("button"),_.innerHTML="<span>Select video directory</span>",M=j(),S.c(),d=j(),L&&L.c(),h=le(),c(u,"type","text"),c(u,"class","dark:text-white w-96 bg-transparent focus:outline-none border-b border-black dark:border-white"),c(u,"placeholder","Provide absolute path to video directory."),c(_,"class","items-center focus:outline-none rounded-lg my-3 py-2 px-6 mb-4 leading-none bg-blue-200 dark:bg-blue-600 hover:bg-blue-300 hover:dark:bg-blue-800 dark:text-white disabled:bg-slate-100"),c(o,"class","sm:px-12 max-sm:px-4 py-12 text-gray-700"),c(i,"class","max-md:flex flex-1 bg-gray-300 dark:bg-gray-600 overflow-y-auto"),c(t,"class","min-h-screen md:flex")},m(y,z){x(y,t,z),re(e,t,null),a(t,s),a(t,i),a(i,o),re(r,o,null),a(o,f),a(o,u),ye(u,n[4]),a(o,m),a(o,_),a(o,M),g[k].m(o,null),x(y,d,z),L&&L.m(y,z),x(y,h,z),T=!0,C||(b=[q(u,"keydown",n[7]),q(u,"input",n[11]),q(_,"click",n[6])],C=!0)},p(y,[z]){const B={};!l&&z&1&&(l=!0,B.dirname=y[0],Ge(()=>l=!1)),e.$set(B);const E={};z&2&&(E.items=y[1].length),r.$set(E),z&16&&u.value!==y[4]&&ye(u,y[4]);let X=k;k=v(y),k===X?g[k].p(y,z):(be(),W(g[X],1,1,()=>{g[X]=null}),ke(),S=g[k],S?S.p(y,z):(S=g[k]=w[k](y),S.c()),G(S,1),S.m(o,null)),y[3]?L||(L=Pe(),L.c(),L.m(h.parentNode,h)):L&&(L.d(1),L=null)},i(y){T||(G(e.$$.fragment,y),G(r.$$.fragment,y),G(S),T=!0)},o(y){W(e.$$.fragment,y),W(r.$$.fragment,y),W(S),T=!1},d(y){y&&H(t),ae(e),ae(r),g[k].d(),y&&H(d),L&&L.d(y),y&&H(h),C=!1,me(b)}}}function Ct(n,t,e){ge(()=>{let h=localStorage.getItem("dirname");h&&(e(0,l=h),console.log(l))}),he.set(!1);let l="",s=[],i=[],o="",r;async function f(){const h=ve+"/videos";let T=new FormData;T.append("video_directory",l);const C=await fetch(h,{method:"POST",body:T});if(C.ok){const b=await C.json();return e(8,s=b),b}else throw new Error(C)}function u(h){e(9,o=h.detail.text.toLowerCase())}var m=!1;he.subscribe(h=>{e(3,m=h),console.log("dark bg value:",h)});let _;function M(){_&&(e(0,l=_),localStorage.setItem("dirname",l))}function k(h){h.key==="Enter"&&M()}function S(h){l=h,e(0,l)}function d(){_=this.value,e(4,_)}return n.$$.update=()=>{n.$$.dirty&768&&s&&e(1,i=s.filter(h=>h.video_title.toLowerCase().search(o)!=-1)),n.$$.dirty&1&&l&&e(2,r=f())},[l,i,r,m,_,u,M,k,s,o,S,d]}class Lt extends ce{constructor(t){super(),ue(this,t,Ct,Tt,te,{})}}new Lt({target:document.getElementById("app")});
