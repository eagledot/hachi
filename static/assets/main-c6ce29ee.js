import{n as A,s as ae,S as de,i as pe,e as p,a as L,b as d,c as I,d as f,u as ke,f as j,t as W,l as H,g as Ke,h as ie,j as Xe,k as fe,m as _e,r as ve,o as we,p as Ye,q as ue,v as Ge,w as Ze,x as ee,y as G,z as me,A as Q,B as be,C as Ue,D as se,E as oe,F as Qe,G as re,H as $e,I as et,J as qe,K as Me,L as ze}from"./DarkMode-9991abd2.js";const Te="/assets/fire-cb6a32ef.svg",ne=[];function We(n,t=A){let e;const l=new Set;function s(c){if(ae(n,c)&&(n=c,e)){const h=!ne.length;for(const a of l)a[1](),ne.push(a,n);if(h){for(let a=0;a<ne.length;a+=2)ne[a][0](ne[a+1]);ne.length=0}}}function o(c){s(c(n))}function i(c,h=A){const a=[c,h];return l.add(a),l.size===1&&(e=t(s)||A),c(n),()=>{l.delete(a),l.size===0&&(e(),e=null)}}return{set:s,update:o,subscribe:i}}const ce="/api/",Se=We(-1),ge=We(!1);function Ve(n,t,e){const l=n.slice();return l[3]=t[e],l}function tt(n){let t,e;return{c(){t=p("img"),ie(t.src,e=n[3].svg)||d(t,"src",e),d(t,"alt",n[3].text),d(t,"class","dark:text-white w-6 h-6")},m(l,s){I(l,t,s)},p:A,d(l){l&&j(t)}}}function Ie(n,t){let e,l,s,o,i,c=t[3].text+"",h,a,b,w,g=t[3].svg&&tt(t);return{key:n,first:null,c(){e=p("li"),l=p("button"),s=p("span"),g&&g.c(),o=L(),i=p("span"),h=W(c),a=L(),d(i,"class","pl-2"),d(s,"class","capitalize flex items-center"),d(l,"class","w-full pl-8 py-2"),d(e,"class","font-semibold text-gray-700 dark:text-white hover:bg-pink-200 hover:dark:text-gray-700 mb-2 transition duration-500"),this.first=e},m(z,x){I(z,e,x),f(e,l),f(l,s),g&&g.m(s,null),f(s,o),f(s,i),f(i,h),f(e,a),b||(w=H(l,"click",t[3].func),b=!0)},p(z,x){t=z,t[3].svg&&g.p(t,x)},d(z){z&&j(e),g&&g.d(),b=!1,w()}}}function lt(n){let t,e,l,s,o=[],i=new Map,c=n[0];const h=a=>a[3].id;for(let a=0;a<c.length;a+=1){let b=Ve(n,c,a),w=h(b);i.set(w,o[a]=Ie(w,b))}return{c(){t=p("nav"),e=p("div"),e.innerHTML=`<a class="flex md:flex-col items-center" href="https:ramanlabs.in"><svg class="h-20 w-40 m-4 md:mt-10" viewBox="0 0 110 110"><circle class="fill-[#00f] opacity-[.24797] dark:fill-pink-100 dark:opacity-100" cx="55" cy="55" r="55" style="stroke-width:3.1181"></circle><path style="fill-opacity:.62308;fill:#1a1a1a;stroke-width:4;stroke:#000" d="M41.451 49.81h26.458v26.458H41.451z"></path><g style="fill:none;stroke-width:4;stroke:#000"><path d="M46.743 76.27v11.906M62.618 76.27v11.906M54.68 76.27v6.615M67.909 63.04h6.615M41.451 63.04h-6.615M54.68 76.27v5.292M54.68 49.81v-6.615M41.451 55.1H30.868M41.451 70.98H21.607L11.024 88.178M67.909 70.98h19.844l10.583 17.198M67.909 55.1h10.583M46.743 49.81V8.8l-6.615-6.615M62.618 49.81V8.8l6.615-6.615"></path></g><circle cx="46.743" cy="55.1" r=".671" style="fill-opacity:.62308;fill:#1a1a1a;stroke-width:2;stroke:#000"></circle></svg> 
      
      <svg class="h-8 w-40 m-4" viewBox="0 0 57.975 8.308"><g style="stroke-width:.26458"><path d="M.519 4.65q0-.635.307-1.132.317-.508.847-.805.529-.296 1.164-.296t.942.212q.317.2.243.486-.032.149-.127.233-.085.074-.201.095-.116.022-.254-.01-.677-.138-1.217-.021-.54.116-.857.434-.307.317-.307.804zm.01 3.62q-.253 0-.391-.128Q0 8.005 0 7.74V3.01q0-.254.138-.392T.53 2.48q.264 0 .391.138.138.127.138.392v4.73q0 .254-.138.392-.127.137-.391.137zM7.133 8.31q-.773 0-1.386-.381-.614-.392-.974-1.048-.35-.667-.35-1.503 0-.836.382-1.502.391-.667 1.047-1.048.667-.392 1.493-.392.825 0 1.481.392.656.38 1.037 1.048.392.666.392 1.502h-.413q0 .836-.36 1.503-.349.656-.963 1.048-.613.381-1.386.381zm.212-.952q.54 0 .963-.254.423-.265.666-.71.244-.455.244-1.016 0-.571-.244-1.016-.243-.455-.666-.709-.424-.264-.963-.264-.53 0-.963.264-.424.254-.678.71-.243.444-.243 1.015 0 .561.243 1.016.254.445.678.71.434.254.963.254zm2.37.92q-.232 0-.391-.148-.148-.159-.148-.391v-1.62l.2-1.121.88.38v2.36q0 .233-.16.392-.148.148-.38.148zM19.463 8.28q-.233 0-.392-.148-.148-.159-.148-.392V4.713q0-.666-.328-.984-.328-.328-.857-.328-.55 0-.91.381-.35.381-.35.974H15.6q0-.688.296-1.207.297-.529.826-.825.54-.297 1.228-.297.603 0 1.069.265.465.265.72.783.264.508.264 1.238V7.74q0 .233-.148.392-.149.148-.392.148zm-7.06 0q-.232 0-.39-.148-.149-.159-.149-.392V3.03q0-.243.148-.39.16-.15.392-.15.243 0 .391.15t.149.39v4.71q0 .233-.149.392-.148.148-.391.148zm3.536 0q-.233 0-.392-.148-.148-.159-.148-.392V4.713q0-.666-.328-.984-.328-.328-.857-.328-.55 0-.91.381t-.36.974h-.667q0-.688.275-1.207.275-.529.762-.825.487-.297 1.111-.297.603 0 1.07.265.465.265.719.783.264.508.264 1.238V7.74q0 .233-.148.392-.148.148-.391.148zM24.204 8.31q-.773 0-1.386-.381-.614-.392-.974-1.048-.35-.667-.35-1.503 0-.836.382-1.502.391-.667 1.047-1.048.667-.392 1.493-.392.825 0 1.481.392.656.38 1.037 1.048.392.666.392 1.502h-.413q0 .836-.36 1.503-.349.656-.963 1.048-.613.381-1.386.381zm.212-.952q.54 0 .963-.254.423-.265.666-.71.244-.455.244-1.016 0-.571-.244-1.016-.243-.455-.666-.709-.424-.264-.963-.264-.53 0-.963.264-.424.254-.678.71-.243.444-.243 1.015 0 .561.243 1.016.254.445.678.71.434.254.963.254zm2.37.92q-.232 0-.391-.148-.148-.159-.148-.391v-1.62l.2-1.121.88.38v2.36q0 .233-.16.392-.148.148-.38.148zM33.824 8.28q-.233 0-.392-.148-.148-.159-.148-.392V5.137q0-.603-.222-.984t-.603-.561q-.37-.19-.858-.19-.444 0-.804.179-.36.18-.571.487-.212.296-.212.688h-.667q0-.667.318-1.186.328-.529.889-.836t1.26-.307q.73 0 1.3.318.583.307.911.91.339.603.339 1.482V7.74q0 .233-.16.392-.147.148-.38.148zm-4.35 0q-.233 0-.391-.148-.148-.159-.148-.392V3.02q0-.243.148-.392.158-.148.391-.148.244 0 .392.148.148.149.148.392v4.72q0 .233-.148.392-.148.148-.392.148z"></path><path class="fill-[#007af3] dark:fill-pink-100" transform="translate(-27.111 -146.27)" d="M64.639 154.54q-.466 0-.826-.254t-.56-.688q-.202-.444-.202-1.016v-5.778q0-.233.149-.381.148-.149.38-.149.233 0 .382.149.148.148.148.38v5.78q0 .39.148.645.148.254.381.254h.265q.211 0 .338.148.138.148.138.38t-.201.382q-.201.148-.519.148zM68.534 154.58q-.773 0-1.386-.381-.614-.392-.974-1.048-.35-.667-.35-1.503 0-.836.382-1.502.391-.667 1.047-1.048.667-.392 1.493-.392.825 0 1.481.392.656.38 1.037 1.048.392.666.392 1.502h-.413q0 .836-.36 1.503-.349.656-.963 1.048-.613.381-1.386.381zm.212-.953q.54 0 .963-.253.423-.265.667-.71.243-.455.243-1.016 0-.571-.243-1.016-.244-.455-.667-.709-.424-.264-.963-.264-.53 0-.963.264-.424.254-.678.71-.243.444-.243 1.015 0 .561.243 1.016.254.445.678.71.434.254.963.254zm2.37.921q-.232 0-.391-.148-.148-.159-.148-.391v-1.62l.2-1.121.88.38v2.36q0 .233-.16.392-.148.148-.38.148zM76.175 154.58q-.826 0-1.482-.381-.656-.392-1.037-1.058-.38-.667-.391-1.503v-4.826q0-.244.148-.392.158-.148.391-.148.244 0 .392.148.148.148.148.392v2.857q.37-.444.889-.698.53-.265 1.154-.265.772 0 1.386.392.614.38.963 1.048.36.656.36 1.492t-.392 1.503q-.38.666-1.037 1.058-.656.381-1.492.381zm0-.953q.54 0 .963-.253.423-.265.667-.72.254-.455.254-1.016 0-.572-.254-1.016-.244-.445-.667-.699-.423-.264-.963-.264-.53 0-.963.264-.423.254-.667.699-.243.444-.243 1.016 0 .56.243 1.016.244.455.667.72.434.254.963.254zM82.811 154.58q-.74 0-1.376-.222-.624-.233-.973-.582-.16-.17-.138-.381.032-.223.212-.36.211-.17.412-.138.212.021.36.18.18.201.572.381.402.17.889.17.614 0 .931-.202.328-.2.339-.518.01-.318-.307-.55-.307-.233-1.133-.381-1.069-.212-1.555-.635-.477-.424-.477-1.038 0-.54.318-.889.317-.36.815-.529.497-.18 1.037-.18.699 0 1.238.222t.858.614q.148.17.137.36-.01.18-.18.307-.17.116-.402.074-.233-.042-.392-.19-.264-.254-.571-.35-.307-.095-.71-.095-.465 0-.793.159-.317.159-.317.466 0 .19.095.349.106.148.402.275.296.116.868.233.794.159 1.249.402.465.243.666.571.201.318.201.741 0 .487-.264.879-.254.391-.762.624-.498.233-1.249.233z"></path></g></svg></a>`,l=L(),s=p("ul");for(let a=0;a<o.length;a+=1)o[a].c();d(s,"class",""),d(t,"class","md:w-56 max-md:flex max-md:flex-col bg-gray-100 dark:bg-gray-500 md:overflow-y-auto py-4")},m(a,b){I(a,t,b),f(t,e),f(t,l),f(t,s);for(let w=0;w<o.length;w+=1)o[w].m(s,null)},p(a,[b]){b&1&&(c=a[0],o=ke(o,b,h,1,a,c,i,s,Ke,Ie,null,Ve))},i:A,o:A,d(a){a&&j(t);for(let b=0;b<o.length;b+=1)o[b].d()}}}function nt(){window.location.href="/video_search.html"}function it(){window.location.href="/search.html"}function st(n,t,e){let{dirname:l=""}=t;const s=[{id:2,func:nt,text:"Video Search",svg:Te},{id:3,func:it,text:"Image Search",svg:Te}];return n.$$set=o=>{"dirname"in o&&e(1,l=o.dirname)},[s,l]}class ot extends de{constructor(t){super(),pe(this,t,st,lt,ae,{dirname:1})}}function je(n,t,e){const l=n.slice();return l[35]=t[e],l[37]=e,l}function Le(n,t,e){const l=n.slice();return l[38]=t[e],l}function xe(n){let t,e=n[10],l=[];for(let s=0;s<e.length;s+=1)l[s]=Ce(Le(n,e,s));return{c(){for(let s=0;s<l.length;s+=1)l[s].c();t=ue()},m(s,o){for(let i=0;i<l.length;i+=1)l[i].m(s,o);I(s,t,o)},p(s,o){if(o[0]&1536){e=s[10];let i;for(i=0;i<e.length;i+=1){const c=Le(s,e,i);l[i]?l[i].p(c,o):(l[i]=Ce(c),l[i].c(),l[i].m(t.parentNode,t))}for(;i<l.length;i+=1)l[i].d(1);l.length=e.length}},d(s){Ge(l,s),s&&j(t)}}}function Ce(n){let t;return{c(){t=p("div"),d(t,"class","absolute bg-blue-900 top-0 w-[4px] h-full max-w-full"),fe(t,"left",n[38]/n[9]*100+"%")},m(e,l){I(e,t,l)},p(e,l){l[0]&1536&&fe(t,"left",e[38]/e[9]*100+"%")},d(e){e&&j(t)}}}function He(n){let t,e=n[11].data,l=[];for(let s=0;s<e.length;s+=1)l[s]=Ee(je(n,e,s));return{c(){t=p("div");for(let s=0;s<l.length;s+=1)l[s].c();d(t,"class","absolute bottom-0 left-0 h-32 flex flex-nowrap overflow-x-auto bg-transparent"),fe(t,"scrollbar-color","red gray")},m(s,o){I(s,t,o);for(let i=0;i<l.length;i+=1)l[i].m(t,null);n[31](t)},p(s,o){if(o[0]&68608){e=s[11].data;let i;for(i=0;i<e.length;i+=1){const c=je(s,e,i);l[i]?l[i].p(c,o):(l[i]=Ee(c),l[i].c(),l[i].m(t,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=e.length}},d(s){s&&j(t),Ge(l,s),n[31](null)}}}function Ee(n){let t,e,l,s;function o(){return n[30](n[37])}return{c(){t=p("img"),d(t,"class","h-full mr-2 hover:border-4 border-red-400"),ie(t.src,e="data:image/jpg;base64, "+n[35])||d(t,"src",e),d(t,"alt","video frames from search query")},m(i,c){I(i,t,c),l||(s=H(t,"click",o),l=!0)},p(i,c){n=i,c[0]&2048&&!ie(t.src,e="data:image/jpg;base64, "+n[35])&&d(t,"src",e)},d(i){i&&j(t),l=!1,s()}}}function rt(n){let t,e,l,s,o=n[0].video_title+"",i,c,h,a,b,w,g,z,x,k,y,q,_,m,E,C,v,r,u,T,F,P,N,S,V,D,$=!1,te,Y=!0,he,U,le,M,J,K,Z;function ye(){cancelAnimationFrame(te),S.paused||(te=Ze(ye),$=!0),n[25].call(S)}let O=n[10]&&xe(n),R=n[10]&&He(n);return{c(){t=p("div"),e=p("div"),l=p("div"),s=p("h3"),i=W(o),c=L(),h=p("button"),h.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg> 
        <span class="font-light">esc</span>`,a=L(),b=p("fieldset"),w=p("div"),g=p("legend"),g.textContent="Augmented Prompts",z=L(),x=p("label"),k=p("input"),y=W(`\r
          true`),q=L(),_=p("label"),m=p("input"),E=W(`\r
          false`),C=L(),v=p("div"),r=p("div"),u=p("button"),u.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="dark:text-black w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path></svg>',T=L(),F=p("input"),P=L(),N=p("div"),S=p("video"),V=p("track"),he=L(),U=p("div"),le=p("div"),M=L(),O&&O.c(),J=L(),R&&R.c(),d(s,"class","text-2xl mx-2 mt-2"),d(h,"class","absolute top-0 right-0 hover:text-pink-500 p-2"),d(k,"type","radio"),d(k,"name","prompts"),k.__value="true",k.value=k.__value,n[21][0].push(k),d(m,"type","radio"),d(m,"name","prompts"),m.__value="false",m.value=m.__value,n[21][0].push(m),d(b,"class","flex flex-row place-content-center mt-3"),d(u,"class","hover:text-pink-500 cursor-pointer px-2"),d(F,"class","focus:outline-none dark:text-black"),d(F,"type","text"),d(F,"placeholder","Search query"),d(r,"class","flex border rounded-full p-2 bg-white"),d(v,"class","flex place-content-center my-5"),d(V,"kind","captions"),d(S,"class","bg-black w-full h-full"),ie(S.src,D=n[18]+"#t="+at)||d(S,"src",D),S.autoplay=!0,n[9]===void 0&&Xe(()=>n[27].call(S)),d(le,"class","h-full bg-red-400"),fe(le,"width",(n[7]/n[9]*100||0)+"%"),d(U,"class","relative w-full h-[10px] hover:h-[20px] bg-red-200"),d(N,"class","relative w-full min-h-[400px] h-[40vh] break-all"),d(e,"class","relative max-w-[1080px] w-full pb-[10px] bg-gray-300 dark:bg-gray-700 dark:text-white"),d(t,"class","transform z-[9999] col-span-full w-full flex justify-center pb-[20px]")},m(B,X){I(B,t,X),f(t,e),f(e,l),f(l,s),f(s,i),f(l,c),f(l,h),f(e,a),f(e,b),f(b,w),f(w,g),f(w,z),f(w,x),f(x,k),k.checked=k.__value===n[4],f(x,y),f(w,q),f(w,_),f(_,m),m.checked=m.__value===n[4],f(_,E),f(e,C),f(e,v),f(v,r),f(r,u),f(r,T),f(r,F),n[23](F),f(e,P),f(e,N),f(N,S),f(S,V),n[24](S),f(N,he),f(N,U),f(U,le),f(U,M),O&&O.m(U,null),f(N,J),R&&R.m(N,null),n[32](t),K||(Z=[H(h,"click",n[2]),H(k,"change",n[20]),H(m,"change",n[22]),H(u,"click",n[1]),H(F,"keyup",n[15]),H(S,"timeupdate",ye),H(S,"play",n[26]),H(S,"pause",n[26]),H(S,"durationchange",n[27]),H(S,"click",n[28]),H(S,"click",n[29]),H(S,"mousemove",n[13]),H(U,"mousemove",n[17]),H(U,"mousemove",n[13]),H(U,"mousedown",n[14])],K=!0)},p(B,X){X[0]&1&&o!==(o=B[0].video_title+"")&&_e(i,o),X[0]&16&&(k.checked=k.__value===B[4]),X[0]&16&&(m.checked=m.__value===B[4]),!$&&X[0]&128&&!isNaN(B[7])&&(S.currentTime=B[7]),$=!1,X[0]&256&&Y!==(Y=B[8])&&S[Y?"pause":"play"](),X[0]&640&&fe(le,"width",(B[7]/B[9]*100||0)+"%"),B[10]?O?O.p(B,X):(O=xe(B),O.c(),O.m(U,null)):O&&(O.d(1),O=null),B[10]?R?R.p(B,X):(R=He(B),R.c(),R.m(N,null)):R&&(R.d(1),R=null)},i:A,o:A,d(B){B&&j(t),n[21][0].splice(n[21][0].indexOf(k),1),n[21][0].splice(n[21][0].indexOf(m),1),n[23](null),n[24](null),O&&O.d(),R&&R.d(),n[32](null),K=!1,ve(Z)}}}const at=0;function ut(n){const t=n.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function ct(n,t,e){we(()=>{w(),ut(i)||i.scrollIntoView({block:"end",inline:"nearest"}),ge.set(!0),l.index_available==!1&&(c.setAttribute("disabled",""),c.setAttribute("placeholder","Gen index to query"))}),Ye(()=>{g(),ge.set(!1)});let{f:l}=t,{show_modal:s}=t,o,i,c,h,a,b;a=!0;function w(){c.focus()}function g(){o.pause(),o.removeAttribute("src"),o.load(),e(19,s=!1)}document.addEventListener("keydown",function(M){M.key==="Escape"&&g()});function z(M,J){if(!b||J.buttons!=1)return;const{left:K,right:Z}=M.getBoundingClientRect();e(5,o.currentTime=b*(J.clientX-K)/(Z-K),o)}function x(M){z(this,M)}function k(M){z(this,M)}let y;var q;let _="true";function m(M){if(!M)return;const J=ce+"queryVideo";console.log(J),console.log("query text: ",M);let K=new FormData;K.append("video_hash",l.video_hash),K.append("query_text",M),K.append("aug_prompt",_),console.log("prompt_type: ",_),fetch(J,{method:"POST",mode:"cors",body:K}).then(Z=>Z.json()).then(Z=>{e(11,q=Z.meta_data),e(10,y=Z.meta_data.playback_pos)})}function E(M){if(M.key==="Enter"){const J=this.value;m(J)}}function C(M){o.pause(),e(5,o.currentTime=M,o)}let v;function r(){e(12,v.style.display="flex",v)}let u="video/"+l.video_title+"?video_directory="+l.video_directory;const T=[[]];function F(){_=this.__value,e(4,_),e(3,c)}function P(){_=this.__value,e(4,_),e(3,c)}function N(M){ee[M?"unshift":"push"](()=>{c=M,e(3,c)})}function S(M){ee[M?"unshift":"push"](()=>{o=M,e(5,o)})}function V(){h=this.currentTime,e(7,h)}function D(){a=this.paused,e(8,a)}function $(){b=this.duration,e(9,b)}const te=()=>e(8,a=!a),Y=()=>e(12,v.style.display="none",v),he=M=>C(y[M]);function U(M){ee[M?"unshift":"push"](()=>{v=M,e(12,v)})}function le(M){ee[M?"unshift":"push"](()=>{i=M,e(6,i)})}return n.$$set=M=>{"f"in M&&e(0,l=M.f),"show_modal"in M&&e(19,s=M.show_modal)},n.$$.update=()=>{n.$$.dirty[0]&24&&c&&(e(4,_),e(3,c),m(c.value))},[l,w,g,c,_,o,i,h,a,b,y,q,v,x,k,E,C,r,u,s,F,T,P,N,S,V,D,$,te,Y,he,U,le]}class ft extends de{constructor(t){super(),pe(this,t,ct,rt,ae,{f:0,show_modal:19,searchInputFocus:1,closeVideoModal:2},null,[-1,-1])}get searchInputFocus(){return this.$$.ctx[1]}get closeVideoModal(){return this.$$.ctx[2]}}function Be(n){let t,e,l,s,o,i,c;return{c(){t=p("div"),e=p("progress"),s=L(),o=p("span"),i=W("ETA: "),c=W(n[3]),d(e,"class","bg-gray-400 dark:bg-gray-200 h-3 mt-2 w-full"),d(e,"data-hash",l=n[0].video_hash),e.value=n[2],d(e,"max","1")},m(h,a){I(h,t,a),f(t,e),f(t,s),f(t,o),f(o,i),f(o,c)},p(h,a){a&1&&l!==(l=h[0].video_hash)&&d(e,"data-hash",l),a&4&&(e.value=h[2]),a&8&&_e(c,h[3])},d(h){h&&j(t)}}}function dt(n){let t,e,l;return{c(){t=p("button"),t.innerHTML="<span>Gen Index</span>",d(t,"class","items-center focus:outline-none rounded-lg py-2 px-6 leading-none bg-blue-200 dark:bg-blue-600 hover:bg-blue-300 dark:hover:bg-blue-800 disabled:bg-slate-100 dark:text-white")},m(s,o){I(s,t,o),n[9](t),e||(l=H(t,"click",n[6]),e=!0)},p:A,d(s){s&&j(t),n[9](null),e=!1,l()}}}function pt(n){let t;return{c(){t=p("p"),t.textContent="Already Indexed",d(t,"class","dark:text-white")},m(e,l){I(e,t,l)},p:A,d(e){e&&j(t)}}}function De(n){let t,e,l;function s(i){n[10](i)}let o={f:n[0]};return n[5]!==void 0&&(o.show_modal=n[5]),t=new ft({props:o}),ee.push(()=>Ue(t,"show_modal",s)),{c(){se(t.$$.fragment)},m(i,c){oe(t,i,c),l=!0},p(i,c){const h={};c&1&&(h.f=i[0]),!e&&c&32&&(e=!0,h.show_modal=i[5],Qe(()=>e=!1)),t.$set(h)},i(i){l||(G(t.$$.fragment,i),l=!0)},o(i){Q(t.$$.fragment,i),l=!1},d(i){re(t,i)}}}function _t(n){let t,e,l,s,o=n[0].video_title+"",i,c,h,a,b,w,g,z,x,k,y,q,_,m=n[4]&&Be(n);function E(u,T){return u[0].index_available===!0?pt:dt}let C=E(n),v=C(n),r=n[5]&&De(n);return{c(){t=p("div"),e=p("div"),l=p("div"),s=p("label"),i=W(o),c=L(),h=p("button"),a=p("img"),w=L(),m&&m.c(),g=L(),z=p("div"),v.c(),x=L(),r&&r.c(),k=ue(),d(s,"for",""),d(s,"class","mb-2 text-blue-500 dark:text-white h-auto w-full"),d(a,"class","h-auto w-full rounded-lg"),ie(a.src,b="/api/videoPoster/"+n[0].video_hash+".jpg")||d(a,"src",b),d(a,"alt","videos from selected directory"),d(h,"class","h-auto w-full shadow-xl"),d(l,"class","break-all"),d(z,"class","mx-auto mt-2"),d(e,"class","flex flex-col"),d(t,"class","mb-4 dark:text-white")},m(u,T){I(u,t,T),f(t,e),f(e,l),f(l,s),f(s,i),f(l,c),f(l,h),f(h,a),f(l,w),m&&m.m(l,null),f(e,g),f(e,z),v.m(z,null),I(u,x,T),r&&r.m(u,T),I(u,k,T),y=!0,q||(_=H(h,"click",n[7]),q=!0)},p(u,[T]){(!y||T&1)&&o!==(o=u[0].video_title+"")&&_e(i,o),(!y||T&1&&!ie(a.src,b="/api/videoPoster/"+u[0].video_hash+".jpg"))&&d(a,"src",b),u[4]?m?m.p(u,T):(m=Be(u),m.c(),m.m(l,null)):m&&(m.d(1),m=null),C===(C=E(u))&&v?v.p(u,T):(v.d(1),v=C(u),v&&(v.c(),v.m(z,null))),u[5]?r?(r.p(u,T),T&32&&G(r,1)):(r=De(u),r.c(),G(r,1),r.m(k.parentNode,k)):r&&(me(),Q(r,1,1,()=>{r=null}),be())},i(u){y||(G(r),y=!0)},o(u){Q(r),y=!1},d(u){u&&j(t),m&&m.d(),v.d(),u&&j(x),r&&r.d(u),u&&j(k),q=!1,_()}}}function ht(n,t,e){let{f:l=""}=t,{i:s=-1}=t;we(()=>{let y=ce+"indexStatus/"+l.video_hash;b(y)});let o;var i="0",c="unknown",h=!1;let a;async function b(y,q=0){let m=await(await fetch(y,{method:"GET"})).json();if(m.status_available){if(m.done==!0){o&&e(1,o.disabled=!0,o),e(0,l.index_available=!0,l),e(4,h=!1);return}q==0&&(e(0,l.index_available=!1,l),e(4,h=!0),o&&(e(1,o.disabled=!0,o),e(1,o.innerHTML="indexing in progress",o))),e(3,c=m.eta),e(2,i=m.progress),a&&clearTimeout(a),a=setTimeout(function(){b(y,q+1)},1e3)}}function w(){const y=ce+"videoIndex";let q=new FormData;q.append("video_absolute_path",l.video_absolute_path),fetch(y,{method:"POST",body:q}).then(_=>_.json()).then(_=>{let m=ce+"indexStatus/"+_.statusEndpoint;b(m)})}let g=!1;function z(){g?e(5,g=!1):(e(5,g=!0),Se.update(y=>s))}Se.subscribe(y=>{s!=y&&e(5,g=!1)});function x(y){ee[y?"unshift":"push"](()=>{o=y,e(1,o)})}function k(y){g=y,e(5,g)}return n.$$set=y=>{"f"in y&&e(0,l=y.f),"i"in y&&e(8,s=y.i)},[l,o,i,c,h,g,w,z,s,x,k]}class Je extends de{constructor(t){super(),pe(this,t,ht,_t,ae,{f:0,i:8})}}function Ae(n){let t;return{c(){t=p("div"),d(t,"class","absolute right-10 z-50 h-[40vh] bg-pink-200")},m(e,l){I(e,t,l)},d(e){e&&j(t)}}}function mt(n){let t,e,l,s,o,i,c,h,a,b,w,g,z,x,k,y,q,_,m,E,C;z=new $e({props:{darkMode:bt}});let v=n[2]&&Ae();return{c(){t=p("div"),e=p("span"),l=W("Total videos: "),s=p("strong"),o=W(n[0]),i=L(),c=p("div"),h=p("button"),h.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="dark:text-white w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path></svg>',a=L(),b=p("input"),w=L(),g=p("div"),se(z.$$.fragment),x=L(),k=p("div"),y=p("button"),y.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 011.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.107 1.204.165.397.505.71.93.78l.893.15c.543.09.94.56.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.893.149c-.425.07-.765.383-.93.78-.165.398-.143.854.107 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 01-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.397.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 01-.12-1.45l.527-.737c.25-.35.273-.806.108-1.204-.165-.397-.505-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.107-1.204l-.527-.738a1.125 1.125 0 01.12-1.45l.773-.773a1.125 1.125 0 011.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>',q=L(),v&&v.c(),_=ue(),d(e,"class","text-sm"),d(h,"class","hover:text-pink-500 cursor-pointer mr-3"),d(b,"class","bg-transparent focus:outline-none"),d(b,"placeholder","Search list"),d(c,"class","flex items-center select-none hover:border-b border-black dark:border-white"),d(y,"class","ml-3 rounded-full p-2 focus:outline-none hover:bg-blue-300 transition duration-500"),d(k,"class","flex items-center select-none"),d(g,"class","flex items-center select-none"),d(t,"class","mt-1 mb-4 flex items-center justify-between dark:text-white")},m(r,u){I(r,t,u),f(t,e),f(e,l),f(e,s),f(s,o),f(t,i),f(t,c),f(c,h),f(c,a),f(c,b),n[5](b),f(t,w),f(t,g),oe(z,g,null),f(g,x),f(g,k),f(k,y),I(r,q,u),v&&v.m(r,u),I(r,_,u),m=!0,E||(C=[H(h,"click",n[4]),H(b,"keyup",n[3]),H(y,"click",n[6])],E=!0)},p(r,[u]){(!m||u&1)&&_e(o,r[0]),r[2]?v||(v=Ae(),v.c(),v.m(_.parentNode,_)):v&&(v.d(1),v=null)},i(r){m||(G(z.$$.fragment,r),m=!0)},o(r){Q(z.$$.fragment,r),m=!1},d(r){r&&j(t),n[5](null),re(z),r&&j(q),v&&v.d(r),r&&j(_),E=!1,ve(C)}}}let bt=!1;function gt(n,t,e){let{items:l=0}=t,s,o=!1;const i=et();function c(){i("message",{text:this.value})}const h=()=>s.focus();function a(w){ee[w?"unshift":"push"](()=>{s=w,e(1,s)})}const b=()=>e(2,o=!o);return n.$$set=w=>{"items"in w&&e(0,l=w.items)},[l,s,o,c,h,a,b]}class kt extends de{constructor(t){super(),pe(this,t,gt,mt,ae,{items:0})}}function Pe(n,t,e){const l=n.slice();return l[15]=t[e],l[17]=e,l}function Fe(n,t,e){const l=n.slice();return l[15]=t[e],l[17]=e,l}function vt(n){let t,e,l,s,o,i,c,h,a=[],b=new Map,w,g,z,x,k=[],y=new Map,q,_={ctx:n,current:null,token:null,hasCatch:!1,pending:Mt,then:qt,catch:yt};Me(i=n[3],_);let m=n[2];const E=r=>r[15];for(let r=0;r<m.length;r+=1){let u=Fe(n,m,r),T=E(u);b.set(T,a[r]=Ne(T,u))}let C=n[1];const v=r=>r[15];for(let r=0;r<C.length;r+=1){let u=Pe(n,C,r),T=v(u);y.set(T,k[r]=Oe(T,u))}return{c(){t=p("p"),e=W("Current selected directory: "),l=p("span"),s=W(n[0]),o=L(),_.block.c(),c=L(),h=p("div");for(let r=0;r<a.length;r+=1)a[r].c();w=L(),g=p("hr"),z=L(),x=p("div");for(let r=0;r<k.length;r+=1)k[r].c();d(l,"class","font-bold"),d(t,"class","dark:text-white"),d(h,"class","relative grid sm:grid-cols-6 2xl:grid-cols-8 min-[2400px]:grid-cols-12 gap-8 mt-6 grid-flow-row-dense"),d(x,"class","relative grid sm:grid-cols-3 2xl:grid-cols-5 min-[2400px]:grid-cols-9 gap-8 mt-6 grid-flow-row-dense")},m(r,u){I(r,t,u),f(t,e),f(t,l),f(l,s),I(r,o,u),_.block.m(r,_.anchor=u),_.mount=()=>c.parentNode,_.anchor=c,I(r,c,u),I(r,h,u);for(let T=0;T<a.length;T+=1)a[T].m(h,null);I(r,w,u),I(r,g,u),I(r,z,u),I(r,x,u);for(let T=0;T<k.length;T+=1)k[T].m(x,null);q=!0},p(r,u){n=r,(!q||u&1)&&_e(s,n[0]),_.ctx=n,u&8&&i!==(i=n[3])&&Me(i,_),u&4&&(m=n[2],me(),a=ke(a,u,E,1,n,m,b,h,ze,Ne,null,Fe),be()),u&2&&(C=n[1],me(),k=ke(k,u,v,1,n,C,y,x,ze,Oe,null,Pe),be())},i(r){if(!q){for(let u=0;u<m.length;u+=1)G(a[u]);for(let u=0;u<C.length;u+=1)G(k[u]);q=!0}},o(r){for(let u=0;u<a.length;u+=1)Q(a[u]);for(let u=0;u<k.length;u+=1)Q(k[u]);q=!1},d(r){r&&j(t),r&&j(o),_.block.d(r),_.token=null,_=null,r&&j(c),r&&j(h);for(let u=0;u<a.length;u+=1)a[u].d();r&&j(w),r&&j(g),r&&j(z),r&&j(x);for(let u=0;u<k.length;u+=1)k[u].d()}}}function wt(n){let t;return{c(){t=p("p"),t.textContent="Select a directory.",d(t,"class","dark:text-white text-2xl")},m(e,l){I(e,t,l)},p:A,i:A,o:A,d(e){e&&j(t)}}}function yt(n){return{c:A,m:A,d:A}}function qt(n){let t;return{c(){t=p("p"),d(t,"class","dark:text-white")},m(e,l){I(e,t,l)},d(e){e&&j(t)}}}function Mt(n){let t;return{c(){t=p("p"),t.textContent="Fetching data....",d(t,"class","dark:text-white")},m(e,l){I(e,t,l)},d(e){e&&j(t)}}}function Ne(n,t){let e,l,s;return l=new Je({props:{f:t[15],i:t[17]}}),{key:n,first:null,c(){e=ue(),se(l.$$.fragment),this.first=e},m(o,i){I(o,e,i),oe(l,o,i),s=!0},p(o,i){t=o;const c={};i&4&&(c.f=t[15]),i&4&&(c.i=t[17]),l.$set(c)},i(o){s||(G(l.$$.fragment,o),s=!0)},o(o){Q(l.$$.fragment,o),s=!1},d(o){o&&j(e),re(l,o)}}}function Oe(n,t){let e,l,s;return l=new Je({props:{f:t[15],i:t[17]}}),{key:n,first:null,c(){e=ue(),se(l.$$.fragment),this.first=e},m(o,i){I(o,e,i),oe(l,o,i),s=!0},p(o,i){t=o;const c={};i&2&&(c.f=t[15]),i&2&&(c.i=t[17]),l.$set(c)},i(o){s||(G(l.$$.fragment,o),s=!0)},o(o){Q(l.$$.fragment,o),s=!1},d(o){o&&j(e),re(l,o)}}}function Re(n){let t;return{c(){t=p("div"),t.innerHTML='<div class="absolute inset-0 bg-gray-900 opacity-75"></div>',d(t,"class","fixed inset-0 transition-opacity")},m(e,l){I(e,t,l)},d(e){e&&j(t)}}}function zt(n){let t,e,l,s,o,i,c,h,a,b,w,g,z,x,k,y,q,_,m,E,C,v,r;function u(V){n[11](V)}let T={};n[0]!==void 0&&(T.dirname=n[0]),e=new ot({props:T}),ee.push(()=>Ue(e,"dirname",u)),c=new kt({props:{items:n[2].length}}),c.$on("message",n[7]);const F=[wt,vt],P=[];function N(V,D){return V[0]?1:0}q=N(n),_=P[q]=F[q](n);let S=n[5]&&Re();return{c(){t=p("div"),se(e.$$.fragment),s=L(),o=p("main"),i=p("div"),se(c.$$.fragment),h=L(),a=p("input"),b=L(),w=p("label"),g=p("input"),z=W(`\r
        Include Subdirectories`),x=L(),k=p("button"),k.innerHTML="<span>Select video directory</span>",y=L(),_.c(),m=L(),S&&S.c(),E=ue(),d(a,"type","text"),d(a,"class","dark:text-white w-96 bg-transparent focus:outline-none border-b border-black dark:border-white"),d(a,"placeholder","Provide absolute path to video directory."),d(g,"type","checkbox"),d(w,"class","dark:text-white w-96 bg-transparent"),d(k,"class","items-center focus:outline-none rounded-lg my-3 py-2 px-6 mb-4 leading-none bg-blue-200 dark:bg-blue-600 hover:bg-blue-300 hover:dark:bg-blue-800 dark:text-white disabled:bg-slate-100"),d(i,"class","sm:px-12 max-sm:px-4 py-12 text-gray-700"),d(o,"class","max-md:flex flex-1 bg-gray-300 dark:bg-gray-600 overflow-y-auto"),d(t,"class","min-h-screen md:flex")},m(V,D){I(V,t,D),oe(e,t,null),f(t,s),f(t,o),f(o,i),oe(c,i,null),f(i,h),f(i,a),qe(a,n[6]),f(i,b),f(i,w),f(w,g),g.checked=n[4],f(w,z),f(i,x),f(i,k),f(i,y),P[q].m(i,null),I(V,m,D),S&&S.m(V,D),I(V,E,D),C=!0,v||(r=[H(a,"keydown",n[9]),H(a,"input",n[12]),H(g,"change",n[13]),H(k,"click",n[8])],v=!0)},p(V,[D]){const $={};!l&&D&1&&(l=!0,$.dirname=V[0],Qe(()=>l=!1)),e.$set($);const te={};D&4&&(te.items=V[2].length),c.$set(te),D&64&&a.value!==V[6]&&qe(a,V[6]),D&16&&(g.checked=V[4]);let Y=q;q=N(V),q===Y?P[q].p(V,D):(me(),Q(P[Y],1,1,()=>{P[Y]=null}),be(),_=P[q],_?_.p(V,D):(_=P[q]=F[q](V),_.c()),G(_,1),_.m(i,null)),V[5]?S||(S=Re(),S.c(),S.m(E.parentNode,E)):S&&(S.d(1),S=null)},i(V){C||(G(e.$$.fragment,V),G(c.$$.fragment,V),G(_),C=!0)},o(V){Q(e.$$.fragment,V),Q(c.$$.fragment,V),Q(_),C=!1},d(V){V&&j(t),re(e),re(c),P[q].d(),V&&j(m),S&&S.d(V),V&&j(E),v=!1,ve(r)}}}async function Tt(n){let t="/api/videoPoster/"+n,l=await(await fetch(t)).blob();return await URL.createObjectURL(l)}function St(n,t,e){we(()=>{let _=localStorage.getItem("dirname");_&&(e(0,l=_),console.log(l))}),ge.set(!1);let l="",s=[],o=[],i="",c,h=!1;async function a(_="xxxxxx",m=!1){m==!1&&(e(1,s=[]),e(2,o=[]));const E=ce+"/videos";let C=new FormData;C.append("video_directory",l),C.append("include_subdirectories",h.toString()),m&&C.append("data_generation_id",_);const v=await fetch(E,{method:"POST",body:C});if(v.ok){let r=await v.json();if(r.query_done==!0)return;{let T=r.data_generation_id,F=r.video_hash,P=await Tt(F);r.poster_url=P,s.push(r),e(1,s),await a(T,!0)}}else throw new Error(v)}function b(_){e(10,i=_.detail.text.toLowerCase())}var w=!1;ge.subscribe(_=>{e(5,w=_),console.log("dark bg value:",_)});let g;function z(){g&&(e(0,l=g),localStorage.setItem("dirname",l))}function x(_){_.key==="Enter"&&z()}function k(_){l=_,e(0,l)}function y(){g=this.value,e(6,g)}function q(){h=this.checked,e(4,h)}return n.$$.update=()=>{n.$$.dirty&1026&&s&&(i.length>0?e(2,o=s.filter(_=>_.video_title.toLowerCase().search(i)!=-1)):e(2,o=[])),n.$$.dirty&1&&l&&e(3,c=a())},[l,s,o,c,h,w,g,b,z,x,i,k,y,q]}class Vt extends de{constructor(t){super(),pe(this,t,St,zt,ae,{})}}new Vt({target:document.getElementById("app")});
