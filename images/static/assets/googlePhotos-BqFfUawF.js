var er=Object.defineProperty;var Ke=t=>{throw TypeError(t)};var nr=(t,e,n)=>e in t?er(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var C=(t,e,n)=>nr(t,typeof e!="symbol"?e+"":e,n),Ee=(t,e,n)=>e.has(t)||Ke("Cannot "+n);var _=(t,e,n)=>(Ee(t,e,"read from private field"),n?n.call(t):e.get(t)),T=(t,e,n)=>e.has(t)?Ke("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),j=(t,e,n,r)=>(Ee(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),vt=(t,e,n)=>(Ee(t,e,"access private method"),n);import{L as rr,f as re,e as se}from"./utils-BSuwgFyC.js";const sr="5";var cn;typeof window<"u"&&((cn=window.__svelte??(window.__svelte={})).v??(cn.v=new Set)).add(sr);let te=!1,ir=!1;function lr(){te=!0}lr();const ar=2,dn="[",hn="[!",_n="]",Ot={},A=Symbol(),vn=!1;var pn=Array.isArray,or=Array.prototype.indexOf,fr=Array.from,ue=Object.keys,Ft=Object.defineProperty,St=Object.getOwnPropertyDescriptor,ur=Object.getOwnPropertyDescriptors,cr=Object.prototype,dr=Array.prototype,gn=Object.getPrototypeOf,ze=Object.isExtensible;function hr(t){return t()}function ce(t){for(var e=0;e<t.length;e++)t[e]()}function _r(){var t,e,n=new Promise((r,s)=>{t=r,e=s});return{promise:n,resolve:t,reject:e}}const U=2,wn=4,be=8,Mt=16,tt=32,dt=64,bn=128,Y=256,de=512,S=1024,H=2048,ht=4096,ot=8192,Ut=16384,Fe=32768,Le=65536,Xe=1<<17,vr=1<<18,Ie=1<<19,$n=1<<20,ke=1<<21,Me=1<<22,$t=1<<23,Vt=Symbol("$state"),pr=Symbol("legacy props"),Ue=new class extends Error{constructor(){super(...arguments);C(this,"name","StaleReactionError");C(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}},yn=3,he=8;function gr(){throw new Error("https://svelte.dev/e/await_outside_boundary")}function wr(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function br(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function $r(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function yr(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function mr(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Er(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function xr(){throw new Error("https://svelte.dev/e/hydration_failed")}function kr(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ar(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Tr(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function $e(t){console.warn("https://svelte.dev/e/hydration_mismatch")}let D=!1;function Tt(t){D=t}let E;function ft(t){if(t===null)throw $e(),Ot;return E=t}function qe(){return ft(Et(E))}function L(t){if(D){if(Et(E)!==null)throw $e(),Ot;E=t}}function Or(t=1){if(D){for(var e=t,n=E;e--;)n=Et(n);E=n}}function Sr(){for(var t=0,e=E;;){if(e.nodeType===he){var n=e.data;if(n===_n){if(t===0)return e;t-=1}else(n===dn||n===hn)&&(t+=1)}var r=Et(e);e.remove(),e=r}}function Cr(t){if(!t||t.nodeType!==he)throw $e(),Ot;return t.data}function mn(t){return t===this.v}function Rr(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function En(t){return!Rr(t,this.v)}let y=null;function _e(t){y=t}function xn(t,e=!1,n){y={p:y,c:null,e:null,s:t,x:null,l:te&&!e?{s:null,u:null,$:[]}:null}}function kn(t){var e=y,n=e.e;if(n!==null){e.e=null;for(var r of n)Mn(r)}return y=e.p,{}}function ee(){return!te||y!==null&&y.l===null}const Nr=new WeakMap;function Pr(t){var e=w;if(e===null)return p.f|=$t,t;if((e.f&Fe)===0){if((e.f&bn)===0)throw!e.parent&&t instanceof Error&&An(t),t;e.b.error(t)}else Be(t,e)}function Be(t,e){for(;e!==null;){if((e.f&bn)!==0)try{e.b.error(t);return}catch(n){t=n}e=e.parent}throw t instanceof Error&&An(t),t}function An(t){const e=Nr.get(t);e&&(Ft(t,"message",{value:e.message}),Ft(t,"stack",{value:e.stack}))}let Wt=[],Ae=[];function Tn(){var t=Wt;Wt=[],ce(t)}function jr(){var t=Ae;Ae=[],ce(t)}function Dr(t){Wt.length===0&&queueMicrotask(Tn),Wt.push(t)}function Fr(){Wt.length>0&&Tn(),Ae.length>0&&jr()}function Lr(){for(var t=w.b;t!==null&&!t.has_pending_snippet();)t=t.parent;return t===null&&gr(),t}function Ge(t){var e=U|H,n=p!==null&&(p.f&U)!==0?p:null;return w===null||n!==null&&(n.f&Y)!==0?e|=Y:w.f|=Ie,{ctx:y,deps:null,effects:null,equals:mn,f:e,fn:t,reactions:null,rv:0,v:A,wv:0,parent:n??w,ac:null}}function Ir(t,e){let n=w;n===null&&br();var r=n.b,s=void 0,i=He(A),l=null,a=!p;return Zr(()=>{try{var o=t()}catch(d){o=Promise.reject(d)}var f=()=>o;s=(l==null?void 0:l.then(f,f))??Promise.resolve(o),l=s;var u=k,c=r.pending;a&&(r.update_pending_count(1),c||u.increment());const v=(d,h=void 0)=>{l=null,c||u.activate(),h?h!==Ue&&(i.f|=$t,Se(i,h)):((i.f&$t)!==0&&(i.f^=$t),Se(i,d)),a&&(r.update_pending_count(-1),c||u.decrement()),Cn()};if(s.then(v,d=>v(null,d||"unknown")),u)return()=>{queueMicrotask(()=>u.neuter())}}),new Promise(o=>{function f(u){function c(){u===s?o(i):f(s)}u.then(c,c)}f(s)})}function Mr(t){const e=Ge(t);return e.equals=En,e}function On(t){var e=t.effects;if(e!==null){t.effects=null;for(var n=0;n<e.length;n+=1)ut(e[n])}}function Ur(t){for(var e=t.parent;e!==null;){if((e.f&U)===0)return e;e=e.parent}return null}function Ye(t){var e,n=w;ct(Ur(t));try{On(t),e=Kn(t)}finally{ct(n)}return e}function Sn(t){var e=Ye(t);if(t.equals(e)||(t.v=e,t.wv=Wn()),!qt)if(it!==null)it.set(t,t.v);else{var n=(lt||(t.f&Y)!==0)&&t.deps!==null?ht:S;F(t,n)}}function qr(t,e,n){const r=ee()?Ge:Mr;if(e.length===0){n(t.map(r));return}var s=k,i=w,l=Br(),a=Lr();Promise.all(e.map(o=>Ir(o))).then(o=>{s==null||s.activate(),l();try{n([...t.map(r),...o])}catch(f){(i.f&Ut)===0&&Be(f,i)}s==null||s.deactivate(),Cn()}).catch(o=>{a.error(o)})}function Br(){var t=w,e=p,n=y;return function(){ct(t),X(e),_e(n)}}function Cn(){ct(null),X(null),_e(null)}const Gt=new Set;let k=null,it=null,Ze=new Set,ve=[];function Rn(){const t=ve.shift();ve.length>0&&queueMicrotask(Rn),t()}let mt=[],ye=null,Te=!1,le=!1;var Nt,Pt,rt,zt,Xt,wt,jt,bt,st,Dt,Zt,Qt,W,Nn,ae,Oe;const we=class we{constructor(){T(this,W);C(this,"current",new Map);T(this,Nt,new Map);T(this,Pt,new Set);T(this,rt,0);T(this,zt,null);T(this,Xt,!1);T(this,wt,[]);T(this,jt,[]);T(this,bt,[]);T(this,st,[]);T(this,Dt,[]);T(this,Zt,[]);T(this,Qt,[]);C(this,"skipped_effects",new Set)}process(e){var i;mt=[];var n=null;if(Gt.size>1){n=new Map,it=new Map;for(const[l,a]of this.current)n.set(l,{v:l.v,wv:l.wv}),l.v=a;for(const l of Gt)if(l!==this)for(const[a,o]of _(l,Nt))n.has(a)||(n.set(a,{v:a.v,wv:a.wv}),a.v=o)}for(const l of e)vt(this,W,Nn).call(this,l);if(_(this,wt).length===0&&_(this,rt)===0){vt(this,W,Oe).call(this);var r=_(this,bt),s=_(this,st);j(this,bt,[]),j(this,st,[]),j(this,Dt,[]),k=null,Qe(r),Qe(s),k===null?k=this:Gt.delete(this),(i=_(this,zt))==null||i.resolve()}else vt(this,W,ae).call(this,_(this,bt)),vt(this,W,ae).call(this,_(this,st)),vt(this,W,ae).call(this,_(this,Dt));if(n){for(const[l,{v:a,wv:o}]of n)l.wv<=o&&(l.v=a);it=null}for(const l of _(this,wt))Rt(l);for(const l of _(this,jt))Rt(l);j(this,wt,[]),j(this,jt,[])}capture(e,n){_(this,Nt).has(e)||_(this,Nt).set(e,n),this.current.set(e,e.v)}activate(){k=this}deactivate(){k=null;for(const e of Ze)if(Ze.delete(e),e(),k!==null)break}neuter(){j(this,Xt,!0)}flush(){mt.length>0?Pn():vt(this,W,Oe).call(this),k===this&&(_(this,rt)===0&&Gt.delete(this),this.deactivate())}increment(){j(this,rt,_(this,rt)+1)}decrement(){if(j(this,rt,_(this,rt)-1),_(this,rt)===0){for(const e of _(this,Zt))F(e,H),It(e);for(const e of _(this,Qt))F(e,ht),It(e);j(this,bt,[]),j(this,st,[]),this.flush()}else this.deactivate()}add_callback(e){_(this,Pt).add(e)}settled(){return(_(this,zt)??j(this,zt,_r())).promise}static ensure(){if(k===null){const e=k=new we;Gt.add(k),le||we.enqueue(()=>{k===e&&e.flush()})}return k}static enqueue(e){ve.length===0&&queueMicrotask(Rn),ve.unshift(e)}};Nt=new WeakMap,Pt=new WeakMap,rt=new WeakMap,zt=new WeakMap,Xt=new WeakMap,wt=new WeakMap,jt=new WeakMap,bt=new WeakMap,st=new WeakMap,Dt=new WeakMap,Zt=new WeakMap,Qt=new WeakMap,W=new WeakSet,Nn=function(e){var u;e.f^=S;for(var n=e.first;n!==null;){var r=n.f,s=(r&(tt|dt))!==0,i=s&&(r&S)!==0,l=i||(r&ot)!==0||this.skipped_effects.has(n);if(!l&&n.fn!==null){if(s)n.f^=S;else if((r&wn)!==0)_(this,st).push(n);else if((r&S)===0)if((r&Me)!==0){var a=(u=n.b)!=null&&u.pending?_(this,jt):_(this,wt);a.push(n)}else me(n)&&((n.f&Mt)!==0&&_(this,Dt).push(n),Rt(n));var o=n.first;if(o!==null){n=o;continue}}var f=n.parent;for(n=n.next;n===null&&f!==null;)n=f.next,f=f.parent}},ae=function(e){for(const n of e)((n.f&H)!==0?_(this,Zt):_(this,Qt)).push(n),F(n,S);e.length=0},Oe=function(){if(!_(this,Xt))for(const e of _(this,Pt))e();_(this,Pt).clear()};let Lt=we;function Gr(t){var e=le;le=!0;try{for(var n;;){if(Fr(),mt.length===0&&(k==null||k.flush(),mt.length===0))return ye=null,n;Pn()}}finally{le=e}}function Pn(){var t=Ct;Te=!0;try{var e=0;for(nn(!0);mt.length>0;){var n=Lt.ensure();if(e++>1e3){var r,s;Yr()}n.process(mt),at.clear()}}finally{Te=!1,nn(t),ye=null}}function Yr(){try{Er()}catch(t){Be(t,ye)}}let gt=null;function Qe(t){var e=t.length;if(e!==0){for(var n=0;n<e;){var r=t[n++];if((r.f&(Ut|ot))===0&&me(r)&&(gt=[],Rt(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?Bn(r):r.fn=null),gt.length>0)){at.clear();for(const s of gt)Rt(s);gt=[]}}gt=null}}function It(t){for(var e=ye=t;e.parent!==null;){e=e.parent;var n=e.f;if(Te&&e===w&&(n&Mt)!==0)return;if((n&(dt|tt))!==0){if((n&S)===0)return;e.f^=S}}mt.push(e)}const at=new Map;function He(t,e){var n={f:0,v:t,reactions:null,equals:mn,rv:0,wv:0};return n}function et(t,e){const n=He(t);return is(n),n}function oe(t,e=!1,n=!0){var s;const r=He(t);return e||(r.equals=En),te&&n&&y!==null&&y.l!==null&&((s=y.l).s??(s.s=[])).push(r),r}function N(t,e,n=!1){p!==null&&(!z||(p.f&Xe)!==0)&&ee()&&(p.f&(U|Mt|Me|Xe))!==0&&!(P!=null&&P.includes(t))&&Tr();let r=n?Yt(e):e;return Se(t,r)}function Se(t,e){if(!t.equals(e)){var n=t.v;qt?at.set(t,e):at.set(t,n),t.v=e;var r=Lt.ensure();r.capture(t,n),(t.f&U)!==0&&((t.f&H)!==0&&Ye(t),F(t,(t.f&Y)===0?S:ht)),t.wv=Wn(),jn(t,H),ee()&&w!==null&&(w.f&S)!==0&&(w.f&(tt|dt))===0&&(B===null?ls([t]):B.push(t))}return e}function xe(t){N(t,t.v+1)}function jn(t,e){var n=t.reactions;if(n!==null)for(var r=ee(),s=n.length,i=0;i<s;i++){var l=n[i],a=l.f;if(!(!r&&l===w)){var o=(a&H)===0;o&&F(l,e),(a&U)!==0?jn(l,ht):o&&((a&Mt)!==0&&gt!==null&&gt.push(l),It(l))}}}function Yt(t){if(typeof t!="object"||t===null||Vt in t)return t;const e=gn(t);if(e!==cr&&e!==dr)return t;var n=new Map,r=pn(t),s=et(0),i=yt,l=a=>{if(yt===i)return a();var o=p,f=yt;X(null),sn(i);var u=a();return X(o),sn(f),u};return r&&n.set("length",et(t.length)),new Proxy(t,{defineProperty(a,o,f){(!("value"in f)||f.configurable===!1||f.enumerable===!1||f.writable===!1)&&kr();var u=n.get(o);return u===void 0?u=l(()=>{var c=et(f.value);return n.set(o,c),c}):N(u,f.value,!0),!0},deleteProperty(a,o){var f=n.get(o);if(f===void 0){if(o in a){const u=l(()=>et(A));n.set(o,u),xe(s)}}else N(f,A),xe(s);return!0},get(a,o,f){var d;if(o===Vt)return t;var u=n.get(o),c=o in a;if(u===void 0&&(!c||(d=St(a,o))!=null&&d.writable)&&(u=l(()=>{var h=Yt(c?a[o]:A),m=et(h);return m}),n.set(o,u)),u!==void 0){var v=O(u);return v===A?void 0:v}return Reflect.get(a,o,f)},getOwnPropertyDescriptor(a,o){var f=Reflect.getOwnPropertyDescriptor(a,o);if(f&&"value"in f){var u=n.get(o);u&&(f.value=O(u))}else if(f===void 0){var c=n.get(o),v=c==null?void 0:c.v;if(c!==void 0&&v!==A)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return f},has(a,o){var v;if(o===Vt)return!0;var f=n.get(o),u=f!==void 0&&f.v!==A||Reflect.has(a,o);if(f!==void 0||w!==null&&(!u||(v=St(a,o))!=null&&v.writable)){f===void 0&&(f=l(()=>{var d=u?Yt(a[o]):A,h=et(d);return h}),n.set(o,f));var c=O(f);if(c===A)return!1}return u},set(a,o,f,u){var x;var c=n.get(o),v=o in a;if(r&&o==="length")for(var d=f;d<c.v;d+=1){var h=n.get(d+"");h!==void 0?N(h,A):d in a&&(h=l(()=>et(A)),n.set(d+"",h))}if(c===void 0)(!v||(x=St(a,o))!=null&&x.writable)&&(c=l(()=>et(void 0)),N(c,Yt(f)),n.set(o,c));else{v=c.v!==A;var m=l(()=>Yt(f));N(c,m)}var b=Reflect.getOwnPropertyDescriptor(a,o);if(b!=null&&b.set&&b.set.call(u,f),!v){if(r&&typeof o=="string"){var g=n.get("length"),$=Number(o);Number.isInteger($)&&$>=g.v&&N(g,$+1)}xe(s)}return!0},ownKeys(a){O(s);var o=Reflect.ownKeys(a).filter(c=>{var v=n.get(c);return v===void 0||v.v!==A});for(var[f,u]of n)u.v!==A&&!(f in a)&&o.push(f);return o},setPrototypeOf(){Ar()}})}var tn,Dn,Fn,Ln;function Ce(){if(tn===void 0){tn=window,Dn=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,n=Text.prototype;Fn=St(e,"firstChild").get,Ln=St(e,"nextSibling").get,ze(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),ze(n)&&(n.__t=void 0)}}function Jt(t=""){return document.createTextNode(t)}function pe(t){return Fn.call(t)}function Et(t){return Ln.call(t)}function I(t,e){if(!D)return pe(t);var n=pe(E);if(n===null)n=E.appendChild(Jt());else if(e&&n.nodeType!==yn){var r=Jt();return n==null||n.before(r),ft(r),r}return ft(n),n}function pt(t,e=1,n=!1){let r=D?E:t;for(var s;e--;)s=r,r=Et(r);if(!D)return r;if(n&&(r==null?void 0:r.nodeType)!==yn){var i=Jt();return r===null?s==null||s.after(i):r.before(i),ft(i),i}return ft(r),r}function Hr(t){t.textContent=""}function Vr(){return!1}function Ve(t){var e=p,n=w;X(null),ct(null);try{return t()}finally{X(e),ct(n)}}function In(t){w===null&&p===null&&mr(),p!==null&&(p.f&Y)!==0&&w===null&&yr(),qt&&$r()}function Wr(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function Z(t,e,n,r=!0){var s=w;s!==null&&(s.f&ot)!==0&&(t|=ot);var i={ctx:y,deps:null,nodes_start:null,nodes_end:null,f:t|H,first:null,fn:e,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{Rt(i),i.f|=Fe}catch(o){throw ut(i),o}else e!==null&&It(i);var l=n&&i.deps===null&&i.first===null&&i.nodes_start===null&&i.teardown===null&&(i.f&Ie)===0;if(!l&&r&&(s!==null&&Wr(i,s),p!==null&&(p.f&U)!==0&&(t&dt)===0)){var a=p;(a.effects??(a.effects=[])).push(i)}return i}function Jr(t){const e=Z(be,null,!1);return F(e,S),e.teardown=t,e}function Re(t){In();var e=w.f,n=!p&&(e&tt)!==0&&(e&Fe)===0;if(n){var r=y;(r.e??(r.e=[])).push(t)}else return Mn(t)}function Mn(t){return Z(wn|$n,t,!1)}function Kr(t){return In(),Z(be|$n,t,!0)}function zr(t){Lt.ensure();const e=Z(dt,t,!0);return()=>{ut(e)}}function Xr(t){Lt.ensure();const e=Z(dt,t,!0);return(n={})=>new Promise(r=>{n.outro?Gn(e,()=>{ut(e),r(void 0)}):(ut(e),r(void 0))})}function Zr(t){return Z(Me|Ie,t,!0)}function Qr(t,e=0){return Z(be|e,t,!0)}function en(t,e=[],n=[]){qr(e,n,r=>{Z(be,()=>t(...r.map(O)),!0)})}function ts(t,e=0){var n=Z(Mt|e,t,!0);return n}function Ne(t,e=!0){return Z(tt,t,!0,e)}function Un(t){var e=t.teardown;if(e!==null){const n=qt,r=p;rn(!0),X(null);try{e.call(null)}finally{rn(n),X(r)}}}function qn(t,e=!1){var n=t.first;for(t.first=t.last=null;n!==null;){const s=n.ac;s!==null&&Ve(()=>{s.abort(Ue)});var r=n.next;(n.f&dt)!==0?n.parent=null:ut(n,e),n=r}}function es(t){for(var e=t.first;e!==null;){var n=e.next;(e.f&tt)===0&&ut(e),e=n}}function ut(t,e=!0){var n=!1;(e||(t.f&vr)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(ns(t.nodes_start,t.nodes_end),n=!0),qn(t,e&&!n),ge(t,0),F(t,Ut);var r=t.transitions;if(r!==null)for(const i of r)i.stop();Un(t);var s=t.parent;s!==null&&s.first!==null&&Bn(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function ns(t,e){for(;t!==null;){var n=t===e?null:Et(t);t.remove(),t=n}}function Bn(t){var e=t.parent,n=t.prev,r=t.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=n))}function Gn(t,e){var n=[];Yn(t,n,!0),rs(n,()=>{ut(t),e&&e()})}function rs(t,e){var n=t.length;if(n>0){var r=()=>--n||e();for(var s of t)s.out(r)}else e()}function Yn(t,e,n){if((t.f&ot)===0){if(t.f^=ot,t.transitions!==null)for(const l of t.transitions)(l.is_global||n)&&e.push(l);for(var r=t.first;r!==null;){var s=r.next,i=(r.f&Le)!==0||(r.f&tt)!==0;Yn(r,e,i?n:!1),r=s}}}function ss(t){Hn(t,!0)}function Hn(t,e){if((t.f&ot)!==0){t.f^=ot,(t.f&S)===0&&(F(t,H),It(t));for(var n=t.first;n!==null;){var r=n.next,s=(n.f&Le)!==0||(n.f&tt)!==0;Hn(n,s?e:!1),n=r}if(t.transitions!==null)for(const i of t.transitions)(i.is_global||e)&&i.in()}}let Ct=!1;function nn(t){Ct=t}let qt=!1;function rn(t){qt=t}let p=null,z=!1;function X(t){p=t}let w=null;function ct(t){w=t}let P=null;function is(t){p!==null&&(P===null?P=[t]:P.push(t))}let R=null,M=0,B=null;function ls(t){B=t}let Vn=1,Kt=0,yt=Kt;function sn(t){yt=t}let lt=!1;function Wn(){return++Vn}function me(t){var c;var e=t.f;if((e&H)!==0)return!0;if((e&ht)!==0){var n=t.deps,r=(e&Y)!==0;if(n!==null){var s,i,l=(e&de)!==0,a=r&&w!==null&&!lt,o=n.length;if((l||a)&&(w===null||(w.f&Ut)===0)){var f=t,u=f.parent;for(s=0;s<o;s++)i=n[s],(l||!((c=i==null?void 0:i.reactions)!=null&&c.includes(f)))&&(i.reactions??(i.reactions=[])).push(f);l&&(f.f^=de),a&&u!==null&&(u.f&Y)===0&&(f.f^=Y)}for(s=0;s<o;s++)if(i=n[s],me(i)&&Sn(i),i.wv>t.wv)return!0}(!r||w!==null&&!lt)&&F(t,S)}return!1}function Jn(t,e,n=!0){var r=t.reactions;if(r!==null&&!(P!=null&&P.includes(t)))for(var s=0;s<r.length;s++){var i=r[s];(i.f&U)!==0?Jn(i,e,!1):e===i&&(n?F(i,H):(i.f&S)!==0&&F(i,ht),It(i))}}function Kn(t){var m;var e=R,n=M,r=B,s=p,i=lt,l=P,a=y,o=z,f=yt,u=t.f;R=null,M=0,B=null,lt=(u&Y)!==0&&(z||!Ct||p===null),p=(u&(tt|dt))===0?t:null,P=null,_e(t.ctx),z=!1,yt=++Kt,t.ac!==null&&(Ve(()=>{t.ac.abort(Ue)}),t.ac=null);try{t.f|=ke;var c=t.fn,v=c(),d=t.deps;if(R!==null){var h;if(ge(t,M),d!==null&&M>0)for(d.length=M+R.length,h=0;h<R.length;h++)d[M+h]=R[h];else t.deps=d=R;if(!lt||(u&U)!==0&&t.reactions!==null)for(h=M;h<d.length;h++)((m=d[h]).reactions??(m.reactions=[])).push(t)}else d!==null&&M<d.length&&(ge(t,M),d.length=M);if(ee()&&B!==null&&!z&&d!==null&&(t.f&(U|ht|H))===0)for(h=0;h<B.length;h++)Jn(B[h],t);return s!==null&&s!==t&&(Kt++,B!==null&&(r===null?r=B:r.push(...B))),(t.f&$t)!==0&&(t.f^=$t),v}catch(b){return Pr(b)}finally{t.f^=ke,R=e,M=n,B=r,p=s,lt=i,P=l,_e(a),z=o,yt=f}}function as(t,e){let n=e.reactions;if(n!==null){var r=or.call(n,t);if(r!==-1){var s=n.length-1;s===0?n=e.reactions=null:(n[r]=n[s],n.pop())}}n===null&&(e.f&U)!==0&&(R===null||!R.includes(e))&&(F(e,ht),(e.f&(Y|de))===0&&(e.f^=de),On(e),ge(e,0))}function ge(t,e){var n=t.deps;if(n!==null)for(var r=e;r<n.length;r++)as(t,n[r])}function Rt(t){var e=t.f;if((e&Ut)===0){F(t,S);var n=w,r=Ct;w=t,Ct=!0;try{(e&Mt)!==0?es(t):qn(t),Un(t);var s=Kn(t);t.teardown=typeof s=="function"?s:null,t.wv=Vn;var i;vn&&ir&&(t.f&H)!==0&&t.deps}finally{Ct=r,w=n}}}function O(t){var e=t.f,n=(e&U)!==0;if(p!==null&&!z){var r=w!==null&&(w.f&Ut)!==0;if(!r&&!(P!=null&&P.includes(t))){var s=p.deps;if((p.f&ke)!==0)t.rv<Kt&&(t.rv=Kt,R===null&&s!==null&&s[M]===t?M++:R===null?R=[t]:(!lt||!R.includes(t))&&R.push(t));else{(p.deps??(p.deps=[])).push(t);var i=t.reactions;i===null?t.reactions=[p]:i.includes(p)||i.push(p)}}}else if(n&&t.deps===null&&t.effects===null){var l=t,a=l.parent;a!==null&&(a.f&Y)===0&&(l.f^=Y)}if(qt){if(at.has(t))return at.get(t);if(n){l=t;var o=l.v;return((l.f&S)===0&&l.reactions!==null||zn(l))&&(o=Ye(l)),at.set(l,o),o}}else if(n){if(l=t,it!=null&&it.has(l))return it.get(l);me(l)&&Sn(l)}if((t.f&$t)!==0)throw t.v;return t.v}function zn(t){if(t.v===A)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(at.has(e)||(e.f&U)!==0&&zn(e))return!0;return!1}function Xn(t){var e=z;try{return z=!0,t()}finally{z=e}}const os=-7169;function F(t,e){t.f=t.f&os|e}function fs(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(Vt in t)Pe(t);else if(!Array.isArray(t))for(let e in t){const n=t[e];typeof n=="object"&&n&&Vt in n&&Pe(n)}}}function Pe(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let r in t)try{Pe(t[r],e)}catch{}const n=gn(t);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=ur(n);for(let s in r){const i=r[s].get;if(i)try{i.call(t)}catch{}}}}}const us=new Set,ln=new Set;function cs(t,e,n,r={}){function s(i){if(r.capture||Ht.call(e,i),!i.cancelBubble)return Ve(()=>n==null?void 0:n.call(this,i))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Dr(()=>{e.addEventListener(t,s,r)}):e.addEventListener(t,s,r),s}function an(t,e,n,r,s){var i={capture:r,passive:s},l=cs(t,e,n,i);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&Jr(()=>{e.removeEventListener(t,l,i)})}let on=null;function Ht(t){var $;var e=this,n=e.ownerDocument,r=t.type,s=(($=t.composedPath)==null?void 0:$.call(t))||[],i=s[0]||t.target;on=t;var l=0,a=on===t&&t.__root;if(a){var o=s.indexOf(a);if(o!==-1&&(e===document||e===window)){t.__root=e;return}var f=s.indexOf(e);if(f===-1)return;o<=f&&(l=o)}if(i=s[l]||t.target,i!==e){Ft(t,"currentTarget",{configurable:!0,get(){return i||n}});var u=p,c=w;X(null),ct(null);try{for(var v,d=[];i!==null;){var h=i.assignedSlot||i.parentNode||i.host||null;try{var m=i["__"+r];if(m!=null&&(!i.disabled||t.target===i))if(pn(m)){var[b,...g]=m;b.apply(i,[t,...g])}else m.call(i,t)}catch(x){v?d.push(x):v=x}if(t.cancelBubble||h===e||h===null)break;i=h}if(v){for(let x of d)queueMicrotask(()=>{throw x});throw v}}finally{t.__root=e,delete t.currentTarget,X(u),ct(c)}}}function ds(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function je(t,e){var n=w;n.nodes_start===null&&(n.nodes_start=t,n.nodes_end=e)}function xt(t,e){var n=(e&ar)!==0,r,s=!t.startsWith("<!>");return()=>{if(D)return je(E,null),E;r===void 0&&(r=ds(s?t:"<!>"+t),r=pe(r));var i=n||Dn?document.importNode(r,!0):r.cloneNode(!0);return je(i,i),i}}function nt(t,e){if(D){w.nodes_end=E,qe();return}t!==null&&t.before(e)}const hs=["touchstart","touchmove"];function _s(t){return hs.includes(t)}function fn(t,e){var n=e==null?"":typeof e=="object"?e+"":e;n!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=n,t.nodeValue=n+"")}function We(t,e){return Zn(t,e)}function vs(t,e){Ce(),e.intro=e.intro??!1;const n=e.target,r=D,s=E;try{for(var i=pe(n);i&&(i.nodeType!==he||i.data!==dn);)i=Et(i);if(!i)throw Ot;Tt(!0),ft(i),qe();const l=Zn(t,{...e,anchor:i});if(E===null||E.nodeType!==he||E.data!==_n)throw $e(),Ot;return Tt(!1),l}catch(l){if(l instanceof Error&&l.message.split(`
`).some(a=>a.startsWith("https://svelte.dev/e/")))throw l;return l!==Ot&&console.warn("Failed to hydrate: ",l),e.recover===!1&&xr(),Ce(),Hr(n),Tt(!1),We(t,e)}finally{Tt(r),ft(s)}}const At=new Map;function Zn(t,{target:e,anchor:n,props:r={},events:s,context:i,intro:l=!0}){Ce();var a=new Set,o=c=>{for(var v=0;v<c.length;v++){var d=c[v];if(!a.has(d)){a.add(d);var h=_s(d);e.addEventListener(d,Ht,{passive:h});var m=At.get(d);m===void 0?(document.addEventListener(d,Ht,{passive:h}),At.set(d,1)):At.set(d,m+1)}}};o(fr(us)),ln.add(o);var f=void 0,u=Xr(()=>{var c=n??e.appendChild(Jt());return Ne(()=>{if(i){xn({});var v=y;v.c=i}s&&(r.$$events=s),D&&je(c,null),f=t(c,r)||{},D&&(w.nodes_end=E),i&&kn()}),()=>{var h;for(var v of a){e.removeEventListener(v,Ht);var d=At.get(v);--d===0?(document.removeEventListener(v,Ht),At.delete(v)):At.set(v,d)}ln.delete(o),c!==n&&((h=c.parentNode)==null||h.removeChild(c))}});return De.set(f,u),f}let De=new WeakMap;function ps(t,e){const n=De.get(t);return n?(De.delete(t),n(e)):Promise.resolve()}function gs(t){y===null&&wr(),te&&y.l!==null?ws(y).m.push(t):Re(()=>{const e=Xn(t);if(typeof e=="function")return e})}function ws(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}function ie(t,e,n=!1){D&&qe();var r=t,s=null,i=null,l=A,a=n?Le:0,o=!1;const f=(d,h=!0)=>{o=!0,v(h,d)};var u=null;function c(){u!==null&&(u.lastChild.remove(),r.before(u),u=null);var d=l?s:i,h=l?i:s;d&&ss(d),h&&Gn(h,()=>{l?i=null:s=null})}const v=(d,h)=>{if(l===(l=d))return;let m=!1;if(D){const J=Cr(r)===hn;!!l===J&&(r=Sr(),ft(r),Tt(!1),m=!0)}var b=Vr(),g=r;if(b&&(u=document.createDocumentFragment(),u.append(g=Jt())),l?s??(s=h&&Ne(()=>h(g))):i??(i=h&&Ne(()=>h(g))),b){var $=k,x=l?s:i,q=l?i:s;x&&$.skipped_effects.delete(x),q&&$.skipped_effects.add(q),$.add_callback(c)}else c();m&&Tt(!0)};ts(()=>{o=!1,e(f),o||v(null,null)},a),D&&(r=E)}function bs(t=!1){const e=y,n=e.l.u;if(!n)return;let r=()=>fs(e.s);if(t){let s=0,i={};const l=Ge(()=>{let a=!1;const o=e.s;for(const f in o)o[f]!==i[f]&&(i[f]=o[f],a=!0);return a&&s++,s});r=()=>O(l)}n.b.length&&Kr(()=>{un(e,r),ce(n.b)}),Re(()=>{const s=Xn(()=>n.m.map(hr));return()=>{for(const i of s)typeof i=="function"&&i()}}),n.a.length&&Re(()=>{un(e,r),ce(n.a)})}function un(t,e){if(t.l.s)for(const n of t.l.s)O(n);e()}function $s(t){return new ys(t)}var Q,G;class ys{constructor(e){T(this,Q);T(this,G);var i;var n=new Map,r=(l,a)=>{var o=oe(a,!1,!1);return n.set(l,o),o};const s=new Proxy({...e.props||{},$$events:{}},{get(l,a){return O(n.get(a)??r(a,Reflect.get(l,a)))},has(l,a){return a===pr?!0:(O(n.get(a)??r(a,Reflect.get(l,a))),Reflect.has(l,a))},set(l,a,o){return N(n.get(a)??r(a,o),o),Reflect.set(l,a,o)}});j(this,G,(e.hydrate?vs:We)(e.component,{target:e.target,anchor:e.anchor,props:s,context:e.context,intro:e.intro??!1,recover:e.recover})),(!((i=e==null?void 0:e.props)!=null&&i.$$host)||e.sync===!1)&&Gr(),j(this,Q,s.$$events);for(const l of Object.keys(_(this,G)))l==="$set"||l==="$destroy"||l==="$on"||Ft(this,l,{get(){return _(this,G)[l]},set(a){_(this,G)[l]=a},enumerable:!0});_(this,G).$set=l=>{Object.assign(s,l)},_(this,G).$destroy=()=>{ps(_(this,G))}}$set(e){_(this,G).$set(e)}$on(e,n){_(this,Q)[e]=_(this,Q)[e]||[];const r=(...s)=>n.call(this,...s);return _(this,Q)[e].push(r),()=>{_(this,Q)[e]=_(this,Q)[e].filter(s=>s!==r)}}$destroy(){_(this,G).$destroy()}}Q=new WeakMap,G=new WeakMap;let Qn;typeof HTMLElement=="function"&&(Qn=class extends HTMLElement{constructor(e,n,r){super();C(this,"$$ctor");C(this,"$$s");C(this,"$$c");C(this,"$$cn",!1);C(this,"$$d",{});C(this,"$$r",!1);C(this,"$$p_d",{});C(this,"$$l",{});C(this,"$$l_u",new Map);C(this,"$$me");this.$$ctor=e,this.$$s=n,r&&this.attachShadow({mode:"open"})}addEventListener(e,n,r){if(this.$$l[e]=this.$$l[e]||[],this.$$l[e].push(n),this.$$c){const s=this.$$c.$on(e,n);this.$$l_u.set(n,s)}super.addEventListener(e,n,r)}removeEventListener(e,n,r){if(super.removeEventListener(e,n,r),this.$$c){const s=this.$$l_u.get(n);s&&(s(),this.$$l_u.delete(n))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let e=function(s){return i=>{const l=document.createElement("slot");s!=="default"&&(l.name=s),nt(i,l)}};if(await Promise.resolve(),!this.$$cn||this.$$c)return;const n={},r=ms(this);for(const s of this.$$s)s in r&&(s==="default"&&!this.$$d.children?(this.$$d.children=e(s),n.default=!0):n[s]=e(s));for(const s of this.attributes){const i=this.$$g_p(s.name);i in this.$$d||(this.$$d[i]=fe(i,s.value,this.$$p_d,"toProp"))}for(const s in this.$$p_d)!(s in this.$$d)&&this[s]!==void 0&&(this.$$d[s]=this[s],delete this[s]);this.$$c=$s({component:this.$$ctor,target:this.shadowRoot||this,props:{...this.$$d,$$slots:n,$$host:this}}),this.$$me=zr(()=>{Qr(()=>{var s;this.$$r=!0;for(const i of ue(this.$$c)){if(!((s=this.$$p_d[i])!=null&&s.reflect))continue;this.$$d[i]=this.$$c[i];const l=fe(i,this.$$d[i],this.$$p_d,"toAttribute");l==null?this.removeAttribute(this.$$p_d[i].attribute||i):this.setAttribute(this.$$p_d[i].attribute||i,l)}this.$$r=!1})});for(const s in this.$$l)for(const i of this.$$l[s]){const l=this.$$c.$on(s,i);this.$$l_u.set(i,l)}this.$$l={}}}attributeChangedCallback(e,n,r){var s;this.$$r||(e=this.$$g_p(e),this.$$d[e]=fe(e,r,this.$$p_d,"toProp"),(s=this.$$c)==null||s.$set({[e]:this.$$d[e]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then(()=>{!this.$$cn&&this.$$c&&(this.$$c.$destroy(),this.$$me(),this.$$c=void 0)})}$$g_p(e){return ue(this.$$p_d).find(n=>this.$$p_d[n].attribute===e||!this.$$p_d[n].attribute&&n.toLowerCase()===e)||e}});function fe(t,e,n,r){var i;const s=(i=n[t])==null?void 0:i.type;if(e=s==="Boolean"&&typeof e!="boolean"?e!=null:e,!r||!n[t])return e;if(r==="toAttribute")switch(s){case"Object":case"Array":return e==null?null:JSON.stringify(e);case"Boolean":return e?"":null;case"Number":return e??null;default:return e}else switch(s){case"Object":case"Array":return e&&JSON.parse(e);case"Boolean":return e;case"Number":return e!=null?+e:e;default:return e}}function ms(t){const e={};return t.childNodes.forEach(n=>{e[n.slot||"default"]=!0}),e}function Es(t,e,n,r,s,i){let l=class extends Qn{constructor(){super(t,n,s),this.$$p_d=e}static get observedAttributes(){return ue(e).map(a=>(e[a].attribute||a).toLowerCase())}};return ue(e).forEach(a=>{Ft(l.prototype,a,{get(){return this.$$c&&a in this.$$c?this.$$c[a]:this.$$d[a]},set(o){var c;o=fe(a,o,e),this.$$d[a]=o;var f=this.$$c;if(f){var u=(c=St(f,a))==null?void 0:c.get;u?f[a]=o:f.$set({[a]:o})}}})}),r.forEach(a=>{Ft(l.prototype,a,{get(){var o;return(o=this.$$c)==null?void 0:o[a]}})}),t.element=l,l}var xs=xt('<span class="inline-flex items-center gap-1 rounded-full bg-emerald-100 text-emerald-700 px-3 py-1 text-xs font-medium border border-emerald-200"><span class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse"></span> Active</span>'),ks=xt('<span class="inline-flex items-center gap-1 rounded-full bg-rose-100 text-rose-700 px-3 py-1 text-xs font-medium border border-rose-200"><span class="w-2 h-2 rounded-full bg-rose-500"></span> Inactive</span>'),As=xt(`<p class="text-xs text-gray-500">Your client is registered but not yet activated. Click Activate to
            start the OAuth flow.</p>`),Ts=xt('<div class="rounded-lg border shadow-sm bg-white/70 backdrop-blur p-5 space-y-4"><header class="flex items-center justify-between"><h2 class="text-lg font-semibold">Google Photos OAuth Client</h2> <!></header> <div class="text-sm"><p class="font-mono break-all bg-gray-50 border rounded p-3 text-gray-700" aria-label="Client ID"> </p></div> <!></div>'),Os=xt('<div class="rounded-lg border shadow-sm bg-white/70 backdrop-blur overflow-hidden"><div class="p-5 space-y-4"><h2 class="text-lg font-semibold">Connect Google Photos</h2> <ul class="text-sm list-disc pl-5 space-y-1 text-gray-700"><li>Create an OAuth Client (Web application) in Google Cloud Console.</li> <li>Enable <b>Google Photos Library API</b>.</li> <li>Add redirect URI: <code class="bg-gray-100 px-1 py-0.5 rounded text-xs">http://localhost:5000/api/OAuthCallback</code></li> <li>Your data stays between you and Google.</li></ul> <div class="mt-4"><span class="block text-xs font-medium mb-1 text-gray-600">Upload client_secret.json</span> <label class="group cursor-pointer w-full"><div class="flex flex-col items-center justify-center gap-2 rounded border-2 border-dashed p-6 bg-gradient-to-br from-blue-50 to-blue-100 hover:from-blue-100 hover:to-blue-200 transition"><span class="text-sm font-medium text-blue-700 group-hover:scale-105 transition"> </span> <span class="text-[11px] text-blue-500">Only .json generated by Google Cloud Console</span></div> <input id="file" type="file" class="hidden" accept=".json,application/json" aria-label="Upload Google OAuth client secret JSON"/></label></div></div></div>'),Ss=xt('<div class="flex justify-center"><button class="bg-blue-600 hover:bg-blue-700 disabled:bg-blue-300 text-white font-medium px-5 py-2.5 rounded-md shadow-sm transition text-sm">Activate Google Photos</button></div>'),Cs=xt('<div class="w-full flex items-center h-screen justify-center px-4"><div class="w-full max-w-2xl space-y-6"><!> <!></div></div>');function tr(t,e){xn(e,!1),new rr({title:"Google Photos - Hachi",currentPage:"/google-photos.html",showNavbar:!0});let n=oe(null),r=oe(!1),s=oe("Upload Client secret json");async function i(){const g=await(await re(se.BASE_URL+"/api/gClientInfo")).json();g.client_id_available&&(N(n,g),N(r,!O(n).is_activated))}gs(()=>{i()});async function l(){const g=await(await re(se.BASE_URL+"/api/statusGAuthFlow")).json();if(!g.finished)return setTimeout(l,2e3);N(r,!1),alert("Account Activation: "+g.status.toString()),i()}async function a(b){b.preventDefault();const g=b.target;if(g.disabled=!0,g.innerText="activation in progress...",!(await re(se.BASE_URL+"/api/beginGAuthFlow")).ok){alert("Some error occurred while starting authorization flow!"),g.disabled=!1,g.innerText="Activate Google Photos";return}setTimeout(l,1e3)}async function o(b){var J;const g="http://localhost:5000/api/OAuthCallback";N(s,"upload in progress.."),b.preventDefault();const $=b.target;$.disabled=!0;const x=(J=$.files)==null?void 0:J[0];if(!x){alert("No file selected"),$.disabled=!1,N(s,"Upload Client secret json");return}const q=new FileReader;q.onload=async()=>{try{const V=JSON.parse(q.result),_t=Object.keys(V).includes("web");let kt=!1;if(_t&&V.web&&Array.isArray(V.web.redirect_uris)&&(kt=V.web.redirect_uris.includes(g)),_t&&kt){const ne=new FormData;if(ne.append("client_data",q.result),!(await re(se.BASE_URL+"/api/uploadClientData",{method:"POST",body:ne})).ok)throw new Error("Failed to upload client data");N(s,"Upload Client secret json"),$.disabled=!1,N(r,!0),await i()}else alert("Must be a webapp and redirect_uris must contain: "+g),$.disabled=!1}catch{alert("Invalid JSON file"),$.disabled=!1}},q.readAsText(x)}bs();var f=Cs(),u=I(f),c=I(u);{var v=b=>{var g=Ts(),$=I(g),x=pt(I($),2);{var q=K=>{var Bt=xs();nt(K,Bt)},J=K=>{var Bt=ks();nt(K,Bt)};ie(x,K=>{O(n).is_activated?K(q):K(J,!1)})}L($);var V=pt($,2),_t=I(V),kt=I(_t,!0);L(_t),L(V);var ne=pt(V,2);{var Je=K=>{var Bt=As();nt(K,Bt)};ie(ne,K=>{O(n).is_activated||K(Je)})}L(g),en(()=>fn(kt,O(n).client_id)),nt(b,g)},d=b=>{var g=Os(),$=I(g),x=pt(I($),4),q=pt(I(x),2),J=I(q),V=I(J),_t=I(V,!0);L(V),Or(2),L(J);var kt=pt(J,2);L(q),L(x),L($),L(g),en(()=>fn(_t,O(s))),an("change",kt,o),nt(b,g)};ie(c,b=>{O(n)?b(v):b(d,!1)})}var h=pt(c,2);{var m=b=>{var g=Ss(),$=I(g);L(g),an("click",$,a),nt(b,g)};ie(h,b=>{O(r)&&b(m)})}L(u),L(f),nt(t,f),kn()}Es(tr,{},[],[],!0);We(tr,{target:document.getElementById("main")});
